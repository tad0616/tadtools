webpackJsonpjwplayer([1],[,,,,,function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(182),a=r(i);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";var r=n(60),i=n(144),a=n(145);r.operations=i,r.operations.pipeline=a.pipeline,r.operations.pipelineAsync=a.pipelineAsync,e.exports=r},function(e,t,n){(function(t){var r="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(186),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(s){r.regeneratorRuntime=void 0}e.exports={"default":e.exports,__esModule:!0}}).call(t,function(){return this}())},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(75)("wks"),i=n(53),a=n(13).Symbol,s="function"==typeof a,u=e.exports=function(e){return r[e]||(r[e]=s&&a[e]||(s?a:i)("Symbol."+e))};u.store=r},,function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,function(e,t,n){e.exports={"default":n(194),__esModule:!0}},,function(e,t,n){var r=n(29);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},,function(e,t,n){var r=n(17),i=n(105),a=n(79),s=Object.defineProperty;t.f=n(21)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return s(e,t,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},,function(e,t,n){e.exports=!n(49)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(13),i=n(10),a=n(28),s=n(26),u="prototype",o=function(e,t,n){var c,f,l,d=e&o.F,h=e&o.G,p=e&o.S,v=e&o.P,m=e&o.B,y=e&o.W,_=h?i:i[t]||(i[t]={}),g=_[u],b=h?r:p?r[t]:(r[t]||{})[u];h&&(n=t);for(c in n)f=!d&&b&&void 0!==b[c],f&&c in _||(l=f?b[c]:n[c],_[c]=h&&"function"!=typeof b[c]?n[c]:m&&f?a(l,r):y&&b[c]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[u]=e[u],t}(l):v&&"function"==typeof l?a(Function.call,l):l,v&&((_.virtual||(_.virtual={}))[c]=l,e&o.R&&g&&!g[c]&&s(g,c,l)))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,o.U=64,o.R=128,e.exports=o},,function(e,t,n){"use strict";function r(e,t){for(var n=new Uint8Array(t),r=0,i=0;i<e.length;i++)n.set(e[i],r),r+=e[i].length;return n}function i(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e),n.set(t,e.byteLength),n}function a(e,t){var n=new Uint8Array(e.byteLength+t);return n.set(e),n}function s(e,t,n){e[t]=n>>>24&255,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=255&n}function u(e,t){var n=e[t],r=e[t+1],i=e[t+2],a=e[t+3];return n<<24|r<<16|i<<8|a}function o(e,t){var n=e[t],r=e[t+1];return n<<8|r}function c(e){return f.map(e,function(e){return e.toString(16)})}Object.defineProperty(t,"__esModule",{value:!0}),t.combineUint8Arrays=r,t.concatUint8Array=i,t.extendUint8Array=a,t.writeUint32=s,t.readUint32=u,t.readUint16=o,t.toHex=c;var f=n(1)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(19),i=n(37);e.exports=n(21)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(205),i=n(69);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(67);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},,,,function(e,t,n){"use strict";function r(e){return e&&e["@@transducer/reduced"]}function i(e,t){f.run(function(){e(t)})}function a(e){return console.log("error in channel transformer",e.stack),h}function s(e,t,n){var r=(t||a)(n);return r!==h&&e.add(r),e}function u(){}function o(e){return function(t){return{"@@transducer/step":function(n,r){try{return t["@@transducer/step"](n,r)}catch(i){return s(n,e,i)}},"@@transducer/result":function(n){try{return t["@@transducer/result"](n)}catch(r){return s(n,e,r)}}}}}var c=n(61),f=n(62),l=64,d=1024,h=null,p=function(e){this.value=e},v=function(e,t){this.handler=e,this.value=t},m=function(e,t,n,r){this.buf=n,this.xform=r,this.takes=e,this.puts=t,this.dirty_takes=0,this.dirty_puts=0,this.closed=!1};m.prototype._put=function(e,t){if(e===h)throw new Error("Cannot put CLOSED on a channel.");if(!t.is_active())return null;if(this.closed)return t.commit(),new p(!1);var n,a;if(this.buf&&!this.buf.is_full()){t.commit();for(var s=r(this.xform["@@transducer/step"](this.buf,e));;){if(0===this.buf.count())break;if(n=this.takes.pop(),n===c.EMPTY)break;n.is_active()&&(e=this.buf.remove(),a=n.commit(),i(a,e))}return s&&this.close(),new p(!0)}for(;;){if(n=this.takes.pop(),n===c.EMPTY)break;if(n.is_active())return t.commit(),a=n.commit(),i(a,e),new p(!0)}if(this.dirty_puts>l?(this.puts.cleanup(function(e){return e.handler.is_active()}),this.dirty_puts=0):this.dirty_puts++,t.is_blockable()){if(this.puts.length>=d)throw new Error("No more than "+d+" pending puts are allowed on a single channel.");this.puts.unbounded_unshift(new v(t,e))}return null},m.prototype._take=function(e){if(!e.is_active())return null;var t,n,a,s;if(this.buf&&this.buf.count()>0){for(e.commit(),s=this.buf.remove();;){if(this.buf.is_full())break;if(t=this.puts.pop(),t===c.EMPTY)break;n=t.handler,n.is_active()&&(a=n.commit(),a&&i(a,!0),r(this.xform["@@transducer/step"](this.buf,t.value))&&this.close())}return new p(s)}for(;;){if(t=this.puts.pop(),s=t.value,t===c.EMPTY)break;if(n=t.handler,n.is_active())return e.commit(),a=n.commit(),a&&i(a,!0),new p(s)}if(this.closed)return e.commit(),new p(h);if(this.dirty_takes>l?(this.takes.cleanup(function(e){return e.is_active()}),this.dirty_takes=0):this.dirty_takes++,e.is_blockable()){if(this.takes.length>=d)throw new Error("No more than "+d+" pending takes are allowed on a single channel.");this.takes.unbounded_unshift(e)}return null},m.prototype.close=function(){if(!this.closed){if(this.closed=!0,this.buf)for(this.xform["@@transducer/result"](this.buf);;){if(0===this.buf.count())break;if(t=this.takes.pop(),t===c.EMPTY)break;if(t.is_active()){n=t.commit();var e=this.buf.remove();i(n,e)}}for(;;){var t=this.takes.pop();if(t===c.EMPTY)break;if(t.is_active()){var n=t.commit();i(n,h)}}for(;;){var r=this.puts.pop();if(r===c.EMPTY)break;if(r.handler.is_active()){var a=r.handler.commit();a&&i(a,!1)}}}},m.prototype.is_closed=function(){return this.closed},u.prototype["@@transducer/init"]=function(){throw new Error("init not available")},u.prototype["@@transducer/result"]=function(e){return e},u.prototype["@@transducer/step"]=function(e,t){return e.add(t),e},t.chan=function(e,t,n){if(t){if(!e)throw new Error("Only buffered channels can use transducers");t=t(new u)}else t=new u;return t=o(n)(t),new m(c.ring(32),c.ring(32),e,t)},t.Box=p,t.Channel=m,t.CLOSED=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BDA_UNITIALIZED_MPEG2STREAMTYPE:-1,Reserved1:0,ISO_IEC_11172_2_VIDEO:1,ISO_IEC_13818_2_VIDEO:2,ISO_IEC_11172_3_AUDIO:3,ISO_IEC_13818_3_AUDIO:4,ISO_IEC_13818_1_PRIVATE_SECTION:5,ISO_IEC_13818_1_PES:6,ISO_IEC_13522_MHEG:7,ANNEX_A_DSM_CC:8,ITU_T_REC_H_222_1:9,ISO_IEC_13818_6_TYPE_A:10,ISO_IEC_13818_6_TYPE_B:11,ISO_IEC_13818_6_TYPE_C:12,ISO_IEC_13818_6_TYPE_D:13,ISO_IEC_13818_1_AUXILIARY:14,ISO_IEC_13818_1_RESERVED:15,ISO_IEC_14496_3_AUDIO:17,USER_PRIVATE:16,ISO_IEC_14496_1_IN_PES:18,ISO_IEC_14496_1_IN_SECTION:19,ISO_IEC_13818_6_DOWNLOAD:20,METADATA_IN_PES:21,METADATA_IN_SECTION:22,METADATA_IN_DATA_CAROUSEL:23,METADATA_IN_OBJECT_CAROUSEL:24,METADATA_IN_DOWNLOAD_PROTOCOL:25,IRPM_STREAMM:26,ITU_T_H264:27,ISO_IEC_USER_PRIVATE:128,DOLBY_AC3_AUDIO:129,DOLBY_DIGITAL_PLUS_AUDIO_ATSC:135};t["default"]=n},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(218)(!0);n(108)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},,,,,,,,,,,function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=!0},function(e,t,n){var r=n(113),i=n(71);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(19).f,i=n(25),a=n(11)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){n(223);for(var r=n(13),i=n(26),a=n(30),s=n(11)("toStringTag"),u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],o=0;5>o;o++){var c=u[o],f=r[c],l=f&&f.prototype;l&&!l[s]&&i(l,s,c),a[c]=a.Array}},,,,,,function(e,t,n){"use strict";function r(e,t){var n=u.chan(s.fixed(1));return new c.Process(e,function(e){e===u.CLOSED?n.close():c.put_then_callback(n,e,function(e){n.close()})},t).run(),n}function i(e,t){t=t||[];var n=e.apply(null,t);return r(n,e)}function a(e,t,n){var r;return 0===e&&(e=null),r="number"==typeof e?s.fixed(e):e,u.chan(r,t,n)}var s=n(61),u=n(34),o=n(94),c=n(146),f=n(147);e.exports={buffers:{fixed:s.fixed,dropping:s.dropping,sliding:s.sliding},spawn:r,go:i,chan:a,DEFAULT:o.DEFAULT,CLOSED:u.CLOSED,put:c.put,take:c.take,offer:c.offer,poll:c.poll,sleep:c.sleep,alts:c.alts,putAsync:c.put_then_callback,takeAsync:c.take_then_callback,NO_VALUE:c.NO_VALUE,timeout:f.timeout}},function(e,t){"use strict";function n(e,t,n,r,i){for(var a=0;;){if(a>=i)break;n[r+a]=e[t+a],a++}}var r={toString:function(){return"[object EMPTY]"}},i=function(e,t,n,r){this.length=n,this.array=r,this.head=e,this.tail=t};i.prototype._unshift=function(e){var t=this.array,n=this.head;t[n]=e,this.head=(n+1)%t.length,this.length++},i.prototype._resize=function(){var e=this.array,t=2*e.length,r=new Array(t),i=this.head,a=this.tail,s=this.length;i>a?(n(e,a,r,0,s),this.tail=0,this.head=s,this.array=r):a>i?(n(e,a,r,0,e.length-a),n(e,0,r,e.length-a,i),this.tail=0,this.head=s,this.array=r):a===i&&(this.tail=0,this.head=0,this.array=r)},i.prototype.unbounded_unshift=function(e){this.length+1===this.array.length&&this._resize(),this._unshift(e)},i.prototype.pop=function(){if(0===this.length)return r;var e=this.array,t=this.tail,n=e[t];return e[t]=null,this.tail=(t+1)%e.length,this.length--,n},i.prototype.cleanup=function(e){for(var t=this.length,n=0;t>n;n++){var r=this.pop();e(r)&&this._unshift(r)}};var a=function(e,t){this.buf=e,this.n=t};a.prototype.is_full=function(){return this.buf.length>=this.n},a.prototype.remove=function(){return this.buf.pop()},a.prototype.add=function(e){this.buf.unbounded_unshift(e)},a.prototype.count=function(){return this.buf.length};var s=function(e,t){this.buf=e,this.n=t};s.prototype.is_full=function(){return!1},s.prototype.remove=function(){return this.buf.pop()},s.prototype.add=function(e){this.buf.length<this.n&&this.buf._unshift(e)},s.prototype.count=function(){return this.buf.length};var u=function(e,t){this.buf=e,this.n=t};u.prototype.is_full=function(){return!1},u.prototype.remove=function(){return this.buf.pop()},u.prototype.add=function(e){this.buf.length===this.n&&this.buf.pop(),this.buf._unshift(e)},u.prototype.count=function(){return this.buf.length};var o=t.ring=function(e){return new i(0,0,0,new Array(e))};t.fixed=function(e){return new a(o(e),e)},t.dropping=function(e){return new s(o(e),e)},t.sliding=function(e){return new u(o(e),e)},t.EMPTY=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){l=!0,d=!1;for(var e=0;;){var t=f.pop();if(t===o.EMPTY)break;if(t(),e>=c)break;e++}l=!1,f.length>0&&a()}var a,s=n(184),u=r(s),o=n(61),c=1024,f=o.ring(32),l=!1,d=!1;if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(e){i()},a=function(){d&&l||(d=!0,h.port2.postMessage(0))}}else a="undefined"!=typeof u["default"]?function(){d&&l||(d=!0,(0,u["default"])(i))}:function(){d&&l||(d=!0,setTimeout(i,0))};t.run=function(e){f.unbounded_unshift(e),a()},t.queue_delay=function(e,t){setTimeout(e,t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Manifest=t.MediaData=void 0;var i=n(15),a=r(i),s=n(102),u=r(s),o=n(7),c=r(o),f=n(5),l=r(f),d=n(153),h=n(152),p=n(64),v=n(151),m=n(1),y=n(3);n(4),t.MediaData=function _(e){(0,l["default"])(this,_),this.type=e.type,this.groupId=e.groupid,this.instreamId=e.instreamid,this.name=e.name,this.uri=e.uri,this.language=e.language,this.associatedLanguage=e.assoclanguage,this["default"]="YES"===e["default"],"undefined"!=typeof e.autoselect&&(this["default"]=this.autoSelect=!0),this.forced="YES"===e.forced,this.characteristics=e.characteristics?e.characteristics.split(","):[]},t.Manifest=function(){function e(t,n){(0,l["default"])(this,e),this.ptsToSecondsMap_={},this.streamType="LIVE",this.lastManifestRefreshTime_={},this.url="",this.levels_=[],this.sortedLevels_=[],this.refreshesWithoutChanges=0,m.extend(this,y),this.network=t,this.video_=n}return(0,c["default"])(e,[{key:"load",value:function(e,t){var n=this;return this.url=e,this.fetchManifest_({manifestURL:e,loadStreamLabel:t}).then(function(e){return"VOD"!==n.streamType&&(n.liveManifestLoader=new v.LiveManifestLoader(n,n.network,n.video_)),e})}},{key:"getLevelFromLabel",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].label===t)return n;return 0}},{key:"requestTS",value:function(e,t,n){var r=this;return this.fetchDataPromise_.then(function(i){var a=r.sortedLevels_[n],s=a.streamInfo.originalIndex;return"VOD"===r.streamType?r.refreshManifest(s).then(function(){return a.getSegmentTimeRange(e,t)}):r.liveManifestLoader.pollManifest(s).then(function(){var n=a.getSegmentTimeRange(e,t);if(n.length)return n;var r=a.segments[0];return r&&r.start>t?a.segments:[]})})}},{key:"getSegmentFromIndex",value:function(e){var t=e.split("_"),n=(0,u["default"])(t,2),r=n[0],i=n[1],a=this.levels_[r];return a.mediaSequenceMap[i]}},{key:"updateTS",value:function(e,t,n){var r=this.levels_[e],i=r.mediaSequenceMap[t];i&&"video"===n.type&&n.duration&&(i.duration=n.duration,i.pts=n.start,this.updateTimeline_(r))}},{key:"setPtsMapping",value:function(e,t,n){this.ptsToSecondsMap_[e]||(this.ptsToSecondsMap_[e]={discontinuity:e,pts:t,seconds:n})}},{key:"getPtsMapping",value:function(e){return this.ptsToSecondsMap_[e]}},{key:"updateLevel",value:function(e){var t=this.levels_[e.level];t.segmentFileSize.push(e.size);var n=t.segmentFileSize.max()/t.streamInfo.targetDuration;t.streamInfo.bandwidth=Math.max(t.streamInfo.bandwidth,n)}},{key:"refreshManifest",value:function(e){var t=this;return"VOD"===this.streamType&&this.levels_[e].segments.length?a["default"].resolve(this.currentManifestMetadata):(this.fetchDataPromise_=this.fetchManifestData_({manifestURL:this.url,loadStreamIndex:e}).then(function(e){return t.refreshLevels_(e)}).then(function(e){return t.appendManifestInfoToLevels_(e)}).then(function(e){var n=e.media.streamInfo.originalIndex,r=t.levels_[n];return t.referenceTimeline_=r,t.updateTimeline_(r),t.currentManifestMetadata}).then(function(e){var n=m.any(e.levels,m.property("updatedInLastRefresh"));return t.refreshesWithoutChanges=n?0:t.refreshesWithoutChanges+1,e}),this.fetchDataPromise_)}},{key:"destroy",value:function(){this.liveManifestLoader&&this.liveManifestLoader.destroy(),this.network&&(this.network=null)}},{key:"fetchManifest_",value:function(e){var t=this;return this.fetchDataPromise_=this.fetchManifestData_(e).then(function(e){return t.setupLevels_(e)})["catch"](function(e){return e}).then(function(e){var n=m.isString(e);if(n)throw e;var r=m.where(t.levels_,{disabled:!1});if(!r.length)throw"No levels to play";if(!t.referenceTimeline_||t.referenceTimeline_.disabled)throw"Playlist could not be loaded";var i=t.referenceTimeline_.streamInfo;return t.sortedLevels_=t.getSortedLevels_(r),t.currentManifestMetadata={initialLevel:t.initialLevel,sortedLevels:t.sortedLevels_,levels:r,trackTypes:r[0].streamInfo.trackTypes,streamType:t.streamType,start:i.start,end:i.end},t.currentManifestMetadata}),this.fetchDataPromise_}},{key:"doneLoading",value:function(){return this.fetchDataPromise_}},{key:"fetchManifestData_",value:function(e){function t(t,n){m.each(t,function(e,t){e.originalIndex=t});var i=e.loadStreamIndex;m.isNumber(i)&&!m.isNaN(i)||(i=r.getLevelFromLabel(t,e.loadStreamLabel));var a=t[i],s=n.getPlaylist();return s.streamInfos=t,r.downloadAndParseThrottle_(a.url,a).then(function(e){return{master:s,media:e.parser.getPlaylist()}})["catch"](function(){return{master:s,media:{streamInfo:a}}})}function n(e){var n=e.parser,i=e.children;if(i.length)return r.parsedMaster_=e,t(i,n);var a=n.getPlaylist();return{master:void 0,media:a}}var r=this;return this.url===e.manifestURL&&this.parsedMaster_?t(this.parsedMaster_.children,this.parsedMaster_.parser):this.downloadAndParseThrottle_(e.manifestURL).then(n)}},{key:"downloadAndParseThrottle_",value:function(e,t){var n=m.now(),r=this.lastManifestRefreshTime_[e];if(r&&n-r.time<500)return r.promise;var i=this.downloadAndParse_(e,t);return this.lastManifestRefreshTime_[e]={time:n,promise:i},i}},{key:"downloadAndParse_",value:function(e,t){var n=new d.ManifestParser(e,t),r=new h.ManifestLoader(this.network),i=[];return n.on("mediaPlaylistFound",function(e){i.push(e)}),r.on("manifestChunk",n.parse,n),r.load(e).then(function(){return n.off(),r.off(),{children:i,parser:n}})}},{key:"suspendManifestReloading",value:function(){"LIVE"===this.streamType&&this.liveManifestLoader&&this.liveManifestLoader.cancelReloading()}},{key:"refreshLevels_",value:function(e){var t=this,n=e.media;if(!n.streamInfo)return null;var r=m.where(this.levels_,{disabled:!1});if(r.length>1&&(this.disableLevel_(n),r=m.where(this.levels_,{disabled:!1})),r.length!==this.sortedLevels_.length){this.sortedLevels_=this.getSortedLevels_(r),this.currentManifestMetadata.levels=r,this.currentManifestMetadata.sortedLevels=this.sortedLevels_;var i=r[0],s=i.streamInfo.originalIndex,u=m.indexOf(this.sortedLevels_,this.levels_[s]);return this.trigger("levels-disabled",{levels:this.sortedLevels_,nextIndex:u}),this.fetchManifestData_({manifestURL:this.url,loadStreamIndex:s}).then(function(e){return t.refreshLevels_(e)})}return a["default"].resolve(e)}},{key:"setupLevels_",value:function(e){var t=this;e.master||(e.master={streamInfos:[e.media.streamInfo]}),this.levels_.length||(this.levels_=m.map(e.master.streamInfos,function(t){var n=new p.Level;return n.streamInfo=t,n.streamInfo.video&&e.master.renditions.video&&(n.streamInfo.video=e.master.renditions.video[n.streamInfo.video]),n.streamInfo.audio&&e.master.renditions.audio&&(n.streamInfo.audio=e.master.renditions.audio[n.streamInfo.audio]),n}));var n=e.media;if(!n.streamInfo)return a["default"].reject("Invalid manifest file");this.disableLevels_(n);var r=n.streamInfo.originalIndex,i=this.levels_[r],s=i.streamInfo;this.referenceTimeline_=i,s.start=n.streamInfo.start,s.end=n.streamInfo.end,s.targetDuration=n.streamInfo.targetDuration,s.hasEndlist?this.streamType="VOD":s.end-s.start>=120&&(this.streamType="DVR"),m.each(n.mediaElements,function(e){e.level=r,i.appendSegment(e)}),this.initialLevel=i;var u=m.where(this.levels_,{disabled:!1});if(!u.length)throw"No levels to play";if(this.sortedLevels_=this.getSortedLevels_(u),i.disabled){var o=u[0].streamInfo.originalIndex;return this.fetchManifestData_({manifestURL:this.url,loadStreamIndex:o}).then(function(e){return t.setupLevels_(e)})}return a["default"].resolve()}},{key:"setCurrentQuality",value:function(e){if(-1!==e){var t=this.sortedLevels_[e];this.refreshManifest(t.streamInfo.originalIndex)}}},{key:"disableLevels_",value:function(t){t&&this.disableLevel_(t);var n=m.any(this.levels_,function(e){return m.any(e.streamInfo.trackTypes,function(e){return"video"===e.type})}),r=m.any(this.levels_,function(e){return m.contains(e.streamInfo.codecs,"mp4a.40.2")}),i=m.groupBy(this.levels_,e.makeResolutionKey);m.each(this.levels_,function(t){var a=1===t.streamInfo.trackTypes.length&&"audio"===t.streamInfo.trackTypes[0].type,s=t.streamInfo.codecs&&m.contains(t.streamInfo.codecs,"mp4a.40.5");(n&&a||r&&s)&&(t.disabled=!0),"no resolution"!==e.makeResolutionKey(t)&&i[e.makeResolutionKey(t)].indexOf(t)>0&&(t.disabled=!0)})}},{key:"disableLevel_",value:function(e){var t=e.mediaElements;if(!t||!t.length||!t[0].url){var n=e.streamInfo.originalIndex;this.levels_[n].disabled=!0}}},{key:"getSortedLevels_",value:function(e){var t=m.clone(e);return t.sort(function(e,t){return e.streamInfo.bandwidth&&t.streamInfo.bandwidth?e.streamInfo.bandwidth-t.streamInfo.bandwidth:e.streamInfo.resolution.height-t.streamInfo.resolution.height}),t}},{key:"appendManifestInfoToLevels_",value:function(e){var t=e.media,n=t.streamInfo.originalIndex,r=this.levels_[n];if(r.mediaSequence=t.mediaSequence,"DVR"===this.streamType||"LIVE"===this.streamType){t.segments=t.mediaElements||[],r.updateSegments.call(t);var i=this.syncLiveLevels_(t);i||this.referenceTimeline_.segments.length&&(t.mediaElements[0].start=m.last(this.referenceTimeline_.segments).end,this.ptsToSecondsMap_={}),t.streamInfo.hasEndlist&&(m.each(this.levels_,function(e){e.streamInfo.hasEndlist=!0}),this.streamType=this.currentManifestMetadata.streamType="VOD")}var a=!1;return m.each(t.mediaElements,function(e){var t=r.appendSegment(e);t&&(a=!0),e.level=r.streamInfo.originalIndex}),r.updatedInLastRefresh=a,r.streamInfo.targetDuration=t.streamInfo.targetDuration,e}},{key:"updateTimeline_",value:function(e){e.updateSegments(),e===this.referenceTimeline_&&(this.currentManifestMetadata.start=e.streamInfo.start,this.currentManifestMetadata.end=e.streamInfo.end)}},{key:"syncLiveLevels_",value:function(e){var t=this,n=!1;return m.each(this.levels_,function(r){if(t.attemptSync_(e,r))n=!0;else{var i=t.liveManifestLoader.refreshRequests[r.streamInfo.originalIndex];i&&i.cycles||r.flushSegmentInfo()}}),n}},{key:"attemptSync_",value:function(e,t){var n=e.mediaElements[0],r=t.getLastSegment();if(0===t.segments.length)return!1;if(r.mediaSequenceId+1===n.mediaSequenceId)return n.start=r.end,!0;for(var i=0,a=0;i<e.mediaElements.length&&a<t.segments.length;){var s=e.mediaElements[i],u=t.segments[a];if(s.mediaSequenceId===u.mediaSequenceId){var o=u.start-s.start;return e.mediaElements[0].start+=o,!0}s.mediaSequenceId<u.mediaSequenceId?i++:a++}return!1}}],[{key:"makeResolutionKey",value:function(e){var t=e.streamInfo.resolution;return t&&t.width&&t.height?t.width+"x"+t.height:"no resolution"}},{key:"makeIndex",value:function(e){return e.level+"_"+e.mediaSequenceId}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentOriginalData=t.Dimensions=t.Segment=t.StreamInfo=t.Level=void 0;var i=n(5),a=r(i),s=n(7),u=r(s),o=n(99),c=r(o),f=n(1),l=(t.Level=function(){function e(){(0,a["default"])(this,e),this.segments=[],this.segmentMap={},this.mediaSequence=0,this.mediaSequenceMap={},this.streamInfo=new l,this.audioTracks=[],this.updatedInLastRefresh=!1,this.disabled=!1,this.segmentFileSize=new c["default"](30)}return(0,u["default"])(e,[{key:"containsSegment",value:function(e){return e?void 0!==this.mediaSequenceMap[e.mediaSequenceId]:!1}},{key:"flushSegmentInfo",value:function(){this.segments=[],this.segmentMap={},this.mediaSequenceMap={}}},{key:"appendSegment",value:function(e){return this.containsSegment(e)?!1:(this.segments.push(e),this.segmentMap[e.url]=this.mediaSequenceMap[e.mediaSequenceId]=e,!0)}},{key:"updateSegments",value:function(){if(this.segments.length){for(var e=-1,t=this.segments,n=void 0,r=0;r<t.length;r++){n=t[r];var i=t[r+1];n.end=n.start+n.duration,i&&(i.start=n.end),n.mediaSequenceId>=this.mediaSequence&&-1===e&&(e=n.start)}this.streamInfo.end=n.end,-1!==e&&(this.streamInfo.start=e)}}},{key:"getSegmentTimeRange",value:function(t,n){return e.getRanges(this.segments,t,n)}},{key:"getLastSegment",value:function(){return f.last(this.segments)}}],[{key:"getRanges",value:function(e,t,n){return f.filter(e,function(e){return t<=e.end&&n>=e.start})}}]),e}(),t.StreamInfo=function p(){(0,a["default"])(this,p),this.label="",this.url="",this.bandwidth=1e5,this.start=0,this.end=0,this.codecs=[],this.trackTypes=[],this.resolution=new d,this.targetDuration=5,this.originalIndex=0,this.video="",this.audio="",this.programId=0,this.hasEndlist=!1}),d=(t.Segment=function v(){(0,a["default"])(this,v),this.duration=0,this.title="",this.start=0,this.end=0,this.discontinuity=0,this.mediaSequenceId=0,this.url="",this.key="",this.aesKeyUri="",this.aesIV=[],this.originalData=new h,this.byteRange={},this.pts=0,this.size=0,this.isLast=!1},t.Dimensions=function m(){(0,a["default"])(this,m),this.width=0,this.height=0}),h=t.SegmentOriginalData=function y(){(0,a["default"])(this,y),this.duration=0,this.start=0,this.end=0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){if(0!==v.size(this.requestsInFlight)){var e=v.reduce(this.requestsInFlight,function(e,t){return e+(t.avgBandwidth.average()||0)},0);this.averageDownlink_.push(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Network=t.RequestType=void 0;var a=n(15),s=r(a),u=n(7),o=r(u),c=n(5),f=r(c),l=n(99),d=r(l),h=n(66),p=r(h),v=n(1),m=n(3),y=n(8),_=t.RequestType=void 0;!function(e){e[e.Text=0]="Text",e[e.ByteArray=1]="ByteArray"}(_||(t.RequestType=_={}));var g=function k(e,t,n){(0,f["default"])(this,k),this.uri=e,this.requester=t,this.estimatedSize=n,this.avgBandwidth=new d["default"](20)},b=function(){function e(){(0,f["default"])(this,e),this.requests_=[],this.destroyed_=!1,this.requestsInFlight={},v.extend(this,m),this.recordBandwidth_=v.throttle(i.bind(this),100),this.averageDownlink_=new d["default"](20),this.averageLatency_=new d["default"](10)}return(0,o["default"])(e,[{key:"status",value:function t(){var e=v.filter(this.requestsInFlight,function(e){return"media-file"===e.requester}),t={requestsOutstanding:v.size(e),bandwidth:Math.max(this.averageDownlink_.average(),0),latency:this.averageLatency_.average()/1e3};return t}},{key:"request",value:function(e){function t(e){var t=f.indexOf(e);return f.splice(t,1),e}var n=this;if(this.destroyed_)throw"Network Engine destroyed";for(var r=e.retryParameters||{},i=r.maxAttempts||1,a=r.backoffFactor||2,s=null==r.baseDelay?500:r.baseDelay,u=this.send_(e,0),o=function(t){var r=t%e.uris.length;u=u["catch"](function(){return n.resend_(e,s,r)}),s*=a},c=1;i>c;c++)o(c);var f=this.requests_;f.push(u);var l=e.requestType;return u.then(function(){return t(u)})["catch"](function(e){return t(u),e}).then(function(e){return n.processResponse_(l,e)})}},{key:"processResponse_",value:function(e,t){function n(e,t,u){e.read().then(function(f){if(f.value){u+=f.value.length,c+=f.value.length;var l=i(f.value,f.done);y.putAsync(a,l)}if(f.done)return delete o.requestsInFlight[r],y.putAsync(s,{size:c},function(){return s.close()}),void a.close();var d=v.now(),h=d-t;if(h>5){var p=Math.floor(u/h);o.requestsInFlight[r].avgBandwidth.push(p),o.recordBandwidth_(),t=d,u=0}n(e,t,u)})}if(t.error)throw t.error;var r=t.requestId,i=v.identity;e===_.Text&&!function(){var e=void 0;e=new TextDecoder,i=function(t,n){return e.decode(t||Uint8Array,{stream:n})}}();var a=y.chan(1e5),s=y.chan(),u=v.now()-t.startTime;u=Math.min(Math.max(10,u||0),3e3),this.averageLatency_.push(u);var o=this,c=0,f=t.response.body.getReader();return n(f,v.now(),0),{chan:a,metaChan:s}}},{key:"send_",value:function(e,t){var n=e.uris[t],r=e.requester,i=v.uniqueId("request_"),a=new g(n,r,100);this.requestsInFlight[i]=a;var s={requestId:i,startTime:v.now(),url:n,response:void 0,error:void 0};return fetch(n)["catch"](function(){return s.url&&"http:"===s.url.substring(0,5)&&"https:"===document.location.protocol?s.error="Unable to fetch HTTP resource over HTTPS":s.error="Crossdomain access denied",null}).then(function(e){if(s.response=e,!e||!e.ok)throw s.error=s.error||e.status+" "+e.statusText,s;return s})}},{key:"resend_",value:function(e,t,n){var r=this,i=e.retryParameters||{},a=null==i.fuzzFactor?.5:i.fuzzFactor,s=2*Math.random()-1,u=s*a,o=t*(1+u);return p["default"].wait(o).then(function(){return r.send_(e,n)})}},{key:"destroy",value:function(){this.destroyed_=!0;var e=v.map(this.requests_,function(e){return e["catch"](v.noop)});return s["default"].all(e)}}]),e}();t.Network=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return new s["default"](function(t){l.takeAsync(e,t)})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=r(a),u=n(5),o=r(u),c=n(7),f=r(c);t.channelToPromise=i;var l=n(8),d=function(){function e(){(0,o["default"])(this,e)}return(0,f["default"])(e,null,[{key:"wait",value:function(e){return new s["default"](function(t){setTimeout(t,e)})}}]),e}();t["default"]=d},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(36),i=n(11)("toStringTag"),a="Arguments"==r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=s(t=Object(e),i))?n:a?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(29),i=n(13).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(17),i=n(212),a=n(71),s=n(74)("IE_PROTO"),u=function(){},o="prototype",c=function(){var e,t=n(70)("iframe"),r=a.length,i=">";for(t.style.display="none",n(104).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+i),e.close(),c=e.F;r--;)delete c[o][a[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(u[o]=r(e),n=new u,u[o]=null,n[s]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(75)("keys"),i=n(53);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(13),i="__core-js_shared__",a=r[i]||(r[i]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t,n){var r,i,a,s=n(28),u=n(204),o=n(104),c=n(70),f=n(13),l=f.process,d=f.setImmediate,h=f.clearImmediate,p=f.MessageChannel,v=0,m={},y="onreadystatechange",_=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},g=function(e){_.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){u("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n(36)(l)?r=function(e){l.nextTick(s(_,e,1))}:p?(i=new p,a=i.port2,i.port1.onmessage=g,r=s(a.postMessage,a,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(e){
f.postMessage(e+"","*")},f.addEventListener("message",g,!1)):r=y in c("script")?function(e){o.appendChild(c("script"))[y]=function(){o.removeChild(this),_.call(e)}}:function(e){setTimeout(s(_,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(77),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(29);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(13),i=n(10),a=n(50),s=n(81),u=n(19).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:s.f(e)})}},function(e,t,n){t.f=n(11)},function(e,t,n){var r=n(68),i=n(11)("iterator"),a=n(30);e.exports=n(10).getIteratorMethod=function(e){return void 0!=e?e[i]||e["@@iterator"]||a[r(e)]:void 0}},,,,,,,,function(e,t,n){var r,i;r=[n(1),n(58)],i=function(e,t){function n(n){var r=n.currentTarget.activeCues;if(r&&r.length){var i=r[r.length-1].startTime,a=[];if(e.each(r,function(e){e.startTime<i||(e.data?a.push(e):e.text&&this.trigger("meta",{metadataTime:i,metadata:JSON.parse(e.text)}))},this),a.length){var s=t.parseID3(a);this.trigger("meta",{metadataTime:i,metadata:s})}}}function r(){var e=this.video.textTracks;if(e){if(e.length){var t=0,r=e.length;for(f||(f=[],l={}),t;r>t;t++){var i=e[t];if(!l[t+i.kind])if("metadata"===i.kind)i.oncuechange=n.bind(this),i.mode="showing",l[t+i.kind]=i;else if("subtitles"===i.kind||"captions"===i.kind){var a=i.mode;if(i.mode="hidden",!i.cues.length)continue;i.mode=a,f.push(i),l[t+i.kind]=i}}}this.addTracksListener("change"),f&&f.length&&this.trigger("subtitlesTracks",{tracks:f})}}function i(t){f&&(e.each(f,function(e){e.mode="disabled"}),d=t-1,f[d]&&(f[d].mode="showing"))}function a(e){var t=this.video.textTracks,n=this["tracks"+e+"Handler"].bind(this);"addEventListener"in t?t.addEventListener(e,n):t["on"+e]=n}function s(e){var t=this.video.textTracks,n=this["tracks"+e+"Handler"];t&&("removeEventListener"in t?t.removeEventListener(e,n):t["on"+e]=null)}function u(){f||this.setTextTracks()}function o(){f=null,l=null}var c={setTextTracks:r,setSubtitlesTrack:i,addTracksListener:a,removeTracksListener:s,trackschangeHandler:u,clearTracks:o},f=null,l=null,d=-1;return c}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){return{volume:function(t){t=e.between(t/100,0,1),this.video.volume=t},mute:function(e){this.video.muted=!!e},resize:function(t,n,r){if(!(t&&n&&this.video.videoWidth&&this.video.videoHeight))return!1;if("uniform"===r){var i=t/n,a=this.video.videoWidth/this.video.videoHeight,s=null;Math.abs(i-a)<.09&&(s="fill"),e.css.style(this.video,{objectFit:s})}return!1}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(3),n(31),n(4),n(6)],i=function(e,t,n,r){var i=256;return{attached:!0,beforeComplete:!1,stallCheckTimeout_:-1,lastStalledTime_:NaN,trigger:function(t,n){return this.attached?e.trigger.call(this,t,n):void 0},setState:function(e){return this.attached?t.setState.call(this,e):void 0},checkComplete:function(){return this.beforeComplete},playbackComplete_:function(){this.stopStallCheck(),this.setState(r.COMPLETE),this.beforeComplete=!1,this.trigger(n.JWPLAYER_MEDIA_COMPLETE)},attachMedia:function(){this.attached=!0,this.eventsOn_(),this.beforeComplete&&this.playbackComplete_()},detachMedia:function(){return this.stopStallCheck(),this.attached=!1,this.eventsOff_(),this.video},stopStallCheck:function(){clearTimeout(this.stallCheckTimeout_)},startStallCheck:function(){this.stopStallCheck(),this.stallCheckTimeout_=setTimeout(this.stalledHandler.bind(this),i)},stalledHandler:function(){return this.lastStalledTime_!==this.video.currentTime?void(this.lastStalledTime_=this.video.currentTime):void(this.video.paused||this.video.ended||this.state!==r.LOADING&&this.state!==r.ERROR&&(this.seeking||this.setState(r.STALLED)))}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2),n(4),n(6)],i=function(e,t,n){return{seeking:!1,loadedmetadata:function(){var e={duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth},n=this.drmUsed;n&&(e.drm=n),this.trigger(t.JWPLAYER_MEDIA_META,e)},timeupdate:function(){this.stopStallCheck();var e=this.video.videoHeight;e!==this._helperLastVideoHeight&&this.trigger("adaptation",{size:{width:this.video.videoWidth,height:this.video.videoHeight}}),this._helperLastVideoHeight=e,this.state===n.STALLED&&this.setState(n.PLAYING),this.startStallCheck();var r=this.getCurrentTime(),i={position:r,duration:this.getDuration()};if(this.getPtsOffset){var a=this.getPtsOffset();a>=0&&(i.metadata={mpegts:a+r})}this.trigger(t.JWPLAYER_MEDIA_TIME,i)},click:function(e){this.trigger("click",e)},volumechange:function(){var e=this.video;this.trigger("volume",{volume:Math.round(100*e.volume)}),this.trigger("mute",{mute:e.muted})},seeked:function(){this.seeking=!1,this.trigger(t.JWPLAYER_MEDIA_SEEKED)},playing:function(){this.setState(n.PLAYING)},pause:function(){this.state!==n.COMPLETE&&(this.video.ended||this.video.currentTime!==this.video.duration&&this.setState(n.PAUSED))},progress:function(){var n=this.getDuration();if(!(0>=n||n===1/0)){var r=this.video.buffered;if(r&&0!==r.length){var i=e.between(r.end(r.length-1)/n,0,1);this.trigger(t.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*i,position:this.getCurrentTime(),duration:n})}}},ended:function(){if(this.stopStallCheck(),this._helperLastVideoHeight=0,this.state!==n.IDLE&&this.state!==n.COMPLETE){if(this.beforeComplete=!0,this.attached=!0,this.trigger(t.JWPLAYER_MEDIA_BEFORECOMPLETE),!this.attached)return;this.playbackComplete_()}},loadeddata:function(){this.setTextTracks(),this.video.setAttribute("jw-loaded","data")},error:function(){var e=this.video.error&&this.video.error.code||-1,n={1:"Unknown operation aborted",2:"Unknown network error",3:"Unknown decode error",4:"Source not supported"}[e]||"Unknown";this.trigger(t.JWPLAYER_MEDIA_ERROR,{code:e,message:"Error playing file: "+n})}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";function r(e){return Math.floor(Math.random()*(e+1))}function i(e){var t,n=new Array(e);for(t=0;e>t;t++)n[t]=0;for(t=1;e>t;t++){var i=r(t);n[t]=n[i],n[i]=t}return n}var a=n(34).Box,s=function(e,t){this.f=t,this.flag=e};s.prototype.is_active=function(){return this.flag.value},s.prototype.is_blockable=function(){return!0},s.prototype.commit=function(){return this.flag.value=!1,this.f};var u=function(e,t){this.value=e,this.channel=t},o=Object.prototype.hasOwnProperty,c={toString:function(){return"[object DEFAULT]"}};t.do_alts=function(e,t,n){var r=e.length;if(0===r)throw new Error("Empty alt list");var f=!(!n||!n.priority);if(!f)var l=i(r);for(var d=new a(!0),h=0;r>h;h++){var p,v,m=e[f?h:l[h]];if(m instanceof Array){var y=m[1];p=m[0],v=p._put(y,function(e){return new s(d,function(n){t(new u(n,e))})}(p))}else p=m,v=p._take(function(e){return new s(d,function(n){t(new u(n,e))})}(p));if(v instanceof a){t(new u(v.value,p));break}}v instanceof a||!n||!o.call(n,"default")||d.value&&(d.value=!1,t(new u(n["default"],c)))},t.DEFAULT=c},function(e,t,n){"use strict";function r(e){for(var t=0,n=0,r=10,u=[];t+s<e.length;){var o=a.utf8ArrayToStr(e.subarray(t,t+=3));if("ID3"===o){var c=e.subarray(t,t+=2),f=e.subarray(t,t+=1)[0];if(0!==(128&f)||c[0]<3)break;var l=a.syncSafeInt(e.subarray(t,t+=4));0!==(64&f)&&(r+=a.syncSafeInt(e.subarray(t,t+=4))),u=u.concat(i(e,n+r,l)),t+=l}else{if("3DI"!==o){t-=3;break}t+=7}n=t}return{position:t,cues:u}}function i(e,t,n){for(var r=e.length,i=t,s=[];t+n>i;){if(8>r-i)return s;var u=i;i+=4;var o=a.syncSafeInt(e.subarray(i,i+=4));if(o+2>r-i)return s;var c=e.subarray(i,i+=1)[0];if(c>0)return s;var f=e[i];3!==f&&0!==f||(--o,i++);var l=e.buffer.slice(u-10,i+o+1);s.push({data:l}),i+=o+1}return s}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=n(58),s=9},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r,i,a){var s;return l["default"].wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.assert(r.closed===!1,"Audio channel should not be closed"),s=v.combineUint8Arrays(t,n),u.next=4,h.put(r,{sourceFile:e,codec:a,type:"init",start:i});case 4:return u.next=6,h.put(r,{sourceFile:e,codec:a,type:"mediaSegment",payload:s});case 6:case"end":return u.stop()}},_[0],this)}function s(e,t){return l["default"].mark(function n(){var r,i,s,o,c,f,d;return l["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=void 0,i=[],s=0,o=Number.MAX_VALUE,c=void 0,f=!1,d=void 0;case 7:return n.t0=h.CLOSED,n.next=10,h.take(e);case 10:if(n.t1=r=n.sent,n.t0===n.t1){n.next=30;break}if("error"!==r.type){n.next=17;break}return n.next=15,h.put(t,r);case 15:return t.close(),n.abrupt("return");case 17:if(c=r.sourceFile,d=d||u(r),o=Math.min(o,r.pts),i.push(r.payload),s+=r.payload.length,!((r.pts-o)/9e4>1||!f||s>2e4)){n.next=28;break}return f=!0,n.delegateYield(a(c,i,s,t,o,d),"t2",25);case 25:s=0,i=[],o=Number.MAX_VALUE;case 28:n.next=7;break;case 30:return n.delegateYield(a(c,i,s,t,o,d),"t3",31);case 31:t.close();case 32:case"end":return n.stop()}},n,this)})}function u(e){switch(e.type){case y["default"].ISO_IEC_13818_1_RESERVED:var t=o(e.payload),n=t.frameData||{},r=0===n.mpegVersion&&n.channels>1&&n.rateIndex>=6,i=1===n.mpegVersion&&n.rateIndex>6;return r||i?"mp4a.40.5":"mp4a.40.2";case y["default"].ISO_IEC_11172_3_AUDIO:case y["default"].ISO_IEC_13818_3_AUDIO:default:return"mp3"}}function o(e){for(var t=0,n=0,r={},i=0;t<e.length;){r=c(e.subarray(t));{if(r){n+=1,t+=r.frameLength,i||(i=g[r.rateIndex]);break}t+=1}}return{frameData:r,sampleRate:i,sampleCount:n}}function c(e){var t=e[0]<<4|e[1]>>4,n=4095===t;if(n){var r=e[1]>>>3&1,i=e[1]>>>1&3;if(0===i){var a=(e[2]>>>6&3)+1,s=e[2]>>>2&15;if(15!==s){var u=(1&e[2])<<2|e[3]>>>6&3,o=(3&e[3])<<11|(255&e[4])<<3|(224&e[5])>>5;if(0!==o)return{mpegVersion:r,profile:a,rateIndex:s,channels:u,frameLength:o}}}}}Object.defineProperty(t,"__esModule",{value:!0});var f=n(9),l=i(f);t["default"]=s,t.parseFrame=c;var d=n(8),h=r(d),p=n(24),v=r(p),m=n(35),y=i(m),_=[a].map(l["default"].mark),g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,0,0]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={H264_NAL_UNIT_TYPE:6,H265_NAL_UNIT_TYPE:39,SEI_PAYLOAD_ITU_T_35:4,ITU_T_T35_COUNTRY_CODE:181,ITU_T_T35_PROVIDER_CODE:49,USER_IDENTIFIER_ATSC1_DATA:1195456820,USER_DATA_TYPE_CC_DATA:3,NTSC_CC_FIELD_1:0,NTSC_CC_FIELD_2:1,DTVCC_PACKET_DATA:2,DTVCC_PACKET_START:3,RBSP_TRAILING_BITS:128};t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),s=n(7),u=r(s),o=n(96),c=n(2),f=function(){function e(){(0,a["default"])(this,e)}return(0,u["default"])(e,null,[{key:"probeAAC",value:function(t){for(var n=0,r=t.length-e.AAC_HEADER_SIZE;r>n;){var i=t[n]<<8|65526&t[n+1];if(i===e.AAC_SYNCWORD){var a=(0,o.parseFrame)(t.subarray(n));return!(a.rateIndex>12||a.channels>7)}n++}return!1}},{key:"probeMP3",value:function(t){for(var n,r=0,i=t.length-e.MP3_HEADER_SIZE;i>r;){if(n=t[r]<<8|65504&t[r+1],n===e.MP3_SYNCWORD){var a,s,u,o,c,f=3&t[r+1],l=3&t[r+1],d=(240&t[r+2])>>4,h=(12&t[r+2])>>2,p=(2&t[r+3])>>1,v=3===l?"LAYER1":"OTHER",m=1===l?4:1;switch(f){case 3:a=e.MP3_SAMPLE_RATE_MAP.MPEG1[h],s=e.MP3_BITRATE_MAP.MPEG1[l-1][d],u=e.MP3_SAMPLES_COEFFICENT.MPEG1[l-1];break;case 2:a=e.MP3_SAMPLE_RATE_MAP.MPEG2[h],s=e.MP3_BITRATE_MAP.OTHER[v][d],u=e.MP3_SAMPLES_COEFFICENT.OTHER[l-1];break;default:a=e.MP3_SAMPLE_RATE_MAP["MPEG2.5"][h],s=e.MP3_BITRATE_MAP.OTHER[v][d],u=e.MP3_SAMPLES_COEFFICENT.OTHER[l-1]}s*=1e3,o=Math.floor((u*s/a+p)*m),c=r+o;for(var y=-1*e.MP3_FRAME_TOLERANCE;y<=e.MP3_FRAME_TOLERANCE;y++)if((t[c+y]<<8|65504&t[c+y+1])===e.MP3_SYNCWORD)return!0;return!1}r++}return!1}},{key:"probeMPEGTS",value:function(t){var n=t[0],r=t[e.TS_PACKET_SIZE];return n===r&&r===e.TS_SYNCBYTE}},{key:"probeID3",value:function(e){return"ID3"===c.utf8ArrayToStr(e.subarray(0,3))}}]),e}();t["default"]=f,f.AAC_HEADER_SIZE=18,f.AAC_SYNCWORD=65520,f.MP3_HEADER_SIZE=8,f.MP3_SYNCWORD=65504,f.MP3_FRAME_TOLERANCE=3,f.MP3_SAMPLE_RATE_MAP={MPEG1:[44100,48e3,32e3,0],MPEG2:[22050,24e3,16e3,0],"MPEG2.5":[11025,12e3,8e3,0]},f.MP3_BITRATE_MAP={MPEG1:[[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,0],[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,0],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,0]],OTHER:{LAYER1:[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,0],OTHER:[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,0]}},f.MP3_SAMPLES_COEFFICENT={MPEG1:[12,144,144],OTHER:[12,144,72]},f.TS_PACKET_SIZE=188,f.TS_SYNCBYTE=71},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),s=n(7),u=r(s),o=function(){function e(t){(0,a["default"])(this,e),this._samplesCount=0,this._insertIndex=0,this._sum=0,this._samples=new Array(t),this._size=t}return(0,u["default"])(e,[{key:"push",value:function(e){this._sum+=e-(this._samples[this._insertIndex]||0),this._samples[this._insertIndex]=e,this._samplesCount=Math.max(this._samplesCount,this._insertIndex+1),this._insertIndex=(this._insertIndex+1)%this._samples.length}},{key:"average",value:function(){return 0===this._samplesCount?0:this._sum/this._samplesCount}},{key:"max",value:function(){return 0===this._samplesCount?0:this._samples.reduce(function(e,t){return Math.max(e,t)})}}]),e}();t["default"]=o},function(e,t,n){e.exports={"default":n(196),__esModule:!0}},function(e,t,n){e.exports={"default":n(197),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(179),a=r(i),s=n(178),u=r(s);t["default"]=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=(0,u["default"])(e);!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,a["default"])(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(101),a=r(i),s=n(100),u=r(s),o="function"==typeof u["default"]&&"symbol"==typeof a["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof u["default"]&&e.constructor===u["default"]?"symbol":typeof e};t["default"]="function"==typeof u["default"]&&"symbol"===o(a["default"])?function(e){return"undefined"==typeof e?"undefined":o(e)}:function(e){return e&&"function"==typeof u["default"]&&e.constructor===u["default"]?"symbol":"undefined"==typeof e?"undefined":o(e)}},function(e,t,n){e.exports=n(13).document&&document.documentElement},function(e,t,n){e.exports=!n(21)&&!n(49)(function(){return 7!=Object.defineProperty(n(70)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(30),i=n(11)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},function(e,t,n){var r=n(17);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var s=e["return"];throw void 0!==s&&r(s.call(e)),a}}},function(e,t,n){"use strict";var r=n(50),i=n(22),a=n(114),s=n(26),u=n(25),o=n(30),c=n(207),f=n(52),l=n(214),d=n(11)("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",m="values",y=function(){return this};e.exports=function(e,t,n,_,g,b,k){c(n,t,_);var x,E,T,w=function(e){if(!h&&e in I)return I[e];switch(e){case v:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",A=g==m,M=!1,I=e.prototype,L=I[d]||I[p]||g&&I[g],C=L||w(g),P=g?A?w("entries"):C:void 0,O="Array"==t?I.entries||L:L;if(O&&(T=l(O.call(new e)),T!==Object.prototype&&(f(T,S,!0),r||u(T,d)||s(T,d,y))),A&&L&&L.name!==m&&(M=!0,C=function(){return L.call(this)}),r&&!k||!h&&!M&&I[d]||s(I,d,C),o[t]=C,o[S]=y,g)if(x={values:A?C:w(m),keys:b?C:w(v),entries:P},k)for(E in x)E in I||a(I,E,x[E]);else i(i.P+i.F*(h||M),t,x);return x}},function(e,t,n){var r=n(11)("iterator"),i=!1;try{var a=[7][r]();a["return"]=function(){i=!0},Array.from(a,function(){throw 2})}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],s=a[r]();s.next=function(){return{done:n=!0}},a[r]=function(){return s},e(a)}catch(u){}return n}},function(e,t,n){var r=n(73),i=n(37),a=n(27),s=n(79),u=n(25),o=n(105),c=Object.getOwnPropertyDescriptor;t.f=n(21)?c:function(e,t){if(e=a(e),t=s(t,!0),o)try{return c(e,t)}catch(n){}return u(e,t)?i(!r.f.call(e,t),e[t]):void 0}},function(e,t,n){var r=n(113),i=n(71).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(25),i=n(27),a=n(200)(!1),s=n(74)("IE_PROTO");e.exports=function(e,t){var n,u=i(e),o=0,c=[];for(n in u)n!=s&&r(u,n)&&c.push(n);for(;t.length>o;)r(u,n=t[o++])&&(~a(c,n)||c.push(n));return c}},function(e,t,n){e.exports=n(26)},function(e,t,n){var r=n(29),i=n(17),a=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(28)(Function.call,n(110).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){var r=n(69);e.exports=function(e){return Object(r(e))}},function(e,t){},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r,i;r=[n(93),n(91),n(92),n(90),n(1),n(2),n(6),n(4),n(3),n(149)],i=function(e,t,n,r,i,a,s,u,o,c){function f(e){for(var t=e.seekable?e.seekable.length:0,n=0;t--;)n=Math.max(n,e.seekable.end(t));return n}function l(a,l){function h(){x.on(u.JWPLAYER_MEDIA_LEVEL_CHANGED,function(e){v(e)}),x.on(u.JWPLAYER_MEDIA_LEVELS,function(e){v(e)}),x.on(u.JWPLAYER_MEDIA_BUFFER_FULL,function(e){b.trigger(u.JWPLAYER_MEDIA_BUFFER_FULL,e)}),x.on(u.JWPLAYER_MEDIA_META,function(e){b.trigger(u.JWPLAYER_MEDIA_META,e)}),x.on("hls-metadata-bufferchange",function(e){b.trigger("hls-metadata-bufferchange",e)}),x.on("error",function(e){b.trigger(u.JWPLAYER_MEDIA_ERROR,{code:-1,message:e})}),x.on(u.JWPLAYER_PLAYER_STATE,function(e){b.setState(e)}),b.on("adaptation",function(e){x.getConfiguration().then(function(t){if(t){var n=t.enableAdaptation,r=t.currentLevel,i=t.levels[r],a=n?"auto":"manual",s=n?"auto":"api";this._initialChoice&&(a="auto",s="initial choice",this._initialChoice=!1),this.trigger("visualQuality",{level:{index:r,label:i.label,bitrate:i.bitrate,width:e.size.width,height:e.size.height},reason:s,mode:a})}}.bind(this))},b),x.on("trackTypes",function(e){var t=1===e.length&&("audio"===e[0]||"audio"===e[0].type);b.trigger(u.JWPLAYER_MEDIA_TYPE,{mediaType:t?"audio":"video"})}),x.once("captionCueAdded",function(){b.setTextTracks()}),x.once("metadataCueAdded",function(){b.setTextTracks()}),i.each(k,function(e,t){g.addEventListener(t,e,!1)})}function p(){x.off(),b.off("adaptation"),i.each(k,function(e,t){g.removeEventListener(t,e)}),b.removeTracksListener("change")}function v(e){_!==e.levels&&(_=e.levels,b.trigger(u.JWPLAYER_MEDIA_LEVELS,e)),y!==e.currentQuality&&(y=e.currentQuality,b.trigger(u.JWPLAYER_MEDIA_LEVEL_CHANGED,e))}var m,y,_,g=this.video=document.createElement("video"),b=this,k={};i.each(e,function(e,t){"function"==typeof e?k[t]=e.bind(b):b[t]=e});var x=new c.Caterpillar(d);i.extend(this,o,t,n,r,{trigger:function(e,t){return this.attached?(e===u.JWPLAYER_MEDIA_ERROR&&(3===t.code&&"mp4a.40.5"===x.getAudioCodec()&&(t.message="Error playing file: HE-AAC not supported"),this.eventsOff_()),o.trigger.call(this,e,t)):void 0},eventsOn_:h,eventsOff_:function(){p(),x.destroy()},play:function(){this.state===s.PAUSED&&x&&x.manifestRepresentation&&"LIVE"===x.manifestRepresentation.streamType&&(this.stop(),this.init(),this.load(this.loadedItem)),this.seeking&&this.setState(s.LOADING),x.play()},pause:function(){this.stopStallCheck(),x.pause(),this.setState(s.PAUSED)},stop:function(){this.stopStallCheck(),this.attached&&(p(),this.clearTracks(),x.destroy(),g.pause(),g.removeAttribute("src"),g.load(),this.setState(s.IDLE))},seek:function(e){if(this.attached){0>e&&(e+=this.video.duration);var t=f(g),n=!!t,r=this;if(!n){var i=function(t){var n=t.target;n.removeEventListener("loadedmetadata",i),r.seek(e)};return this.video.removeEventListener("loadedmetadata",i),void this.video.addEventListener("loadedmetadata",i,!1)}e=Math.min(e,t-.01),this.trigger(u.JWPLAYER_MEDIA_SEEK,{position:this.getCurrentTime(),offset:e}),this.trigger(u.JWPLAYER_MEDIA_TIME,{duration:x.getDuration(),position:x.getExternalTime(e)}),x.manifestRepresentation&&"LIVE"!==x.manifestRepresentation.streamType&&(this.seeking=!0,this.video.currentTime=e)}},setCurrentQuality:function(e){if(y!==e&&!(0>e)&&_&&!(_.length<=e)){if(x.setCurrentQuality(e),_&&_[e]){var t=_[e].label;l.qualityLabel=t}v({levels:_,currentQuality:e})}},init:function(){if(this.attached){p(),this.clearTracks(),x.destroy(),h();var e=new window.MediaSource;g.src=URL.createObjectURL(e),x.setup(g,e)}},load:function(e){if(this.attached){this.loadedItem=e,this.setState(s.LOADING),x.streamingEngine||this.init(e);var t=e.sources[0].file;this._initialChoice=!0;var n=this;if(e.starttime){var r=function(t){var i=t.target;i.removeEventListener("loadedmetadata",r),n.seek(e.starttime)};this.video.removeEventListener("loadedmetadata",r),this.video.addEventListener("loadedmetadata",r,!1)}x.initStream(t,l.qualityLabel)}},setContainer:function(e){m=e,m.appendChild(g)},getDuration:function(){return x.getDuration()},getCurrentTime:function(){return x.getCurrentTime()},getPtsOffset:function(){return x.getPtsOffset()},destroy:function(){_=null,y=null,this.clearTracks(),x&&(p(),x.destroy(),x=null)},getQualityLevels:function(){return _},getCurrentQuality:function(){return y},getName:i.constant({name:"caterpillar"})})}var d;return l.getName=i.constant({name:"caterpillar"}),l.setEdition=function(e){d=e},l}.apply(t,r),!(void 0!==i&&(e.exports=i))},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return{is_closed:function(){return t.is_closed()},close:function(){t.close()},_put:function(e,n){return t._put(e,n)},_take:function(n){var r=t._take({is_active:function(){return n.is_active()},commit:function(){var t=n.commit();return function(n){return t(n===V?V:e(n))}}});if(r){var i=r.value;return new R(i===V?V:e(i))}return null}}}function a(e,t){return{is_closed:function(){return t.is_closed()},close:function(){t.close()},_put:function(n,r){return t._put(e(n),r)},_take:function(e){return t._take(e)}}}function s(e,t,n){var r=Y(n);return U(P["default"].mark(function i(){var n;return P["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,B(t);case 3:if(n=i.sent,n!==V){i.next=7;break}return r.close(),i.abrupt("break",12);case 7:if(!e(n)){i.next=10;break}return i.next=10,N(r,n);case 10:i.next=0;break;case 12:case"end":return i.stop()}},i,this)})),r}function u(e,t){return{is_closed:function(){return t.is_closed()},close:function(){t.close()},_put:function(n,r){return e(n)?t._put(n,r):new R(!t.is_closed())},_take:function(e){return t._take(e)}}}function o(e,t){return s(function(t){return!e(t)},t)}function c(e,t){return u(function(t){return!e(t)},t)}function f(e,t,n){var r,i,a,s;return P["default"].wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=3,B(t);case 3:if(r=u.sent,r!==V){u.next=9;break}return n.close(),u.abrupt("break",22);case 9:i=e(r),a=i.length,s=0;case 12:if(!(a>s)){u.next=18;break}return u.next=15,N(n,i[s]);case 15:s++,u.next=12;break;case 18:if(!n.is_closed()){u.next=20;break}return u.abrupt("break",22);case 20:u.next=0;break;case 22:case"end":return u.stop()}},O[0],this)}function l(e,t,n){var r=Y(n);return U(f,[e,t,r]),r}function d(e,t,n){var r=Y(n);return U(f,[e,r,t]),r}function h(e,t,n){return U(P["default"].mark(function r(){var i;return P["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,B(e);case 3:if(i=r.sent,i!==V){r.next=7;break}return n||t.close(),r.abrupt("break",13);case 7:return r.next=9,N(t,i);case 9:if(r.sent){r.next=11;break}return r.abrupt("break",13);case 11:r.next=0;break;case 13:case"end":return r.stop()}},r,this)})),t}function p(e,t,n,r){var i=Y(n),a=Y(r);return U(P["default"].mark(function s(){var n;return P["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,B(t);case 3:if(n=r.sent,n!==V){r.next=8;break}return i.close(),a.close(),r.abrupt("break",12);case 8:return r.next=10,N(e(n)?i:a,n);case 10:r.next=0;break;case 12:case"end":return r.stop()}},s,this)})),[i,a]}function v(e,t,n){return U(P["default"].mark(function r(){var i,a;return P["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=t;case 1:return r.next=4,B(n);case 4:if(a=r.sent,a!==V){r.next=9;break}return r.abrupt("return",i);case 9:i=e(i,a);case 10:r.next=1;break;case 12:case"end":return r.stop()}},r,this)}),[],!0)}function m(e,t,n){return U(P["default"].mark(function r(){var i,a;return P["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=t.length,a=0;case 2:if(!(i>a)){r.next=8;break}return r.next=5,N(e,t[a]);case 5:a++,r.next=2;break;case 8:n||e.close();case 9:case"end":return r.stop()}},r,this)}))}function y(e){var t=Y(e.length);return m(t,e),t}function _(e,t,n){for(var r,i=Y(n),a=t.length,s=new Array(a),u=Y(1),o=new Array(a),c=0;a>c;c++)o[c]=function(e){return function(t){s[e]=t,r--,0===r&&j(u,s.slice(0))}}(c);return U(P["default"].mark(function f(){var n,s;return P["default"].wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(r=a,n=0;a>n;n++)try{F(t[n],o[n])}catch(f){r--}return c.next=5,B(u);case 5:s=c.sent,n=0;case 7:if(!(a>n)){c.next=14;break}if(s[n]!==V){c.next=11;break}return i.close(),c.abrupt("return");case 11:n++,c.next=7;break;case 14:return c.next=16,N(i,e.apply(null,s));case 16:c.next=0;break;case 18:case"end":return c.stop()}},f,this)})),i}function g(e,t){var n=Y(t),r=e.slice(0);return U(P["default"].mark(function i(){var e,t,a;return P["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(0!==r.length){i.next=3;break}return i.abrupt("break",15);case 3:return i.next=5,q(r);case 5:if(e=i.sent,t=e.value,t!==V){i.next=11;break}return a=r.indexOf(e.channel),r.splice(a,1),i.abrupt("continue",0);case 11:return i.next=13,N(n,t);case 13:i.next=0;break;case 15:n.close();case 16:case"end":return i.stop()}},i,this)})),n}function b(e,t){var n=e.slice(0);return v(function(e,t){return e.push(t),e},n,t)}function k(e,t,n){var r=Y(n);return U(P["default"].mark(function i(){var n,a;return P["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=0;case 1:if(!(e>n)){i.next=12;break}return i.next=4,B(t);case 4:if(a=i.sent,a!==V){i.next=7;break}return i.abrupt("break",12);case 7:return i.next=9,N(r,a);case 9:n++,i.next=1;break;case 12:r.close();case 13:case"end":return i.stop()}},i,this)})),r}function x(e,t){var n=Y(t),r=X;return U(P["default"].mark(function i(){var t;return P["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,B(e);case 3:if(t=i.sent,t!==V){i.next=6;break}return i.abrupt("break",13);case 6:if(t!==r){i.next=8;break}return i.abrupt("continue",0);case 8:return r=t,i.next=11,N(n,t);case 11:i.next=0;break;case 13:n.close();case 14:case"end":return i.stop()}},i,this)})),n}function E(e,t,n){var r=Y(n),i=[],a=X;return U(P["default"].mark(function s(){var n,u;return P["default"].wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,B(t);case 3:if(n=s.sent,n!==V){s.next=12;break}if(!(i.length>0)){s.next=8;break}return s.next=8,N(r,i);case 8:return r.close(),s.abrupt("break",23);case 12:if(u=e(n),u!==a&&a!==X){s.next=17;break}i.push(n),s.next=20;break;case 17:return s.next=19,N(r,i);case 19:i=[n];case 20:a=u;case 21:s.next=0;break;case 23:case"end":return s.stop()}},s,this)})),r}function T(e,t,n){var r=Y(n);return U(P["default"].mark(function i(){var n,a,s;return P["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=new Array(e),a=0;case 3:if(!(e>a)){i.next=17;break}return i.next=6,B(t);case 6:if(s=i.sent,s!==V){i.next=13;break}if(!(a>0)){i.next=11;break}return i.next=11,N(r,n.slice(0,a));case 11:return r.close(),i.abrupt("return");case 13:n[a]=s;case 14:a++,i.next=3;break;case 17:return i.next=19,N(r,n);case 19:i.next=0;break;case 21:case"end":return i.stop()}},i,this)})),r}function w(e){var t=0;for(var n in e)t++;return t}function S(e){var t=e[G];return void 0===t&&(t=e[G]=Q()),t}function A(e){function t(e){return function(t){n--,0===n&&j(i,!0),t||r.untap(e.channel)}}var n,r=new K(e),i=Y(1);return U(P["default"].mark(function a(){var s,u,o,c,f;return P["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,B(e);case 3:if(s=a.sent,c=r.taps,s!==V){a.next=9;break}for(u in c)o=c[u],o.keepOpen||o.channel.close();return r.untapAll(),a.abrupt("break",17);case 9:n=w(c),f=n;for(u in c)o=c[u],j(o.channel,s,t(o));if(!(f>0)){a.next=15;break}return a.next=15,B(i);case 15:a.next=0;break;case 17:case"end":return a.stop()}},a,this)})),r}function M(e){var t=new z(e);return U(P["default"].mark(function n(){var r,i,a,s,u,o;return P["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t._getAllState();case 1:return n.next=4,q(r.reads);case 4:if(i=n.sent,a=i.value,s=i.channel,a!==V){n.next=11;break}return delete t.stateMap[S(s)],r=t._getAllState(),n.abrupt("continue",1);case 11:if(s!==t.change){n.next=14;break}return r=t._getAllState(),n.abrupt("continue",1);case 14:if(u=r.solos,!(u.indexOf(s)>-1)&&(0!==u.length||r.mutes.indexOf(s)>-1)){n.next=21;break}return n.next=18,N(e,a);case 18:if(o=n.sent){n.next=21;break}return n.abrupt("break",23);case 21:n.next=1;break;case 23:case"end":return n.stop()}},n,this)})),t}function I(){return null}function L(e,t,n){n=n||I;var r=new J(e,t,n);return U(P["default"].mark(function i(){var n,a,s,u,o;return P["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,B(e);case 3:if(n=i.sent,a=r.mults,n!==V){i.next=8;break}for(s in a)a[s].muxch().close();return i.abrupt("break",17);case 8:if(s=t(n),u=a[s],!u){i.next=15;break}return i.next=13,N(u.muxch(),n);case 13:o=i.sent,o||delete a[s];case 15:i.next=0;break;case 17:case"end":return i.stop()}},i,this)})),r}var C=n(9),P=r(C),O=[f].map(P["default"].mark),R=n(34).Box,D=n(60),U=D.go,B=D.take,N=D.put,F=D.takeAsync,j=D.putAsync,q=D.alts,Y=D.chan,V=D.CLOSED,X={},Q=function(){var e=0;return function(){return e++,""+e}}(),G="__csp_channel_id",K=function(e){this.taps={},this.ch=e},W=function(e,t){this.channel=e,this.keepOpen=t};K.prototype.muxch=function(){return this.ch},K.prototype.tap=function(e,t){var n=S(e);this.taps[n]=new W(e,t)},K.prototype.untap=function(e){delete this.taps[S(e)]},K.prototype.untapAll=function(){this.taps={}},A.tap=function(e,t,n){return e.tap(t,n),t},A.untap=function(e,t){e.untap(t)},A.untapAll=function(e){e.untapAll()};var z=function(e){this.ch=e,this.stateMap={},this.change=Y(),this.soloMode=M.MUTE};z.prototype._changed=function(){j(this.change,!0)},z.prototype._getAllState=function(){var e,t=this.stateMap,n=[],r=[],i=[];for(var a in t){var s=t[a],u=s.state,o=s.channel;u[M.SOLO]&&n.push(o),u[M.MUTE]&&r.push(o),u[M.PAUSE]&&i.push(o)}var c,f;if(this.soloMode===M.PAUSE&&n.length>0){for(f=n.length,e=new Array(f+1),c=0;f>c;c++)e[c]=n[c];e[f]=this.change;
}else{e=[];for(a in t)s=t[a],o=s.channel,i.indexOf(o)<0&&e.push(o);e.push(this.change)}return{solos:n,mutes:r,reads:e}},z.prototype.admix=function(e){this.stateMap[S(e)]={channel:e,state:{}},this._changed()},z.prototype.unmix=function(e){delete this.stateMap[S(e)],this._changed()},z.prototype.unmixAll=function(){this.stateMap={},this._changed()},z.prototype.toggle=function(e){for(var t=e.length,n=0;t>n;n++){var r=e[n][0],i=S(r),a=e[n][1],s=this.stateMap[i];s||(s=this.stateMap[i]={channel:r,state:{}});for(var u in a)s.state[u]=a[u]}this._changed()},z.prototype.setSoloMode=function(e){if(H.indexOf(e)<0)throw new Error("Mode must be one of: ",H.join(", "));this.soloMode=e,this._changed()},M.MUTE="mute",M.PAUSE="pause",M.SOLO="solo";var H=[M.MUTE,M.PAUSE];M.add=function(e,t){e.admix(t)},M.remove=function(e,t){e.unmix(t)},M.removeAll=function(e){e.unmixAll()},M.toggle=function(e,t){e.toggle(t)},M.setSoloMode=function(e,t){e.setSoloMode(t)};var J=function(e,t,n){this.ch=e,this.topicFn=t,this.bufferFn=n,this.mults={}};J.prototype._ensureMult=function(e){var t=this.mults[e],n=this.bufferFn;return t||(t=this.mults[e]=A(Y(n(e)))),t},J.prototype.sub=function(e,t,n){var r=this._ensureMult(e);return A.tap(r,t,n)},J.prototype.unsub=function(e,t){var n=this.mults[e];n&&A.untap(n,t)},J.prototype.unsubAll=function(e){void 0===e?this.mults={}:delete this.mults[e]},L.sub=function(e,t,n,r){return e.sub(t,n,r)},L.unsub=function(e,t,n){e.unsub(t,n)},L.unsubAll=function(e,t){e.unsubAll(t)},e.exports={mapFrom:i,mapInto:a,filterFrom:s,filterInto:u,removeFrom:o,removeInto:c,mapcatFrom:l,mapcatInto:d,pipe:h,split:p,reduce:v,onto:m,fromColl:y,map:_,merge:g,into:b,take:k,unique:x,partition:T,partitionBy:E,mult:A,mix:M,pub:L}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,r,i){if(0>=e)throw new Error("n must be positive");for(var a=c.chan(e),s=c.chan(e),u=0;e>u;u++)c.go(o["default"].mark(function f(e,t,n){var r;return o["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=3,c.take(t);case 3:if(r=i.sent,e(r)){i.next=7;break}return n.close(),i.abrupt("break",9);case 7:i.next=0;break;case 9:case"end":return i.stop()}},f,this)}),[i,a,s]);return c.go(o["default"].mark(function l(e,t,n){var r,i;return o["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,c.take(t);case 3:if(r=a.sent,r!==c.CLOSED){a.next=9;break}return e.close(),a.abrupt("break",16);case 9:return i=c.chan(1),a.next=12,c.put(e,[r,i]);case 12:return a.next=14,c.put(n,i);case 14:a.next=0;break;case 16:case"end":return a.stop()}},l,this)}),[a,n,s]),c.go(o["default"].mark(function d(e,t,n){var r,i,a;return o["default"].wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,c.take(e);case 3:if(r=s.sent,r!==c.CLOSED){s.next=9;break}return t&&n.close(),s.abrupt("break",26);case 9:return s.next=11,c.take(r);case 11:i=s.sent;case 12:return s.next=15,c.take(i);case 15:if(a=s.sent,a===c.CLOSED){s.next=21;break}return s.next=19,c.put(n,a);case 19:s.next=22;break;case 21:return s.abrupt("break",24);case 22:s.next=12;break;case 24:s.next=0;break;case 26:case"end":return s.stop()}},d,this)}),[s,r,t]),t}function a(e,t,n,r,a){function s(e){if(e===c.CLOSED)return null;var n=e[0],r=e[1],i=c.chan(1,t,a);return c.go(o["default"].mark(function s(e,t){return o["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.put(e,t);case 2:e.close();case 3:case"end":return n.stop()}},s,this)}),[i,n]),c.putAsync(r,i),!0}return i(1,e,n,!r,s)}function s(e,t,n,r,a){function s(e){if(e===c.CLOSED)return null;var t=e[0],r=e[1],i=c.chan(1);return n(t,i),c.putAsync(r,i),!0}return i(e,t,r,!a,s)}var u=n(9),o=r(u),c=n(60);e.exports={pipeline:a,pipelineAsync:s}},function(e,t,n){"use strict";function r(e,t,n){var r=e._put(t,new v(!0,n));r&&n&&n(r.value)}function i(e,t){var n=e._take(new v(!0,t));n&&t(n.value)}function a(e){return new y(_,e)}function s(e,t){return new y(g,{channel:e,value:t})}function u(e){if(e.closed)return p;var t=e._take(new v(!1));return t?t.value:p}function o(e,t){if(e.closed)return!1;var n=e._put(t,new v(!1));return!!n}function c(e){return new y(b,e)}function f(e,t){return new y(k,{operations:e,options:t})}var l=n(62),d=n(94),h=n(34).Channel,p={},v=function(e,t){this.f=t,this.blockable=e};v.prototype.is_active=function(){return!0},v.prototype.is_blockable=function(){return this.blockable},v.prototype.commit=function(){return this.f};var m=function(e,t,n){this.gen=e,this.creatorFunc=n,this.finished=!1,this.onFinish=t},y=function(e,t){this.op=e,this.data=t},_="take",g="put",b="sleep",k="alts";m.prototype._continue=function(e){var t=this;l.run(function(){t.run(e)})},m.prototype._done=function(e){if(!this.finished){this.finished=!0;var t=this.onFinish;"function"==typeof t&&l.run(function(){t(e)})}},m.prototype.run=function(e){if(!this.finished){var t=this.gen.next(e);if(t.done)return void this._done(t.value);var n=t.value,a=this;if(n instanceof y)switch(n.op){case g:var s=n.data;r(s.channel,s.value,function(e){a._continue(e)});break;case _:var u=n.data;i(u,function(e){a._continue(e)});break;case b:var o=n.data;l.queue_delay(function(){a.run(null)},o);break;case k:d.do_alts(n.data.operations,function(e){a._continue(e)},n.data.options)}else if(n instanceof h){var u=n;i(u,function(e){a._continue(e)})}else this._continue(n)}},t.put_then_callback=r,t.take_then_callback=i,t.put=s,t.take=a,t.offer=o,t.poll=u,t.sleep=c,t.alts=f,t.Instruction=y,t.Process=m,t.NO_VALUE=p},function(e,t,n){"use strict";var r=n(62),i=n(34);t.timeout=function(e){var t=i.chan();return r.queue_delay(function(){t.close()},e),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QualityArbiter=void 0;var i=n(5),a=r(i),s=n(7),u=r(s),o=n(64),c=n(3),f=(n(4),n(1)),l=t.QualityArbiter=void 0;!function(e){e[e.MANUAL=0]="MANUAL",e[e.ADAPTIVE=1]="ADAPTIVE"}(l||(t.QualityArbiter=l={}));var d=4,h=30,p=2,v=15,m=45,y=1e4,_=3e3,g=2,b=1.5,k=1.5,x=.001,E=function(){function e(){(0,a["default"])(this,e),this.adaptiveQualityLevel=-1,this.manualQualityLevel=-1,this.lastAdaptiveSwitchTime_=0,this.streamType="LIVE",this.safetyFactor=g,this.streamInitialQuality=0,f.extend(this,c)}return(0,u["default"])(e,[{key:"whatToDownload",value:function(e,t){var n=this;return this.getState_(e,t).then(function(e){return e?"LIVE"===n.streamType?n.liveAdaptive_(e):n.whatToDownload_(e):null}).then(function(e){return{segment:e,opts:{reason:"none"}}}.bind(this))}},{key:"setQuality",value:function(e,t){this.lastAdaptiveSwitchTime_=f.now()-(y-_),this.lastTimeWithEnoughBuffer=f.now();var n=e-1;0===e&&t.length>1?(this.adaptiveQualityLevel=this.manualQualityLevel,this.desiredQualityArbiter=l.ADAPTIVE,this.trigger("quality-change",this.adaptiveQualityLevel)):(this.desiredQualityArbiter=l.MANUAL,this.manualQualityLevel=n,this.trigger("quality-change",n))}},{key:"updateLevels",value:function(e){this.manualQualityLevel=e,this.adaptiveQualityLevel=e}},{key:"getQuality",value:function(){return this.desiredQualityArbiter===l.ADAPTIVE?this.adaptiveQualityLevel:this.manualQualityLevel}},{key:"changeAdaptiveQuality_",value:function(e,t,n){return this.allowQualitySwitching_(e,t,this.adaptiveQualityLevel,n)?(this.lastAdaptiveSwitchTime_=e.now,e.action.push("Quality switch from "+this.adaptiveQualityLevel+" to "+n),this.adaptiveQualityLevel=n,this.trigger("quality-change",n),!0):!1}},{key:"allowQualitySwitching_",value:function(e,t,n,r){if("VOD"===this.streamType)return e.videoEnd-t>h;e.manifestRepresentation.requestTS(t,t,n),e.manifestRepresentation.requestTS(t,t,r);var i=e.sortedLevels[n],a=e.sortedLevels[r];if(!(i&&a&&i.segments.length&&a.segments.length))return!1;var s=o.Level.getRanges(i.segments,t,t)[0];return a.containsSegment(s)}},{key:"adaptationEnabled",value:function(){return this.desiredQualityArbiter===l.ADAPTIVE}},{key:"timeToDownload_",value:function(e,t){var n=t.segmentFileSize.average()/1e3,r=t.streamInfo.bandwidth/8/1e3*t.streamInfo.targetDuration;n=n?Math.max(n,r):1.5*r;var i=x*n;return n/e.bandwidth+i}},{key:"minForwardBuffer_",value:function(e,t,n){var r=this.timeToDownload_(e,t);return Math.min(n,Math.max(v,r,t.streamInfo.targetDuration))}},{key:"earliestSegmentToLoad",value:function(e){var t=this;return e.manifestRepresentation.requestTS(e.currentTime,e.maxBufferEnd,this.getQuality()).then(function(n){var r=f.last(n);if(n.length)for(var i=e.runway-e.minForwardBuffer,a=t.timeToDownload_(e,e.sortedLevels[t.getQuality()]),s=0,u=n.length-1;u>=1;u--){if(s+=2*a,s>i)return r;r=n[u]}return r})}},{key:"maxForwardBuffer_",value:function(e,t){var n=this.timeToDownload_(e,t);return Math.min(m,Math.max(v,n*p,t.streamInfo.targetDuration*p))}},{key:"getState_",value:function(e,t){return e.manifestRepresentation.doneLoading().then(function(n){if(!e.mediaDataModel)return null;var r=e.video.currentTime,i=n.end;if(t){this.streamType=e.manifestRepresentation.streamType;var a=n.levels[0];this.streamInitialQuality=f.indexOf(n.sortedLevels,a),-1===this.manualQualityLevel&&(this.adaptiveQualityLevel=this.streamInitialQuality,this.manualQualityLevel=this.streamInitialQuality)}"VOD"!==n.streamType&&0===r&&(r=e.getLiveStartTime(n));var s=n.sortedLevels[this.getQuality()],u=e.network.status(),o=Math.max(1,u.bandwidth),c=u.latency,l=s.streamInfo.targetDuration,p=r+e.maxForwardBuffer(),v=Math.max(p-r-c,0),m=d,y=h;if("VOD"!==this.streamType){m=Math.min(m,l);var _=s.segments.length?f.last(s.segments).end:i;y=Math.min(y,_-r-s.streamInfo.targetDuration)}var g=r+y+l,b=this.minForwardBuffer_(u,s,y),k=this.maxForwardBuffer_(u,s),x=r+k,E=e.mediaDataModel.currentTransmuxSession;if(E&&E.forwardBufferCleared===!1){var T=f.last(E.tmsArray);T&&(p=T.ts.end)}return t&&(v=0,p=r,b=1,u.requestsOutstanding=0),{requestsOutstanding:u.requestsOutstanding,bandwidth:o,runway:v,currentTime:r,videoEnd:i,currentBufferEnd:p,targetDuration:l,minForwardBuffer:b,maxBufferEnd:x,upswitchBufferTime:g,minBufferForDownswitch:m,minBufferForUpswitch:y,action:[],now:f.now(),manifestRepresentation:e.manifestRepresentation,sortedLevels:n.sortedLevels,mdm:e.mediaDataModel}}.bind(this))}},{key:"liveAdaptive_",value:function(e){if(this.desiredQualityArbiter===l.MANUAL)return this.firstSegmentToBuffer_(e,e.currentBufferEnd,e.maxBufferEnd);if(e.now-this.lastTimeWithEnoughBuffer>5e3&&e.now-this.lastAdaptiveSwitchTime_>y&&this.adaptiveQualityLevel>0&&(this.changeAdaptiveQuality_(e,e.currentBufferEnd,0),this.safetyFactor*=b),e.runway<e.minBufferForDownswitch)return this.firstSegmentToBuffer_(e,e.currentTime,e.currentTime+e.minBufferForDownswitch+e.targetDuration);if(this.lastTimeWithEnoughBuffer=e.now,!(e.requestsOutstanding>1)){var t=this.targetUpswitchLevel_(e);return e.now-this.lastAdaptiveSwitchTime_>y&&t>this.adaptiveQualityLevel&&this.changeAdaptiveQuality_(e,e.currentBufferEnd,t),this.firstSegmentToBuffer_(e,e.currentBufferEnd,e.videoEnd)}}},{key:"whatToDownload_",value:function(e){if(this.desiredQualityArbiter===l.MANUAL)return this.firstSegmentToBuffer_(e,e.currentBufferEnd,e.maxBufferEnd);if(e.now-this.lastTimeWithEnoughBuffer>5e3&&e.now-this.lastAdaptiveSwitchTime_>y&&0!==this.adaptiveQualityLevel&&this.changeAdaptiveQuality_(e,e.currentBufferEnd,0),e.runway<e.minBufferForDownswitch)return this.firstSegmentToBuffer_(e,e.currentBufferEnd,e.currentTime+e.minBufferForDownswitch+e.targetDuration);if(this.lastTimeWithEnoughBuffer=e.now,!(e.requestsOutstanding>1)){var t=this.targetUpswitchLevel_(e);return e.runway<e.minBufferForUpswitch||e.now-this.lastAdaptiveSwitchTime_<y?this.firstSegmentToBuffer_(e,e.currentBufferEnd,e.upswitchBufferTime):t>this.adaptiveQualityLevel&&this.changeAdaptiveQuality_(e,e.currentBufferEnd,t)?this.earliestSegmentToLoad(e):void 0}}},{key:"firstSegmentToBuffer_",value:function(e,t,n){var r=.01;return e.manifestRepresentation.requestTS(t+r,n,this.getQuality()).then(function(t){if(0!==t.length&&t[0])for(var n=0;n<t.length;n++){var r=t[n];if(!r.errorInSegment&&!e.mdm.getTransmuxSegment(r))return r}})}},{key:"targetUpswitchLevel_",value:function(e){for(var t=8*e.bandwidth,n=e.sortedLevels.length-1;n>0;n--){var r=e.sortedLevels[n],i=this.timeToDownload_(e,r)*this.safetyFactor,a=r.streamInfo.bandwidth/1e3,s=a*k;if(t>s&&e.runway-i>e.minForwardBuffer)return n}return 0}}]),e}();t["default"]=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Caterpillar=void 0;var i=n(15),a=r(i),s=n(5),u=r(s),o=n(7),c=r(o),f=n(155),l=n(65),d=n(63),h=(n(150),n(3)),p=n(4),v=n(1);n(8),t.Caterpillar=function(){function e(t){(0,u["default"])(this,e),v.extend(this,h),this.edition=t}return(0,c["default"])(e,[{key:"setup",value:function(e,t){this.mediaSource=t,this.videoTag=e,this.network=new l.Network,this.manifestRepresentation=new d.Manifest(this.network,this.videoTag),this.streamingEngine=new f.StreamingEngine(this.manifestRepresentation,this.network,this.videoTag,this.mediaSource,this.edition)}},{key:"destroy",value:function(){this.videoTag&&this.videoTag.pause(),this.streamingEngine&&this.streamingEngine.destroy(),this.manifestRepresentation&&this.manifestRepresentation.destroy(),this.network&&this.network.destroy(),this.streamingEngine=void 0,this.manifestRepresentation=void 0,this.mediaSource=void 0,this.videoTag=void 0}},{key:"play",value:function(){this.videoTag&&(this.videoTag.play(),this.streamingEngine.resumeOnTick())}},{key:"pause",value:function(){this.videoTag&&(this.videoTag.pause(),this.manifestRepresentation.suspendManifestReloading(),this.streamingEngine.suspendOnTick())}},{key:"getDuration",value:function(){if(!this.manifestRepresentation)return 0;var e=this.manifestRepresentation.currentManifestMetadata;return e?"VOD"===e.streamType?e.end:"DVR"===e.streamType?e.start-e.end:1/0:0}},{key:"getExternalTime",value:function(e){if(!this.manifestRepresentation)return 0;var t=this.manifestRepresentation.currentManifestMetadata;return t?("DVR"===t.streamType&&(e-=t.end),e):0}},{key:"getCurrentTime",value:function(){return this.getExternalTime(this.videoTag.currentTime)}},{key:"getPtsOffset",value:function(){return this.streamingEngine.mediaDataModel.getPtsOffset()}},{key:"getConfiguration",value:function(){return this.manifestRepresentation?this.manifestRepresentation.doneLoading().then(function(e){var t=this.streamingEngine.mediaDataModel.getSegmentAtTime(this.videoTag.currentTime),n=this.streamingEngine.adaptive.getQuality();if(t){var r=this.manifestRepresentation.levels_[t.level];n=e.sortedLevels.indexOf(r)}var i=!1;return e.sortedLevels.length>1&&(n++,i=this.streamingEngine.adaptive.adaptationEnabled()),{currentLevel:n,levels:this.parseLevels_(e.sortedLevels),enableAdaptation:i}}.bind(this)):a["default"].resolve(null)}},{key:"getAudioCodec",value:function(){return this.streamingEngine.audioCodec}},{key:"parseLevels_",value:function(e){var t=v.map(e,function(e){var t=e.streamInfo.bandwidth||0;return e.streamInfo.resolution&&e.streamInfo.resolution.height?{label:e.streamInfo.label,bitrate:t,height:e.streamInfo.resolution.height,width:e.streamInfo.resolution.width}:{label:e.streamInfo.label,bitrate:t,height:1,width:1}});return t.length>1&&t.unshift({label:"Auto",bitrate:1,height:1,width:1}),t}},{key:"setCurrentQuality",value:function(e){this.streamingEngine.setCurrentQuality(e)}},{key:"initStream",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?"Auto":arguments[1];this.streamingEngine.on(p.JWPLAYER_MEDIA_META,function(e){this.trigger(p.JWPLAYER_MEDIA_META,e)},this),this.streamingEngine.on(p.JWPLAYER_MEDIA_BUFFER_FULL,function(e){this.trigger(p.JWPLAYER_MEDIA_BUFFER_FULL,e)},this),this.streamingEngine.on(p.JWPLAYER_MEDIA_LEVELS,function(e){var t=this.parseLevels_(e.levels);this.trigger(p.JWPLAYER_MEDIA_LEVELS,{levels:t,currentQuality:e.currentQuality})},this),this.streamingEngine.on("state",function(e){this.trigger("state",e)},this),this.streamingEngine.on("trackTypes",function(e){this.trigger("trackTypes",e)},this),this.streamingEngine.on("captionCueAdded",function(){this.trigger("captionCueAdded")},this),this.streamingEngine.on("metadataCueAdded",function(){this.trigger("metadataCueAdded")},this),this.streamingEngine.on("error",function(e){this.trigger("error",e)},this),this.streamingEngine.setManifest(e,n).then(function(e){var r=void 0;"Auto"===n?r=0:(r=v.indexOf(e.sortedLevels,t.manifestRepresentation.initialLevel),r+=1),t.setCurrentQuality(r);var i=t.parseLevels_(e.sortedLevels);t.trigger(p.JWPLAYER_MEDIA_LEVELS,{levels:i,currentQuality:r}),t.trigger("trackTypes",e.trackTypes)}).then(function(){return t.streamingEngine.beginPlayback()})["catch"](function(e){return t.trigger("error",e)})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HLSMetadataLogger=void 0;var i=n(5),a=r(i),s=n(7),u=r(s),o=n(1),c=n(3),f=n(4);t.HLSMetadataLogger=function(){function e(t,n,r,i,s){(0,a["default"])(this,e),this.isAudioOnly=!1,this.video=t,this.streamingEngine=n,this.mdm=r,this.adaptive=i,this.manifest=s,o.extend(this,c)}return(0,u["default"])(e,[{key:"sendStartupMetadata",value:function(e){this.trigger(f.JWPLAYER_MEDIA_META,this.formatStreamMetadata(e)),this.mdm.getTrackTypes().then(function(e){this.isAudioOnly=1===e.length&&"audio"===e[0].type}.bind(this))}},{key:"sendDeltaMetadata",value:function(e){this.trigger(f.JWPLAYER_MEDIA_META,this.formatDeltaMetadata(e))}},{key:"sendSegmentCompletedMetadata",value:function(e,t){this.manifest.doneLoading().then(function(n){this.trigger(f.JWPLAYER_MEDIA_META,this.formatSegmentCompleteMetadata(n,e,t))}.bind(this))}},{key:"sendBufferChangeMetadata",value:function(){this.manifest.doneLoading().then(function(e){var t=this.formatBufferChangeData(e);this.trigger("hls-metadata-bufferchange",t)}.bind(this))}},{key:"formatStreamMetadata",value:function(e){var t=this,n=this.adaptive.getQuality();return{type:"meta",metadata:{levelIndex:n,levels:o.map(e.sortedLevels,function(e){return t.formatLevelData(e)})}}}},{key:"formatDeltaMetadata",value:function(e){var t=this,n=this.adaptive.getQuality();return{type:"meta",metadata:{levelIndex:n,audioTrackIndex:-1,subtitlesTrackIndex:-1,subtitlesTracks:[],audioTracks:[],adaptiveType:e.streamType,duration:e.end-e.start,levels:o.map(e.sortedLevels,function(e){return t.formatLevelData(e)})}}}},{key:"getBandwidthMetrics",value:function(e,t){var n=this.streamingEngine.network,r=n.status();if(!t){var i=this.adaptive.getQuality();t=e.sortedLevels[i]}return{bandwidth:1e3*r.bandwidth,latencyRate:r.latency*r.bandwidth*1e3,initialLevelBitrate:t.streamInfo.bandwidth,currentLevelBitrate:0,estimatedRate:0,priorRate:0,currentRate:0,currentMaxRate:1e3*n.averageDownlink_.max(),averageRate:1e3*r.bandwidth,modifiedAverageRate:0,instantRate:0,medianInstantRate:0,averageInstantRate:0,smoothInstantRate:0}}},{key:"formatSegmentCompleteMetadata",value:function(e,t,n){var r=this,i=this.adaptive.getQuality(),a=this.streamingEngine.network.status(),s=n.segments.indexOf(t);return{type:"meta",metadata:{streamType:e.streamType,bandwidthMetrics:this.getBandwidthMetrics(e,n),droppedFrames:0,bandwidth:1e3*a.bandwidth,height:n.streamInfo.resolution.height,width:n.streamInfo.resolution.width,duration:e.end-e.start,currentLevel:n.streamInfo.label,levelIndex:i,segment:this.formatSegmentData(t,n,s),levels:o.map(e.sortedLevels,function(e){return r.formatLevelData(e)})}}}},{key:"formatLevelData",value:function(e){var t=this,n=e.streamInfo.trackTypes,r=n&&1===n.length&&"audio"===n[0].type,i=o.map(e.segments,function(n,r){return t.formatSegmentData(n,e,r)});return{responseTime:1e3,bitrate:e.streamInfo.bandwidth,index:e.streamInfo.originalIndex,mediaSequence:e.mediaSequence,audioOnly:r,audioGroup:"audio",requestTime:100,segments:i,width:e.streamInfo.resolution.width,height:e.streamInfo.resolution.height,start:e.streamInfo.start,endTime:e.streamInfo.end,duration:e.streamInfo.end-e.streamInfo.start,subtitlesGroup:"subtitles",m3u8:"#EXTM3U\n#EXT-X-ENDLIST\n",label:e.streamInfo.label}}},{key:"formatSegmentData",value:function(e,t,n){var r=e.size,i=this.streamingEngine.network,a=i.status();return{mediaSequenceNumber:e.mediaSequenceId,start:e.start,duration:e.duration,index:n,httpStatus:0,size:r,bitrate:r/e.duration,bandwidth:1e3*a.bandwidth,loadTime:r/(1e3*a.bandwidth),dtsOffset:e.pts/9e4-e.start,error:null,discontinuity:e.discontinuity,type:e.url.substring(e.url.lastIndexOf(".")+1).toUpperCase()}}},{key:"formatBufferChangeData",value:function(t){function n(e){if(e.length){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}return[{start:0,end:0}]}var r=0,i=this.video.currentTime;"LIVE"!==t.streamType&&t?(r=t.end-t.start,"DVR"===t.streamType&&(r=-r,i-=t.end)):r=1/0;var a=void 0;this.streamingEngine.msee&&(a=this.streamingEngine.msee.sourceBuffers_);var s=e.getMinMaxInTimeRanges(this.video.buffered),u={type:"hls-metadata-bufferchange",bufferPercent:(s.end-t.start)/(t.end-t.start)*100,position:i,duration:r,metadata:{bandwidthMetrics:this.getBandwidthMetrics(t),nsBufferLength:0,droppedFrames:0,bufferLength:Math.max(0,s.end-this.video.currentTime),bandwidth:12e7,backBufferLength:Math.max(0,this.video.currentTime-s.start)}};return a&&a.video&&(u.metadata=o.extend(u.metadata,{videoBufferRange:n(a.video.buffered)})),a&&a.audio&&(u.metadata=o.extend(u.metadata,{audioBufferRange:n(a.audio.buffered)})),u}}],[{key:"getMinMaxInTimeRanges",value:function(e){var t={start:0,end:0};if(!e.length)return t;t.start=e.start(0),t.end=e.end(0);for(var n=1;n<e.length;n++)t.start=Math.min(t.start,e.start(n)),t.end=Math.max(t.end,e.end(n));return t}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LiveManifestLoader=t.RefreshRequest=void 0;var i,a=n(7),s=r(a),u=n(5),o=r(u),c=n(66),f=r(c),l=400,d=500,h=2,p=n(1);!function(e){e[e.IDLE=0]="IDLE",e[e.PENDING=1]="PENDING",e[e.COMPLETE=2]="COMPLETE"}(i||(i={}));var v=t.RefreshRequest=function m(){(0,o["default"])(this,m),this.status=i.IDLE};t.LiveManifestLoader=function(){function e(t,n,r){(0,o["default"])(this,e),this.refreshRequests=[],this.manifest=t,this.network=n,this.video=r}return(0,s["default"])(e,[{key:"pollManifest",value:function(e){return this.refreshRequests[e]||(this.refreshRequests[e]=new v),this.reload_(e),this.refreshRequests[e].cycles=h,this.refreshRequests[e].promise}},{key:"reload_",value:function(e){var t=this.refreshRequests[e];t&&t.status!==i.PENDING&&(t.promise=this.manifest.refreshManifest(e),t.status=i.PENDING,t.promise.then(this.checkManifestRefresh_.bind(this,e)))}},{key:"checkManifestRefresh_",value:function(e){var t=this,n=this.refreshRequests[e];this.manifest&&n&&(n.cycles>0?this.getManifestLoadRunway_(e,this.video.currentTime).then(f["default"].wait).then(function(){t.manifest&&n.cycles>0&&(n.cycles--,n.status=i.COMPLETE,t.reload_(e))}):n.status=i.IDLE)}},{key:"getManifestLoadRunway_",value:function(e,t){var n=this;return this.manifest.doneLoading().then(function(){var r=3*n.network.averageLatency_.max(),i=n.manifest.levels_[e],a=i.segments[i.segments.length-1],s=1e3*(a.end-t),u=1e3*n.manifest.levels_[e].streamInfo.targetDuration;if(u=Math.min(u,1e3*a.duration),u+l>s)return Math.max((s-r)/2,l);if(1===n.manifest.refreshesWithoutChanges)u/=2;else if(n.manifest.refreshesWithoutChanges>5)return d;return Math.max(u,l)})}},{key:"cancelReloading",value:function(){p.each(this.refreshRequests,function(e){e.cycles=0})}},{key:"destroy",value:function(){this.cancelReloading(),this.video=null,this.refreshRequests=[],this.network=null,this.manifest=void 0}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestLoader=void 0;var i=n(9),a=r(i),s=n(15),u=r(s),o=n(5),c=r(o),f=n(7),l=r(f),d=n(65),h=n(3),p=n(1),v=n(8);t.ManifestLoader=function(){function e(t){(0,c["default"])(this,e),this.totalManifest="",this.leftoverContent="",this.network=t,p.extend(this,h)}return(0,l["default"])(e,[{key:"load",value:function(e){var t={requester:"manifest",requestType:d.RequestType.Text,uris:[e],retryParameters:{maxAttempts:2}},n=this.network.request(t),r=this;return n.then(function(e){var t=e.chan;return new u["default"](function(e){v.go(a["default"].mark(function n(){var i;return a["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,v.take(t);case 3:if(i=n.sent,i!==v.CLOSED){n.next=10;break}return r.parseManifestChunk("",!0),e(),n.abrupt("break",13);case 10:r.parseManifestChunk(i,!1);case 11:n.next=0;break;case 13:case"end":return n.stop()}},n,this)}))})})}},{key:"parseManifestChunk",value:function(e,t){var n=this.leftoverContent+e;if(this.totalManifest+=e,n=n.replace(/\r\n/g,"\n").replace(/\r/g,""),t&&n||n.indexOf("#EXT-X-ENDLIST")>=n.length-16)this.leftoverContent="",this.trigger("manifestChunk",n);else{var r=n.lastIndexOf("\n");this.leftoverContent=n.substring(r+1),this.trigger("manifestChunk",n.substring(0,r))}}},{key:"getRawManifestData",value:function(){return this.totalManifest}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestParser=void 0;var i=n(5),a=r(i),s=n(7),u=r(s),o=n(64),c=n(63),f=n(3),l=n(2),d=n(1),h=t.ManifestParser=function(){function e(t,n){(0,a["default"])(this,e),this.EXTM3U={exp:/^#EXTM3U\s*$/,action:this.assignPlaylist.bind(this)},this.EXT_X_TARGETDURATION={exp:/^#EXT-X-TARGETDURATION:\s*(\d+(?:\.\d+)?)\s*$/,action:this.assignFloatStreamInfo.bind(this),prop:"targetDuration",checkType:this.setMediaPlaylist.bind(this)},this.EXT_X_MEDIA_SEQUENCE={exp:/^#EXT-X-MEDIA-SEQUENCE:\s*(\d+)\s*$/,action:this.assignMediaSequence.bind(this),checkType:this.setMediaPlaylist.bind(this)},this.EXT_X_VERSION={exp:/^#EXT-X-VERSION:\s*(\d+)\s*$/,action:this.assignInt.bind(this),prop:"version"},this.EXT_X_ALLOW_CACHE={exp:/^#EXT-X-ALLOW-CACHE:.*$/},this.EXT_X_KEY={exp:/^#EXT-X-KEY:METHOD=(.*),URI="?(.*)(?=")("?,IV=)?(.*)/,action:this.assignAesKey.bind(this)},this.EXT_X_STREAM_INF={exp:/^#EXT-X-STREAM-INF:(.*)$/,action:this.assignMediaPlaylist.bind(this),checkType:this.setMasterPlaylist.bind(this)},this.EXT_X_I_FRAME_STREAM_INF={exp:/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/,action:this.assignIFrameMediaPlaylist.bind(this)},this.EXT_X_I_FRAMES_ONLY={exp:/^#EXT-X-I-FRAMES-ONLY\s*$/,action:this.setIFrameOnly.bind(this)},this.EXT_X_BYTERANGE={exp:/^#EXT-X-BYTERANGE:\s*(\d+(?:\.\d+)?)(?:@(\d+(?:\.\d+)?))?$/,action:this.setByteRange.bind(this)},this.EXTINF={exp:/^#EXTINF:\s*(-?\d+(?:\.\d+)?)(?:,(.*))?$/,action:this.createSegment.bind(this),checkType:this.setMediaPlaylist.bind(this)},this.EXT_X_MEDIA={exp:/^#EXT-X-MEDIA:(.*)$/,action:this.parseMedia.bind(this),checkType:this.setMasterPlaylist.bind(this)},this.EXT_X_DISCONTINUITY_SEQUENCE={exp:/^#EXT-X-DISCONTINUITY-SEQUENCE:\s*(\d+)\s*$/,action:this.setDiscontinuitySequence.bind(this),checkType:this.setMediaPlaylist.bind(this)},this.EXT_X_DISCONTINUITY={exp:/^#EXT-X-DISCONTINUITY\s*$/,action:this.incrementDiscontinuity.bind(this),checkType:this.setMediaPlaylist.bind(this)},this.EXT_X_ENDLIST={exp:/^#EXT-X-ENDLIST\s*$/,action:this.setEndlist.bind(this)},this.EXT_X_PLAYLIST_TYPE={exp:/^#EXT-X-PLAYLIST-TYPE:\s*(EVENT|VOD)\s*$/},this.EXT_X_INDEPENDENT_SEGMENTS={exp:/^#EXT-X-INDEPENDENT-SEGMENTS\s*$/},this.EXT_X_PROGRAM_DATE_TIME={exp:/^#EXT-X-PROGRAM-DATE-TIME:\s*([\d\-T:\.\+A-Z]+)\s*$/},this.DECIMAL_FLOATING_POINT={exp:/^(?:\+|-)?\d+(?:\.\d+)?$/},this.COMMENT={exp:/^#[^EXT](.*)$/},this.WHITESPACE={exp:/^\s*$/},this.URI={exp:/^([^#].+)$/,action:this.assignURL.bind(this)},this.props=[this.EXTM3U,this.EXT_X_VERSION,this.EXT_X_ALLOW_CACHE,this.EXTINF,this.EXT_X_BYTERANGE,this.EXT_X_DISCONTINUITY,this.EXT_X_KEY,this.EXT_X_PROGRAM_DATE_TIME,this.EXT_X_TARGETDURATION,this.EXT_X_MEDIA_SEQUENCE,this.EXT_X_DISCONTINUITY_SEQUENCE,this.EXT_X_ENDLIST,this.EXT_X_PLAYLIST_TYPE,this.EXT_X_I_FRAMES_ONLY,this.EXT_X_MEDIA,this.EXT_X_STREAM_INF,this.EXT_X_I_FRAME_STREAM_INF,this.EXT_X_INDEPENDENT_SEGMENTS,this.DECIMAL_FLOATING_POINT,this.URI,this.WHITESPACE,this.COMMENT],this.playlistObject={},this.manifestData="",this.baseURL="",this.discontinuityCount=0,d.extend(this,f),this.baseURL=t.substring(0,t.lastIndexOf("/")+1),this.streamInfo=n||new o.StreamInfo}return(0,u["default"])(e,[{key:"assignPlaylist",value:function(t){d.extend(t,e.makePlaylistProperties())}},{key:"assignYesNo",value:function(e,t,n){var r="YES"===n[1];e[t]=r}},{key:"assignFloatStreamInfo",value:function(e,t,n){e.streamInfo[t]=parseFloat(n[1])}},{key:"assignInt",value:function(e,t,n){e[t]=parseInt(n[1])}},{key:"assignURL",value:function(t,n,r){var i=r[0];if("media"===t.type){if(t.mediaElements.length>0){var a=t.mediaElements.length-1,s=t.mediaElements[a];if(s.url=e.getURI(i,this.baseURL),t.byteRangeLength){s.byteRange.length=t.byteRangeLength;var u=t.byteRangeStart;if(!u&&a>0){var o=t.mediaElements[a-1],c=o.byteRange.length,f=o.byteRange.byteRangeStart;u=f+c||0}s.byteRange.start=u}"AES-128"===t.key&&(s.aesKeyUri=l.getAbsolutePath(t.keyUri,this.baseURL),s.aesIV=this._getSegmentIV(t.aesIV,s.mediaSequenceId)),this.trigger("tsSegmentFound",s)}}else if("master"===t.type&&t.streamInfos.length>0){var d=t.streamInfos[t.streamInfos.length-1];d.url||(d.url=e.getURI(i,this.baseURL),this.trigger("mediaPlaylistFound",d))}}},{key:"assignMediaSequence",value:function(e,t,n){e.mediaSequence=e.currentMediaSequenceId=parseInt(n[1])}},{key:"assignMediaPlaylist",value:function(t,n,r){var i=r[1];t.streamInfos.push(e.makeStreamInfo(i))}},{key:"assignIFrameMediaPlaylist",value:function(t,n,r){var i=r[1];t.iframeStreamInfos.push(e.makeStreamInfo(i))}},{key:"setIFrameOnly",value:function(e,t,n){e.iframeOnly=!0}},{key:"assignAesKey",value:function(e,t,n){e.key=n[1],e.keyUri=n[2],e.aesIV=n[3]?n[4]:null}},{key:"setMediaPlaylist",value:function(t){return t.type||(d.extend(t,e.makeMediaPlaylistProperties()),t.streamInfo=this.streamInfo),"media"===t.type}},{key:"setMasterPlaylist",value:function(t){return t.type||d.extend(t,e.makeMasterPlaylistProperties()),"master"===t.type}},{key:"createIVArrayBuffer_",value:function(e){var t="00000000000000000000000000000000";return e=t.substr(e.length)+e,this.hexStringToArrayBuffer_(e)}},{key:"hexStringToArrayBuffer_",value:function(e){var t=void 0,n=new Uint8Array(16);for(t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substr(t,2),16);return n.buffer}},{key:"_getSegmentIV",value:function(e,t){if(e){var n=e.substring(0,2);return"0x"===n||"0X"===n?this.createIVArrayBuffer_(e.substring(2)):this.createIVArrayBuffer_(e)}return this.createIVArrayBuffer_(t.toString(16))}},{key:"parseMedia",value:function(t,n,r){var i=e.parseKeyValuesPairs(r[1]),a=new c.MediaData(i);if(a.type&&a.groupId){var s=a.type.toLowerCase(),u=a.groupId,o=t.renditions[s],f=void 0;t.renditions[s]=o?o:{},f=t.renditions[s][u],t.renditions[s][u]=f?f:[],t.renditions[s][u].push(a)}}},{key:"setByteRange",value:function(e,t,n){e.byteRangeLength=parseInt(n[1],10),e.byteRangeStart=parseInt(n[2],10)}},{key:"createSegment",value:function(e,t,n){var r=new o.Segment,i=parseFloat(n[1]),a=n[2];if(r.title=a?a:r.title,r.originalData.start=r.start=this.streamInfo.end,r.originalData.end=r.end=this.streamInfo.end+i,r.originalData.duration=r.duration=i||this.streamInfo.targetDuration,r.discontinuity=this.discontinuityCount,!(e.mediaSequence>=0))throw"expected a media sequence value before a segment, but did not find one.";r.mediaSequenceId=e.currentMediaSequenceId,e.currentMediaSequenceId++,r.title&&!/^(?:\{\}|no desc)$/.test(r.title.trim())&&(r.extInfTitle=r.title),e.streamInfo.end+=r.duration,e.mediaElements.push(r)}},{key:"setDiscontinuitySequence",value:function(e,t,n){this.discontinuityCount=e.discontinuitySequence=parseFloat(n[1])}},{key:"incrementDiscontinuity",value:function(e){e.containsDiscontinuities=!0,this.discontinuityCount++}},{key:"setEndlist",value:function(e){"master"!==e.type&&(e.mediaElements[e.mediaElements.length-1].isLast=!0,
this.streamInfo.hasEndlist=!0)}},{key:"parse",value:function(e){var t=this,n=e.split("\n");this.manifestData+=e,n.forEach(function(e){var n=void 0,r=!1;t.props.forEach(function(i){n=i.exp.exec(e),n&&(i.checkType&&!i.checkType(t.playlistObject)||(i.action&&i.action(t.playlistObject,i.prop,n),r=!0))})})}},{key:"getPlaylist",value:function(){return this.playlistObject}}],[{key:"makePlaylistProperties",value:function(){return{version:1,independentSegments:!1,start:{timeOffset:0,precise:!1}}}},{key:"makeMasterPlaylistProperties",value:function(){return{type:"master",media:[],streamInfos:[],iframeStreamInfos:[],renditions:{}}}},{key:"makeMediaPlaylistProperties",value:function(){return{type:"media",streamInfo:null,mediaSequence:0,currentMediaSequenceId:0,playlistType:null,discontinuitySequence:null,containsDiscontinuities:!1,iFramesOnly:!1,mediaElements:[]}}},{key:"makeStreamInfo",value:function(t){var n=e.parseKeyValuesPairs(t),r=new o.StreamInfo;if(r.url=n.url||n.uri,r.bandwidth=parseFloat(n.bandwidth),n.codecs&&(r.codecs=n.codecs.split(/[, ] */g)),n.resolution){var i=n.resolution.split("x");r.resolution={width:parseInt(i[0]),height:parseInt(i[1])}}return r.trackTypes=e.getLevelTypes(r),r.video=n.video,r.audio=n.audio,r.programId=parseInt(n.programid),r.label=n.name||e.makeLabel(r),r}},{key:"makeLabel",value:function(e){return e.resolution&&e.resolution&&e.resolution.height?e.resolution.height+"p":Math.floor(e.bandwidth/1e3)+" kbps"}},{key:"parseKeyValuesPairs",value:function(t){for(var n={},r=void 0,i=void 0,a=void 0,s=t;;){if(r=e.KEY_VALUE.exec(s),null===r)break;i=r[1].replace("-","").toLowerCase(),a="",a=0===r[2].indexOf('"')&&r[2].lastIndexOf('"')===r[2].length-1?r[2].slice(1,r[2].length-1):r[2],n[i]=a,s=r[3]}return n}},{key:"getLevelTypes",value:function(e){var t=e.resolution.width*e.resolution.height,n=e.codecs,r=!1,i=d.compact(d.map(n,function(e){return e.indexOf("avc1")>=0?(r=!0,{type:"video",codec:"default"}):e.indexOf("mp4a.40.34")>=0?{type:"audio",codec:"mp3"}:e.indexOf("mp4a")>=0?{type:"audio",codec:"aac"}:void 0}));return t&&!r&&i.push({type:"video",codec:"default"}),i}},{key:"getURI",value:function(t,n){if(e.ABSOLUTE_URI.exec(t))return t;if(e.RELATIVE_URI_ABSOLUTE_PATH.exec(t)){var r=new URL(n);return r.protocol+"//"+r.host+t}return e.RELATIVE_URI_RELATIVE_PATH.exec(t)?n+t:t}}]),e}();h.KEY_VALUE=/^(?:,|, | )?([A-Z\-]+)=((?:"[^"]*")|(?:[^,]*))(.*)$/,h.ABSOLUTE_URI=/^(https?:\/\/.*)$/,h.RELATIVE_URI_ABSOLUTE_PATH=/^(\/.*)$/,h.RELATIVE_URI_RELATIVE_PATH=/^(.+)$/},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MDM=t.TransmuxSegment=t.TransmuxSession=void 0;var i=n(9),a=r(i),s=n(102),u=r(s),o=n(15),c=r(o),f=n(5),l=r(f),d=n(7),h=r(d),p=n(63),v=n(65),m=n(66),y=n(156),_=r(y),g=n(1),b=n(3),k=n(8),x=4,E=8,T=t.TransmuxSession=function(){function e(){(0,l["default"])(this,e),this.dataQueue_=[],this.isSendingData_=!1,this.forwardBufferCleared=!1,this.active=!0,this.firstDataBuffered={audio:!1,video:!1};var t=g.uniqueId("transmuxer-");this.tmsArray=[],this.transmuxer=new _["default"](t),this.mediaChannels={video:new k.chan(1e4),audio:new k.chan(1e4),metadata:new k.chan(1e4),captions:new k.chan(1e4)}}return(0,h["default"])(e,[{key:"getTransmuxSegment",value:function(e){return g.find(this.tmsArray,function(t){return e===t.ts})}},{key:"destroy",value:function(){var e=this;this.isSendingData_||(this.transmuxer.endOfInput(),this.transmuxer=null),g.each(this.dataQueue_,function(t){e.tmsArray=g.without(e.tmsArray,t.segment)}),this.active=!1,this.dataQueue_=null}},{key:"enqueueNetworkData",value:function(e){this.dataQueue_.push(e),this.runQueue_()}},{key:"runQueue_",value:function(){var e=this;if(!this.dataQueue_)return void this.destroy();if(!this.isSendingData_&&this.dataQueue_.length){this.isSendingData_=!0;var t=this.dataQueue_.shift();t.netRequestPromise.then(function(n){e.dataQueue_||e.destroy();var r=t.segment,i=p.Manifest.makeIndex(r),a={id:i,isLast:r.isLast,aesIV:r.aesIV,aesKeyPromise:t.aesKeyPromise};e.transmuxer.nextFile(n.chan,a).then(function(){return e.isSendingData_=!1}).then(e.runQueue_.bind(e))})["catch"](function(){e.isSendingData_=!1})}}},{key:"markBuffered",value:function(e){this.firstDataBuffered[e]=!0}},{key:"isBuffered",value:function(e){var t=this;return g.all(e,function(e){return t.firstDataBuffered[e]})}}]),e}(),w=t.TransmuxSegment=function S(e){(0,l["default"])(this,S),this.ts=e,this.transmuxStatus="in-progress"};t.MDM=function(){function e(t,n){var r=this;(0,l["default"])(this,e),this.loadedAesKeys_={},this.sessionHistory_=[],this.segmentPtsOffset_=-1,this.network=n,this.manifestRepresentation=t,g.extend(this,b),this.streamTypesKnown_=new c["default"](function(e,t){r.streamTypesKnownResolve_=e,r.streamTypesKnownReject_=t})}return(0,h["default"])(e,[{key:"getTrackTypes",value:function(){return this.streamTypesKnown_}},{key:"removeTmsInRange_",value:function(e,t,n){g.each(this.sessionHistory_,function(r){n===!1&&r.active||(r.tmsArray=g.filter(r.tmsArray,function(n){return!n.ts.errorInSegment||n.ts.start!==e&&n.ts.end!==t?!(n.ts.start<t&&n.ts.end>e):!0}))}),this.sessionHistory_=g.filter(this.sessionHistory_,function(e){return!!e.tmsArray.length})}},{key:"removeInactiveTmsInRange",value:function(e,t){return this.removeTmsInRange_(e,t,!1)}},{key:"removeAllTmsInRange",value:function(e,t){return this.removeTmsInRange_(e,t,!0)}},{key:"getSegmentAtTime",value:function(e){for(var t=this.sessionHistory_.length;t--;){var n=this.sessionHistory_[t].tmsArray,r=g.find(n,function(t){return t.ts.start<=e&&t.ts.end>=e});if(r)return r.ts}}},{key:"getTransmuxSegment",value:function(e){return this.currentTransmuxSession?this.currentTransmuxSession.getTransmuxSegment(e):null}},{key:"get",value:function(e){var t=this,n=this.getTransmuxSegment(e);return n||(n=new w(e),this.transmux_(n),this.beginDownloadingSegment(n)),e.aesKeyUri?this.loadedAesKeys_[e.aesKeyUri].then(function(){return c["default"].resolve(t.currentTransmuxSession)})["catch"](function(e){return c["default"].reject("Cannot download AES key: "+e)}):c["default"].resolve(this.currentTransmuxSession)}},{key:"getPtsOffset",value:function(){var e=this.currentTransmuxSession.tmsArray[0];return e&&e.ts.pts&&(this.segmentPtsOffset_=e.ts.pts/9e4-e.ts.start),this.segmentPtsOffset_}},{key:"complete",value:function(e){e.transmuxStatus="complete"}},{key:"endTransmuxSession",value:function(e){e&&e.tmsArray&&e.destroy()}},{key:"transmux_",value:function(e){var t=this,n=e.ts;if(this.isSegmentContiguous_(e))this.currentTransmuxSession.tmsArray.push(e);else{this.endTransmuxSession(this.currentTransmuxSession),this.currentTransmuxSession=new T,this.currentTransmuxSession.tmsArray.push(e),this.segmentPtsOffset_=-1,this.sessionHistory_.push(this.currentTransmuxSession);var r=["audio","video","metadata","captions"],i=g.map(r,function(e){return this.spawnTransmuxTaker_(this.currentTransmuxSession,e)},this),a=g.pluck(i,"offsetsKnown");this.currentTransmuxSession.offsetsKnown=c["default"].all(a).then(function(e){return g.reduce(e,function(e,t){return e[t.type]=t,e},{})})}n.aesKeyUri&&(this.loadedAesKeys_[n.aesKeyUri]||(this.loadedAesKeys_[n.aesKeyUri]=this.loadAesKey_(n).then(function(e){return(0,m.channelToPromise)(e.chan)}))),this.currentTransmuxSession.transmuxer.trackTypesKnown().then(function(e){0!==e.length&&t.streamTypesKnownResolve_(e)})}},{key:"spawnTransmuxTaker_",value:function(e,t){var n=e.transmuxer,r=e.mediaChannels[t],i=void 0,s=void 0,o=new c["default"](function(e,t){i=e,s=t});return k.go(a["default"].mark(function f(){var e,o,c,l,d,h,p,v;return a["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=g.now()+x,"metadata"!==t&&"captions"!==t||i({type:t}),o=void 0;case 3:return a.t0=k.CLOSED,a.next=6,k.take(n[t]);case 6:if(a.t1=o=a.sent,a.t0===a.t1){a.next=24;break}if("duration-update"!==o.type){a.next=11;break}return o.sourceFile&&(c=o.sourceFile.split("_"),l=(0,u["default"])(c,2),d=l[0],h=l[1],this.manifestRepresentation.updateTS(d,h,{type:t,duration:o.duration,start:o.start})),a.abrupt("continue",3);case 11:return"metadata"!==o.type||g.isNumber(o.start)||g.isNumber(o.pts)||(p=this.manifestRepresentation.getSegmentFromIndex(o.sourceFile),o.start=p.start),a.next=14,k.put(r,o);case 14:if("error"!==o.type){a.next=16;break}return a.abrupt("return",s(o.message));case 16:if("init"===o.type&&i({type:t,codec:o.codec,start:o.start}),v=g.now(),!(v>e)){a.next=22;break}return e=v+x,a.next=22,k.timeout(E);case 22:a.next=3;break;case 24:i({type:t}),r.close();case 26:case"end":return a.stop()}},f,this)}).bind(this)),{offsetsKnown:o}}},{key:"downloadComplete_",value:function(e,t){return e.size=t.size,this.manifestRepresentation.updateLevel(e),t}},{key:"loadAesKey_",value:function(e){var t={requestType:v.RequestType.ByteArray,requester:"aes-key",uris:[e.aesKeyUri],retryParameters:{maxAttempts:2}};return this.network.request(t)}},{key:"isSegmentContiguous_",value:function(e){if(!e||e.ts.errorInSegment||!this.currentTransmuxSession||!this.currentTransmuxSession.transmuxer||!this.currentTransmuxSession.tmsArray.length)return!1;var t=this.currentTransmuxSession.tmsArray,n=t[t.length-1];return e.ts.level===n.ts.level&&e.ts.mediaSequenceId===n.ts.mediaSequenceId+1&&!n.ts.errorInSegment}},{key:"beginDownloadingSegment",value:function(e){var t=this,n=e.ts;e.transmuxStatus="downloading";var r={requestType:v.RequestType.ByteArray,requester:"media-file",uris:[n.url],retryParameters:{maxAttempts:2}},i=this.network.request(r);this.currentTransmuxSession.enqueueNetworkData({segment:e.ts,netRequestPromise:i,aesKeyPromise:this.loadedAesKeys_[e.ts.aesKeyUri]}),i.then(function(e){(0,m.channelToPromise)(e.metaChan).then(t.downloadComplete_.bind(t,n))})["catch"](function(){n.errorInSegment=!0,t.trigger("segment-download-error",n)})}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingEngine=void 0;var i=n(9),a=r(i),s=n(180),u=r(s),o=n(185),c=r(o),f=n(103),l=r(f),d=n(15),h=r(d),p=n(5),v=r(p),m=n(7),y=r(m),_=n(154),g=n(148),b=r(g),k=n(316),x=n(1),E=n(2),T=n(3),w=n(4),S=n(8),A=n(48),M=1,I=10,L=60,C=50,P=200,O=30,R={video:{"default":'video/mp4; codecs="avc1.4d4015"'},audio:{"default":"audio/aac",aac:"audio/aac",mp3:"audio/mpeg"}},D=(t.StreamingEngine=function(){function e(t,n,r,i,a){var s=this;(0,v["default"])(this,e),this.loadingState_="loading",this.lastTransmuxSessionComplete_=h["default"].resolve([]),this.onTickInterval=-1,this.bufferEventSent_=!1,this.lastDuration_=NaN,x.extend(this,T),this.network=n,this.video=r,this.mediaSource=i,this.manifestRepresentation=t,this.mediaDataModel=new _.MDM(t,n),this.adaptive=new b["default"],this.edition_=a,this.supports=new A(a),this.manifestRepresentation.on("levels-disabled",function(e){var t=e.nextIndex;e.levels.length>1&&t++,s.adaptive.updateLevels(e.nextIndex),s.trigger(w.JWPLAYER_MEDIA_LEVELS,{levels:e.levels,currentQuality:t})}),this.adaptive.on("quality-change",function(e){s.manifestRepresentation.setCurrentQuality(e)}),this.textTrackCache_=this.createTextTrackCache_(),this.mediaDataModel.on("segment-download-error",function(e){s.trackTypes_||s.beginPlayback()})}return(0,y["default"])(e,[{key:"createTextTrackCache_",value:function(){return{captions:{cues:{}},metadata:{cues:{}}}}},{key:"updateDuration_",value:function(e){return"VOD"!==e.streamType&&e.end>this.video.duration&&this.msee.setDuration(e.end),this.onDurationChange(e),e}},{key:"clearBackBuffer_",value:function(e){var t=this;if(!this.mediaSource.sourceBuffers.length||!this.lastTransmuxSession_.tmsArray.length)return h["default"].resolve(e);var n=x.last(this.lastTransmuxSession_.tmsArray).ts.isLast;if(this.mediaSource.sourceBuffers[0].buffered.length&&!n){var r=function(){var n=t.mediaSource.sourceBuffers[0].buffered.start(0),r=Math.max(t.video.currentTime-L,0);return r-n>I?{v:t.removeBuffer(0,r).then(function(){return t.mediaDataModel.removeAllTmsInRange(0,r),e})["catch"](function(){return e})}:void 0}();if("object"===("undefined"==typeof r?"undefined":(0,l["default"])(r)))return r.v}return h["default"].resolve(e)}},{key:"skipVideoBeforeAudio",value:function(){if(this.msee&&2===this.mseeTracks_.length){var e=this.msee.sourceBuffers_.video.buffered,t=this.msee.sourceBuffers_.audio.buffered;if(e.length&&t.length){var n=e.start(0),r=t.start(0);if(this.video.currentTime===n&&r>n)return this.video.currentTime=r,!0}}return!1}},{key:"skipDiscontinuousZones",value:function(e){var t=this.video.currentTime;if(this.skipVideoBeforeAudio())return e;var n=this.mediaDataModel.getSegmentAtTime(t);if(!n||this.minForwardBuffer()>.2)return e;var r=this.manifestRepresentation.levels_[n.level].segments,i=r.indexOf(n),a=r[i+1];if(!a||-1===i)return e;if(n.errorInSegment)return this.video.currentTime=n.end+.01,e;if(a.errorInSegment&&a.start-t<.2)return this.video.currentTime=a.end+.01,e;var s=this.firstBufferedRange_(t),u=this.mediaDataModel.currentTransmuxSession,o=x.pluck(this.mseeTracks_,"type");return t>=n.start&&t<n.end&&u.isBuffered(o)&&5>s-t&&s>t&&(this.video.currentTime=s),n.discontinuity!==a.discontinuity&&this.video.buffered.length>1&&(this.video.currentTime=a.start),e}},{key:"firstBufferedRange_",value:function(e){var t=x.map(this.mseeTracks_,function(t){for(var n=this.msee.sourceBuffers_[t.type].buffered,r=n.length,i=0;r>i;i++){var a=n.start(i);if(e>=a&&e<=n.end(i)||a>=e)return a}return e},this);return Math.max.apply(Math,(0,c["default"])(t))}},{key:"onTick_",value:function(){var e=this;if(this.msee){if(this.video&&this.video.error)return this.destroy();this.adaptive.whatToDownload(this).then(this.buffer_.bind(this)),this.manifestRepresentation.doneLoading().then(function(t){return e.updateDuration_(t)}).then(function(t){return e.skipDiscontinuousZones(t)}).then(function(t){return e.clearBackBuffer_(t)})["catch"](function(t){return e.trigger("error",t)})}}},{key:"removeBuffer",value:function(e,t){if(!this.msee)return h["default"].resolve();var n=x.map(this.mseeTracks_,function(n){return this.msee.remove(n.type,e,t)["catch"](function(){})},this);return this.mediaDataModel.removeInactiveTmsInRange(e,t),h["default"].all(n)}},{key:"setCurrentQuality",value:function(e){var t=this.manifestRepresentation.sortedLevels_;this.adaptive.setQuality(e,t)}},{key:"addListeners",value:function(){this.removeVideoListeners_(),this.onTimeUpdateListener=this.onTimeUpdate_.bind(this),this.onSeekingListener=this.onSeeking_.bind(this),this.video.addEventListener("timeupdate",this.onTimeUpdateListener,!1),this.video.addEventListener("seeking",this.onSeekingListener,!1),this.onTickThrottle_=x.throttle(this.onTick_.bind(this),C),this.resumeOnTick()}},{key:"removeVideoListeners_",value:function(){this.video.removeEventListener("timeupdate",this.onTimeUpdateListener),this.video.removeEventListener("seeking",this.onSeekingListener)}},{key:"removeListeners",value:function(){this.removeVideoListeners_(),this.suspendOnTick(),this.adaptive.off(),this.manifestRepresentation&&this.manifestRepresentation.off(),this.off()}},{key:"getLiveStartTime",value:function(e){var t=e.end-e.start,n=E.between(.75*t,O/2,O),r=Math.max(e.start,e.end-n),i=e.initialLevel.getSegmentTimeRange(r,r);return i.length?i[0].start:0}},{key:"setupMSEE_",value:function(e){var t=this;return new h["default"](function(n,r){function i(){t.mediaSource.removeEventListener("sourceopen",i);try{t.msee=new k(t.mediaSource,null);var a=x.reduce(e,function(e,t){var n=R[t.type],r=n[t.codec]||n["default"];return e[t.type]=r,e},{});t.msee.init(a)}catch(s){r(s)}n(t.msee)}t.mediaSource.addEventListener("sourceopen",i),"open"===t.mediaSource.readyState&&i()})}},{key:"setMseReady_",value:function(){var e=this;return this.mseReady=this.mediaDataModel.getTrackTypes().then(function(t){return e.mseeTracks_=t,e.trackTypes_=t.concat([{type:"metadata"},{type:"captions"}]),e.trigger("trackTypes",t),t}).then(this.setupMSEE_.bind(this))["catch"](function(e){})}},{key:"setManifest",value:function(e,t){var n=this,r=this.manifestRepresentation.load(e,t).then(function(e){return n.onDurationChange(e)})["catch"](function(e){throw"Cannot load M3U8: "+e});return this.setMseReady_(),h["default"].all([this.mseReady,r]).then(function(e){var t=e[1];n.msee.setDuration(t.end)})["catch"](function(){return null}),r}},{key:"beginPlayback",value:function t(){var t=!0;this.adaptive.whatToDownload(this,t).then(this.buffer_.bind(this))["catch"](function(e){}),this.addListeners();var e=this;this.video.addEventListener("progress",function n(t){var r=t.target;e.msee&&e.minForwardBuffer()>M&&(r.removeEventListener("progress",n),e.bufferEventSent_=!0,e.trigger(w.JWPLAYER_MEDIA_BUFFER_FULL))},!1),"LIVE"!==this.manifestRepresentation.streamType&&"DVR"!==this.manifestRepresentation.streamType||this.video.addEventListener("loadedmetadata",function r(t){var n=t.target;n.removeEventListener("loadedmetadata",r),e.manifestRepresentation&&(n.currentTime=e.getLiveStartTime(e.manifestRepresentation.currentManifestMetadata))})}},{key:"getTextTrack_",value:function(e){for(var t=this.video.textTracks,n=0;n<t.length;n++){var r=t[n];if(r.kind===e)return r}}},{key:"addTextTrack_",value:function(e){var t="captions"===e?"Unknown CC":"",n=this.video.addTextTrack(e,t);return n}},{key:"buffer_",value:function(e){var t=this,n=e.segment;return!n||n.end<this.video.currentTime&&this.video.currentTime!==this.video.duration?void 0:n.aesKeyUri&&!this.supports("drm")?void this.trigger("error","AES decryption not supported in "+this.edition_+" edition"):(this.addExtInfCue_(n),this.mediaDataModel.get(n).then(function(e){return this.bufferTransmuxSegment_(e)["catch"](function(e){return null})}.bind(this))["catch"](function(e){return t.trigger("error",e)}))}},{key:"addExtInfCue_",value:function(e){if(e.extInfTitle){var t=this.getTextTrack_("metadata");t||(t=this.addTextTrack_("metadata"));var n=e.start,r=e.end,i="metadata",a=(0,u["default"])({extInfTitle:e.extInfTitle});if(!this.textTrackCache_[i].cues[n]||this.textTrackCache_[i].cues[n]!==r+a){this.textTrackCache_[i].cues[n]=r+a;var s=new U(n,r,a);t.addCue(s)}}}},{key:"getStreamOffsets_",value:function(e){var t=this;return e?e.offsetsKnown.then(function(n){var r=n.audio;t.audioCodec=r.codec;var i=n.video;return t.videoPtsOffset_=i.start,{session:e,offsets:n}}):h["default"].resolve()}},{key:"alignStreams_",value:function(e){var t=this,n=e.session,r=e.offsets;if(n&&n.tmsArray.length){var i=n.tmsArray[0].ts,a=this.manifestRepresentation.getPtsMapping(i.discontinuity),s=x.map(this.trackTypes_,function(e){var n=e.type,s=r[n].start,u=i.start;if(a&&("video"===n||"audio"===n)){var o=(s-a.pts)/9e4+a.seconds;Math.abs(o-u)<5&&(u=o)}return a||"video"!==n&&"audio"!==n||(t.manifestRepresentation.setPtsMapping(i.discontinuity,s,u),a=t.manifestRepresentation.getPtsMapping(i.discontinuity)),{type:n,start:u,end:i.end,pts:i.pts}});return{session:n,alignedStreams:s}}}},{key:"clearBufferBeforeAppending_",value:function(e){if(e&&e.session){var t=e.session,n=e.alignedStreams,r=x.pluck(n,"start"),i=Math.max.apply(Math,(0,c["default"])(r)),a=this.video.seekable.length;if(!a)return h["default"].resolve(e);var s=this.video.seekable.end(a-1);return this.removeBuffer(i,s).then(function(){return t.forwardBufferCleared=!0,e})}}},{key:"addAllTracks_",value:function(e){var t=this;if(e){var n=e.session,r=e.alignedStreams,i=n.tmsArray.length&&n.tmsArray[0].ts;if(i){var a=x.map(r,function(e){var t=this.manifestRepresentation.getPtsMapping(i.discontinuity);return"metadata"===e.type||"captions"===e.type?this.appendTextTrack(n,e.type,e.start,t):this.appendMediaBuffer(n,e.type,e.start)},this);return this.lastTransmuxSessionComplete_=h["default"].all(a),this.lastTransmuxSessionComplete_.then(function(){return n.transmuxer?(n.tmsArray.length&&n.tmsArray[n.tmsArray.length-1].ts.isLast&&(t.msee.endOfStream(),t.bufferEventSent_||(t.bufferEventSent_=!0,t.trigger(w.JWPLAYER_MEDIA_BUFFER_FULL))),n):n})}}}},{key:"markTracksLoaded_",value:function(e){return e&&this.mediaDataModel?void x.each(e.tmsArray,this.mediaDataModel.complete,this.mediaDataModel):h["default"].resolve()}},{key:"appendMediaBuffer",value:function(e,t,n){var r=this;return new h["default"](function(i){var s=e.mediaChannels[t];S.go(a["default"].mark(function u(){var r,o;return a["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=void 0,this.msee.setTimestampOffset(t,n);case 2:return a.next=4,S.take(s);case 4:if(a.t0=r=a.sent,a.t1=S.CLOSED,a.t0===a.t1){a.next=15;break}if(this.msee){a.next=9;break}return a.abrupt("break",15);case 9:if(r.payload&&r.payload.length){a.next=11;break}return a.abrupt("continue",2);case 11:o=this.msee.appendBuffer(t,r.payload).then(function(){e.markBuffered(t)})["catch"](function(e){return null}),a.next=2;break;case 15:i();case 16:case"end":return a.stop()}},u,this)}).bind(r))})}},{key:"appendTextTrack",value:function(t,n,r,i){var s=this;return new h["default"](function(u){var o=t.mediaChannels[n],c=s.getTextTrack_(n);S.go(a["default"].mark(function f(){var s,l,d,h,p,v,m,y,_,g,b,k,E,T,w,A,M,I;return a["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:s=void 0,l=this.videoPtsOffset_,d=r,i&&(l=i.pts,d=i.seconds);case 4:return a.next=6,S.take(o);case 6:if(a.t0=s=a.sent,a.t1=S.CLOSED,a.t0===a.t1){a.next=53;break}if(this.msee&&t.transmuxer&&t.tmsArray.length){a.next=11;break}return a.abrupt("break",53);case 11:if(h=x.last(t.tmsArray),p=h.ts.start,v=h.ts.end,"error"===s.type&&(this.trigger("error",s.message),this.removeListeners()),m=s.payload){a.next=18;break}return a.abrupt("continue",4);case 18:c||(c=this.addTextTrack_(n)),a.t2=n,a.next="captions"===a.t2?22:"metadata"===a.t2?34:51;break;case 22:if(y=Math.floor(20*m.start/9e4),_=Math.floor(20*m.end/9e4),g=this.textTrackCache_[n].cues[y]||this.textTrackCache_[n].cues[y+1]||this.textTrackCache_[n].cues[y-1],!(g&&Math.abs(g-_)<=1)){a.next=27;break}return a.abrupt("break",51);case 27:return this.textTrackCache_[n].cues[y]=_,b=d+e.getCaptionOffset(m.start,l),k=d+e.getCaptionOffset(m.end,l),E=new U(b,k,m.text),c.addCue(E),this.trigger("captionCueAdded"),a.abrupt("break",51);case 34:s.pts&&(p=(s.pts-i.pts)/9e4+i.seconds),T=0;case 36:if(!(T<m.length)){a.next=49;break}if(w=m[T].data,A=new Uint8Array(w).join(""),M=p+"_"+A,!this.textTrackCache_[n].cues[M]){a.next=42;break}return a.abrupt("continue",46);case 42:this.textTrackCache_[n].cues[M]=v,I=new U(p,v,""),I.data=m[T].data,c.addCue(I);case 46:T++,a.next=36;break;case 49:return this.trigger("metadataCueAdded"),a.abrupt("break",51);case 51:a.next=4;break;case 53:u();case 54:case"end":return a.stop()}},f,this)}).bind(s))})}},{key:"bufferTransmuxSegment_",value:function(e){var t=this;return e===this.lastTransmuxSession_?h["default"].resolve(e):(this.lastTransmuxSession_=e,this.mseReady.then(function(){return t.lastTransmuxSessionComplete_}).then(function(){return t.getStreamOffsets_(e)}).then(function(e){return t.alignStreams_(e)}).then(function(e){return t.clearBufferBeforeAppending_(e)}).then(function(e){return t.addAllTracks_(e)}).then(function(e){return t.markTracksLoaded_(e)})["catch"](function(e){return t.trigger("error",e)}))}},{key:"resumeOnTick",value:function(){this.mseReady.then(function(){-1===this.onTickInterval&&(this.onTickInterval=setInterval(this.onTickThrottle_,P))}.bind(this))["catch"](function(e){})}},{key:"suspendOnTick",value:function(){clearInterval(this.onTickInterval),this.onTickInterval=-1}},{key:"onTimeUpdate_",value:function(){this.onTickThrottle_()}},{key:"onSeeking_",value:function(){return this.video.buffered.length<1?void this.onTickThrottle_():void 0}},{key:"onDurationChange",value:function(e){var t=0;return t="LIVE"===e.streamType?1/0:"DVR"===e.streamType?e.start-e.end:e.end,t!==this.lastDuration_&&(this.trigger(w.JWPLAYER_MEDIA_META,{duration:t}),this.lastDuration_=t),e}},{key:"getForwardBuffer_",value:function(e,t){var n=this;if(!this.msee)return 0;x.isUndefined(e)&&(e=this.video.currentTime);var r=x.map(this.mseeTracks_,function(t){return n.msee.bufferedAheadOf(t.type,e)});return t?Math.max.apply(null,r):Math.min.apply(null,r)}},{key:"maxForwardBuffer",value:function(e){return this.getForwardBuffer_(e,!0)}},{key:"minForwardBuffer",value:function(e){return this.getForwardBuffer_(e,!1)}},{key:"destroy",value:function(){this.removeListeners(),this.msee&&this.msee.destroy(),this.mediaDataModel=void 0,this.manifestRepresentation=void 0,this.msee=void 0,this.textTrackCache_=void 0,this.clearTextTrackCues(),this.activeCuesCache_=void 0}},{key:"clearTextTrackCues",value:function(){x.each(this.video.textTracks,function(e){var t=e.mode;for(e.mode="hidden";e.cues.length;)e.removeCue(e.cues[0]);e.mode=t})}}],[{key:"getCaptionOffset",value:function(e,t){return(e-t)/9e4}}]),e}(),window),U=D.VTTCue||D.TextTrackCue},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,r){return new d["default"](function(i){P.go(f["default"].mark(function a(){var s,u;return f["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,P.take(e);case 3:if(s=a.sent,s!==P.CLOSED){a.next=10;break}return r&&t.close(),a.next=8,P.put(t,{type:"endOfFile"});case 8:return i(),a.abrupt("break",17);case 10:return u={sourceFile:n,payload:s},a.next=13,P.put(t,u);case 13:if(a.sent){a.next=15;break}return a.abrupt("break",17);case 15:a.next=0;break;case 17:case"end":return a.stop()}},a,this)}))})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),s=r(a),u=n(7),o=r(u),c=n(9),f=r(c),l=n(15),d=r(l),h=n(171),p=r(h),v=n(173),m=r(v),y=n(96),_=r(y),g=n(169),b=r(g),k=n(170),x=r(k),E=n(168),T=r(E),w=n(172),S=r(w),A=n(166),M=r(A),I=n(164),L=r(I),C=n(175),P=n(8),O=function(){function e(t){(0,s["default"])(this,e),this.id=t;var n=void 0,r=void 0,i=void 0;this.trackTypesKnownPromise=d["default"].race([new d["default"](function(e){n=e}),new d["default"](function(e){i=e}),new d["default"](function(e){r=e})]).then(function(e){return 0===e.length?(this.videoPesChannel.close(),o.close(),f.close(),h.close()):1===e.length&&("audio"===e[0].type?this.videoPesChannel.close():"video"===e[0].type&&(o.close(),f.close(),h.close())),e}.bind(this)),this.inputToMpegTSChannel=P.chan(1e4);var a=this.tsPacketChannel=P.chan(),u=this.pesPacketChannel=P.chan(),o=P.chan(),c=this.videoPesChannel=P.chan();this.tsToMetadataChannel=P.chan();var f=P.chan(),l=P.chan(),h=P.chan(),v=P.chan(),y=P.chan();this.audio=P.chan(),this.video=P.chan(),this.captions=P.chan(),this.metadata=P.chan(),P.go((0,m["default"])(n,a,u)),P.go((0,b["default"])(r,f,h,l)),P.go((0,x["default"])(this.tsToMetadataChannel,l,this.metadata)),P.go((0,S["default"])(c,v,y,this.metadata)),P.go((0,T["default"])(v,this.video)),P.go((0,L["default"])(y,this.captions)),P.go((0,C.PesPacketSplitter)(n,this.pesPacketChannel,o,this.videoPesChannel,this.tsToMetadataChannel)),P.go((0,p["default"])(i,this.inputToMpegTSChannel,this.tsPacketChannel,this.pesPacketChannel,f));var g=P.operations.merge([h,o]);P.go((0,_["default"])(g,this.audio))}return(0,o["default"])(e,[{key:"nextFile",value:function(e,t){if(t.aesKeyPromise){var n=P.chan(1e4);return P.go((0,M["default"])(e,n,t.id,t.aesIV,t.aesKeyPromise)),i(n,this.inputToMpegTSChannel,t.id,t.isLast)}return i(e,this.inputToMpegTSChannel,t.id,t.isLast)}},{key:"endOfInput",value:function(){this.inputToMpegTSChannel.close()}},{key:"trackTypesKnown",value:function(){return this.trackTypesKnownPromise}}]),e}();t["default"]=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),s=n(7),u=r(s),o=function(){function e(t){(0,a["default"])(this,e),this.aesIV=t}return(0,u["default"])(e,[{key:"decrypt",value:function(e,t){return window.crypto.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),s=n(7),u=r(s),o=function(){function e(t){(0,a["default"])(this,e);var n=this.uint8ArrayToUint32Array_(t.buffer),r=this.keySize=n.length,i=r+6;this.ksRows=4*(i+1),this.keyWords=n,this.subMix=[],this.invSubMix=[],this.initTable(),this.expandKey()}return(0,u["default"])(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<n.length;r++)n[r]=t.getUint32(4*r);return n}},{key:"initTable",value:function(){var e=this.sBox=new Uint32Array(256),t=this.invSBox=new Uint32Array(256),n=this.subMix[0]=new Uint32Array(256),r=this.subMix[1]=new Uint32Array(256),i=this.subMix[2]=new Uint32Array(256),a=this.subMix[3]=new Uint32Array(256),s=this.invSubMix[0]=new Uint32Array(256),u=this.invSubMix[1]=new Uint32Array(256),o=this.invSubMix[2]=new Uint32Array(256),c=this.invSubMix[3]=new Uint32Array(256);this.rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var f=new Uint32Array(256),l=0,d=0,h=0;256>h;h++)128>h?f[h]=h<<1:f[h]=h<<1^283;for(var h=0;256>h;h++){var p=d^d<<1^d<<2^d<<3^d<<4;p=p>>>8^255&p^99,e[l]=p,t[p]=l;var v=f[l],m=f[v],y=f[m],_=257*f[p]^16843008*p;n[l]=_<<24|_>>>8,r[l]=_<<16|_>>>16,i[l]=_<<8|_>>>24,a[l]=_,_=16843009*y^65537*m^257*v^16843008*l,s[p]=_<<24|_>>>8,u[p]=_<<16|_>>>16,o[p]=_<<8|_>>>24,c[p]=_,l?(l=v^f[f[f[y^v]]],d^=f[f[d]]):l=d=1}}},{key:"expandKey",value:function(){for(var e,t=this.keySchedule=new Uint32Array(this.ksRows).fill(0),n=this.rcon,r=this.invKeySchedule=new Uint32Array(this.ksRows).fill(0),i=this.keySize,a=this.keyWords,s=this.ksRows,u=this.sBox,o=this.invSubMix[0],c=this.invSubMix[1],f=this.invSubMix[2],l=this.invSubMix[3],d=0;s>d;d++)if(i>d)e=t[d]=a[d];else{var h=e;d%i?i>6&&d%i===4&&(h=u[h>>>24]<<24|u[h>>>16&255]<<16|u[h>>>8&255]<<8|u[255&h]):(h=h<<8|h>>>24,h=u[h>>>24]<<24|u[h>>>16&255]<<16|u[h>>>8&255]<<8|u[255&h],h^=n[d/i|0]<<24),t[d]=e=(t[d-i]^h)>>>0}for(var p=0;s>p;p++)d=s-p,h=3&p?t[d]:t[d-4],4>p||4>=d?r[p]=h:r[p]=o[u[h>>>24]]^c[u[h>>>16&255]]^f[u[h>>>8&255]]^l[u[255&h]],r[p]=r[p]>>>0}},{key:"decrypt",value:function(e,t,n){for(var r=this.invKeySchedule,i=r[0],a=r[1],s=r[2],u=r[3],o=this.keySize+6,c=this.invSubMix[0],f=this.invSubMix[1],l=this.invSubMix[2],d=this.invSubMix[3],h=this.invSBox,p=new Uint8Array(e.length),v=this.uint8ArrayToUint32Array_(n),m=v[0],y=v[1],_=v[2],g=v[3],b=new DataView(e.buffer);t<e.length;){var k=b.getUint32(t),x=b.getUint32(t+4),E=b.getUint32(t+8),T=b.getUint32(t+12),w=new Uint32Array(4),S=new Uint32Array(4),A=new Uint32Array(4);w[0]=k^i,w[1]=T^a,w[2]=E^s,w[3]=x^u;for(var M=4,I=1;o>I;I++)S[0]=c[w[0]>>>24]^f[w[1]>>>16&255]^l[w[2]>>>8&255]^d[255&w[3]]^r[M++],S[1]=c[w[1]>>>24]^f[w[2]>>>16&255]^l[w[3]>>>8&255]^d[255&w[0]]^r[M++],S[2]=c[w[2]>>>24]^f[w[3]>>>16&255]^l[w[0]>>>8&255]^d[255&w[1]]^r[M++],S[3]=c[w[3]>>>24]^f[w[0]>>>16&255]^l[w[1]>>>8&255]^d[255&w[2]]^r[M++],w[0]=S[0],w[1]=S[1],w[2]=S[2],w[3]=S[3];S[0]=(h[w[0]>>>24]<<24|h[w[1]>>>16&255]<<16|h[w[2]>>>8&255]<<8|h[255&w[3]])^r[M++],S[1]=(h[w[1]>>>24]<<24|h[w[2]>>>16&255]<<16|h[w[3]>>>8&255]<<8|h[255&w[0]])^r[M++],S[2]=(h[w[2]>>>24]<<24|h[w[3]>>>16&255]<<16|h[w[0]>>>8&255]<<8|h[255&w[1]])^r[M++],S[3]=(h[w[3]>>>24]<<24|h[w[0]>>>16&255]<<16|h[w[1]>>>8&255]<<8|h[255&w[2]])^r[M],A[3]=S[0]^m,A[2]=S[3]^y,A[1]=S[2]^_,A[0]=S[1]^g;for(var L=new DataView(A.buffer),I=0;16>I;I++)p[I+t]=L.getUint8(15-I);m=k,y=x,_=E,g=T,t+=16}return this.unpad_(p)}},{key:"unpad_",value:function(e){var t=e.length,n=e[t-1];return e.subarray(0,e.length-n)}}]),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),a=r(i),s=n(5),u=r(s),o=n(7),c=r(o),f=n(157),l=r(f),d=n(162),h=r(d),p=n(158),v=r(p),m=function(){function e(t,n){(0,u["default"])(this,e),this.key=t,this.iv=n,this.fastAesKey=new h["default"](t)}return(0,c["default"])(e,[{key:"supportsWebCrypto_",value:function(){return window.crypto&&"https:"===window.location.protocol}},{key:"decrypt",value:function(e){var t=this;if(this.supportsWebCrypto_())return this.fastAesKey.expandKey().then(function(n){var r=new l["default"](t.iv);
return r.decrypt(e,n)});var n=new v["default"](this.key);return a["default"].resolve(n.decrypt(e,0,this.iv))}}]),e}();t["default"]=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(i,i+s)),n=new DataView(a.buffer).getUint32(0),r=8*s,t-=s},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,i=Math.floor(e/8),e-=8*i,t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return console.assert(32>=e,"Cannot read more than 32 bits at a time"),r-=i,r>0?n<<=i:t>0&&this.loadWord(),i=e-i,i>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;r>e;++e)if(0!==(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={CTRL_RCL:5152,CTRL_BS:5153,CTRL_AOF:5154,CTRL_AON:5155,CTRL_DER:5156,CTRL_RU2:5157,CTRL_RU3:5158,CTRL_RU4:5159,CTRL_FON:5160,CTRL_RDC:5161,CTRL_TR:5162,CTRL_RTD:5163,CTRL_EDM:5164,CTRL_CR:5165,CTRL_ENM:5166,CTRL_EOC:5167,CTRL_TO1:5921,CTRL_TO2:5922,CTRL_TO3:5923};t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),s=n(7),u=r(s),o=function(){function e(t){(0,a["default"])(this,e),this.key=t}return(0,u["default"])(e,[{key:"expandKey",value:function(){return window.crypto.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();t["default"]=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,i,a,s,u,o,c,f,l,d,h,p,v,m,y,_,g,b,k,x,E,T,w,S,A,M,I,L,C,P,O,R,D,U,B,N;!function(){var e;w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};for(e in w)w.hasOwnProperty(e)&&(w[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),M=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),A=new Uint8Array([0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),C={video:I,audio:L},R=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),U=D,B=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=D,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}(),n=function(e){var t,n,r,i=[],a=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)a+=i[t].byteLength;for(n=new Uint8Array(a+8),r=new DataView(n.buffer,n.byteOffset,n.byteLength),r.setUint32(0,n.byteLength),n.set(e,4),t=0,a=8;t<i.length;t++)n.set(i[t],a),a+=i[t].byteLength;return n},r=function(){return n(w.dinf,n(w.dref,R))},i=function(e){return n(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(){return n(w.ftyp,S,A,S,M)},y=function(e){return n(w.hdlr,C[e])},s=function(e){return n(w.mdat,e)},m=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),n(w.mdhd,t)},v=function(e){return n(w.mdia,m(e),y(e.type),o(e))},u=function(e){return n(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return n(w.minf,"video"===e.type?n(w.vmhd,P):n(w.smhd,O),r(),g(e))},c=function(e,t){for(var r=[],i=t.length;i--;)r[i]=x(t[i]);return n.apply(null,[w.moof,u(e)].concat(r))},f=function(e){for(var t=e.length,r=[];t--;)r[t]=h(e[t]);return n.apply(null,[w.moov,d(4294967295)].concat(r).concat(l(e)))},l=function(e){for(var t=e.length,r=[];t--;)r[t]=E(e[t]);return n.apply(null,[w.mvex].concat(r))},d=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(w.mvhd,t)},_=function(e){var t,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)t=i[r].flags,a[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return n(w.sdtp,a)},g=function(e){return n(w.stbl,b(e),n(w.stts,N),n(w.stsc,U),n(w.stsz,B),n(w.stco,D))},function(){var e,t;b=function(r){return n(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===r.type?e(r):t(r))},e=function(e){var t,r=e.sps||[],i=e.pps||[],a=[],s=[];for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));for(t=0;t<i.length;t++)s.push((65280&i[t].byteLength)>>>8),s.push(255&i[t].byteLength),s=s.concat(Array.prototype.slice.call(i[t]));return n(w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(w.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length]).concat(a).concat([i.length]).concat(s))),n(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},t=function(e){return n(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))}}(),k=function(){return n(w.styp,S,A,S)},p=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return n(w.tkhd,t)},x=function(e){var t,r,i,a,s;return t=n(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),r=n(w.tfdt,new Uint8Array([0,0,0,0,e.baseMediaDecodeTime>>>24&255,e.baseMediaDecodeTime>>>16&255,e.baseMediaDecodeTime>>>8&255,255&e.baseMediaDecodeTime])),s=88,"audio"===e.type?(i=T(e,s),n(w.traf,t,r,i)):(a=_(e),i=T(e,a.length+s),n(w.traf,t,r,i,a))},h=function(e){return e.duration=e.duration||4294967295,n(w.trak,p(e),v(e))},E=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),n(w.trex,t)},function(){var e,t,r;r=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var i,a,s,u;for(a=e.samples||[],t+=20+16*a.length,i=r(a,t),u=0;u<a.length;u++)s=a[u],i=i.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return n(w.trun,new Uint8Array(i))},e=function(e,t){var i,a,s,u;for(a=e.samples||[],t+=20+8*a.length,i=r(a,t),u=0;u<a.length;u++)s=a[u],i=i.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return n(w.trun,new Uint8Array(i))},T=function(n,r){return"audio"===n.type?e(n,r):t(n,r)}}(),t["default"]={ftyp:a,mdat:s,moof:c,moov:f,initSegment:function(e){var t,n=a(),r=f(e);return t=new Uint8Array(n.byteLength+r.byteLength),t.set(n),t.set(r,n.byteLength),t}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return l["default"].mark(function n(){var r,i;return l["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=void 0,i=new x;case 2:return n.t0=v.CLOSED,n.next=5,v.take(e);case 5:if(n.t1=r=n.sent,n.t0===n.t1){n.next=10;break}return n.delegateYield(s(t,r,i),"t2",8);case 8:n.next=2;break;case 10:t.close();case 11:case"end":return n.stop()}},n,this)})}function s(e,t,n){var r,i,a,s,f,d;return l["default"].wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(r=new E,r.payload=t.payload,i=r.payload.length,a=new b.CaptionsParser,!(r.position<i)){l.next=14;break}for(r.position++;r.position<i-10;)s=o(r),f=o(r),s===g["default"].SEI_PAYLOAD_ITU_T_35&&c(r)&&(f-=8,r.position+=8,f-=a.getCCDataPackets(r,n,t.pts)),u(r,f);a.parseCaptionsData(n,t.dts);case 8:if(!n.captions.length){l.next=14;break}return d=n.captions.shift(),l.next=12,v.put(e,{payload:d});case 12:l.next=8;break;case 14:case"end":return l.stop()}},k[0],this)}function u(e,t){for(var n=e.payload,r=e.payload.length,i=e.position,a=0;t>a;a++)r>i+3&&0===n[i]&&0===n[i+1]&&3===n[i+2]&&(i+=2,a++),r>i&&i++;e.position=i}function o(e){for(var t=void 0,n=0,r=e.payload.length;e.position<r&&(t=e.payload[e.position++],n+=t,255===t););return n}function c(e){var t=e.position,n=e.payload[t],r=y.readUint16(e.payload,t+1),i=y.readUint32(e.payload,t+3),a=e.payload[t+7];return n===g["default"].ITU_T_T35_COUNTRY_CODE&&r===g["default"].ITU_T_T35_PROVIDER_CODE&&i===g["default"].USER_IDENTIFIER_ATSC1_DATA&&a===g["default"].USER_DATA_TYPE_CC_DATA}Object.defineProperty(t,"__esModule",{value:!0});var f=n(9),l=i(f),d=n(5),h=i(d);t["default"]=a;var p=n(8),v=r(p),m=n(24),y=r(m),_=n(97),g=i(_),b=n(165),k=[s].map(l["default"].mark),x=function T(){(0,h["default"])(this,T),this.captions=[],this.sorted=[],this.buffer=["",""],this.bufferIndex=0,this.captionStart=NaN,this.captionEnd=NaN,this.lastCommand=0,this.mode=0},E=function w(){(0,h["default"])(this,w),this.position=0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CaptionsParser=t.CCPacket=t.Caption=void 0;var i=n(7),a=r(i),s=n(5),u=r(s),o=n(97),c=r(o),f=n(161),l=r(f),d=t.Caption=function m(){(0,u["default"])(this,m),this.type="caption"},h=t.CCPacket=function y(){(0,u["default"])(this,y)},p={48:"",49:"",50:"",51:"",52:"",53:"",54:"",55:"",56:"",57:" ",58:"",59:"",60:"",61:"",62:"",63:""},v={42:"",92:"",94:"",95:"",96:"",123:"",124:"",125:"",126:"",127:""};t.CaptionsParser=function(){function e(){(0,u["default"])(this,e)}return(0,a["default"])(e,[{key:"parseCaptionsData",value:function(e,t){for(var n=e.sorted,r=e.sorted.length,i=0;r>i;i++){if(!(n[i].pts<=t))return void n.splice(0,i);this.processCCPacket_(e,n[i])}n.length=0}},{key:"processCCPacket_",value:function(e,t){e.lastCommandText="";var n=t.ccByte1,r=t.ccByte2,i=(t.ccType,t.ccValid,"");32&n||64&n?(i=this.handleCharacter_(n)+this.handleCharacter_(r),e.mode==l["default"].CTRL_RDC?(e.buffer[1-e.bufferIndex]+=i,e.captionEnd=t.pts,this.finishCaption_(e,1-e.bufferIndex,t),e.captionStart=t.pts):e.buffer[e.bufferIndex]+=i):(17===n||25===n)&&r>=48&&63>=r&&(i=p[r],e.mode==l["default"].CTRL_RDC?(e.buffer[1-e.bufferIndex]+=i,e.captionEnd=t.pts,this.finishCaption_(e,1-e.bufferIndex,t),e.captionStart=t.pts):e.buffer[e.bufferIndex]+=i),(20===n||28===n||21===n||29===r)&&r>=32&&47>=r&&this.handleCommand_(e,t),(23===n||31===n)&&r>=33&&35>=r&&this.handleCommand_(e,t),n>=16&&23>=n&&r>=64&&127>=r&&this.handlePAC_(e,t)}},{key:"handleCharacter_",value:function(e){return v[e]?v[e]:String.fromCharCode(e)}},{key:"handleCommand_",value:function(e,t){var n=t.ccByte1,r=t.ccByte2;n=23&n;var i=n<<8|r;if(i===e.lastCommand)return void(e.lastCommand=0);switch(e.lastCommand=i,i){case l["default"].CTRL_RCL:e.mode=i;break;case l["default"].CTRL_BS:break;case l["default"].CTRL_AOF:break;case l["default"].CTRL_AON:break;case l["default"].CTRL_DER:break;case l["default"].CTRL_RU2:case l["default"].CTRL_RU3:case l["default"].CTRL_RU4:e.mode=i,this.rollup_(e,t),e.captionEnd=t.pts,this.finishCaption_(e,e.bufferIndex,t),e.captionStart=t.pts;break;case l["default"].CTRL_FON:e.mode=i;break;case l["default"].CTRL_RDC:e.mode=i,e.captionStart=t.pts;break;case l["default"].CTRL_TR:e.nonCaptionText="";break;case l["default"].CTRL_RTD:break;case l["default"].CTRL_EDM:e.captionEnd=t.pts,this.finishCaption_(e,1-e.bufferIndex,t);break;case l["default"].CTRL_CR:e.buffer[e.bufferIndex]+="\n",this.rollup_(e,t);break;case l["default"].CTRL_ENM:e.buffer[e.bufferIndex]="";break;case l["default"].CTRL_EOC:e.mode=l["default"].CTRL_RCL,!isNaN(e.captionStart)&&(isNaN(e.captionEnd)||e.captionEnd<=e.captionStart)&&(e.captionEnd=t.pts,this.finishCaption_(e,1-e.bufferIndex,t)),e.bufferIndex=1-e.bufferIndex,e.captionStart=t.pts}}},{key:"finishCaption_",value:function(e,t,n){if(e.captionStart>-1){var r=e.buffer[t];if(e.lastCommand===l["default"].CTRL_EDM&&(e.buffer[t]=""),!r)return;var i=new d;i.text=r.replace(/\n+/g,"\n").replace(/^\n+/,"").replace(/\n+$/,""),i.start=e.captionStart,i.end=e.captionEnd,e.captions.push(i),e.captionEnd=NaN}}},{key:"rollup_",value:function(e,t){var n=1;switch(e.mode){case l["default"].CTRL_RU2:n=2;break;case l["default"].CTRL_RU3:n=3;break;case l["default"].CTRL_RU4:n=4}var r=e.buffer[e.bufferIndex];r=r.replace(/\n+/g,"\n");var i=r.split("\n");e.buffer[e.bufferIndex]=i.slice(Math.max(0,i.length-n)).join("\n")}},{key:"handlePAC_",value:function(e,t){16===t.ccByte1&&t.ccByte2>95||(e.buffer[e.bufferIndex]+="\n")}},{key:"getCCDataPackets",value:function(e,t,n){var r=0,i=e.payload,a=i[e.position++];e.position++,r+=2;var s=31&a;return this.getPackets_(e,t,s,n),r+=3*s}},{key:"getPackets_",value:function(e,t,n,r){for(var i=e.payload,a=e.position,s=(e.payload.length,0);n>s;s++){var u=i[a++],o=127&i[a++],f=127&i[a++],l=0!==(4&u),d=3&u;if(d===c["default"].NTSC_CC_FIELD_1){if(0==o&&0==f)continue;var p=!1,v=t.sorted,m=new h;m.pts=r,m.ccByte1=o,m.ccByte2=f,m.ccType=d,m.ccValid=l;for(var y=v.length-1;y>=0;y--)if(v[y].pts<=r){v.splice(y+1,0,m),p=!0;break}p||v.splice(0,0,m)}}e.position=a}}]),e}()},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r,i){function a(e,a){var s=l.combineUint8Arrays(e,a);return new c["default"](function(e){i.then(function(i){var a=new v["default"](i,r);a.decrypt(s).then(function(n){var r=new Uint8Array(n);h.putAsync(t,r,e)})["catch"](function(r){h.putAsync(t,{type:"error",file:n,message:"Error decrypting AES stream"}),t.close(),e()})})})}var s=[],o=0;return u["default"].mark(function f(){var n;return u["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=h.CLOSED,r.next=3,h.take(e);case 3:if(r.t1=n=r.sent,r.t0===r.t1){r.next=9;break}o+=n.length,s.push(new Uint8Array(n)),r.next=0;break;case 9:o>0?a(s,o).then(function(){return t.close()}):t.close();case 10:case"end":return r.stop()}},f,this)})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),u=i(s),o=n(15),c=i(o);t["default"]=a;var f=n(24),l=r(f),d=n(8),h=r(d),p=n(159),v=i(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=new o["default"](e),n=t.readUnsignedByte(),r=t.readBits(6);t.skipBits(2);var i=t.readUnsignedByte();if(t.skipUnsignedExpGolomb(),100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n||138===n||139===n||134===n){var a=t.readUnsignedExpGolomb();if(3===a&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()){var u=3!==a?8:12;for(l=0;u>l;l++)t.readBoolean()&&(6>l?s(16,t):s(64,t))}}t.skipUnsignedExpGolomb();var c=t.readUnsignedExpGolomb();if(0===c)t.readUnsignedExpGolomb();else if(1===c){t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb();for(var f=t.readUnsignedExpGolomb(),l=0;f>l;l++)t.skipExpGolomb()}t.skipUnsignedExpGolomb(),t.skipBits(1);var d=t.readUnsignedExpGolomb(),h=t.readUnsignedExpGolomb(),p=t.readBits(1);0===p&&t.skipBits(1);var v=0,m=0,y=0,_=0;return t.skipBits(1),t.readBoolean()&&(v=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb()),{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(d+1)-2*v-2*m,height:(2-p)*(h+1)*16-2*y-2*_}}function a(e){for(var t,n,r=e.byteLength,i=[],a=1;r-2>a;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;t>a;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n}function s(e,t){var n,r,i=8,a=8;for(n=0;e>n;n++)0!==a&&(r=t.readExpGolomb(),a=(i+r+256)%256),i=0===a?i:a}Object.defineProperty(t,"__esModule",{value:!0});var u=n(160),o=r(u);t["default"]={parseSPS:i,discardEmulationPreventionBytes:a}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return _["default"].mark(function n(){var r,i,a,s,u,o,c,d,h;return _["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=new C,i=[],s=0,u=0,o=0;case 5:return n.t0=M.CLOSED,n.next=8,M.take(e);case 8:if(n.t1=c=n.sent,n.t0===n.t1){n.next=34;break}if(a){n.next=14;break}s=c.dts,n.next=24;break;case 14:if(c.sourceFile===a){n.next=23;break}return d=c.dts-s,h=c.dts-u,(0>h||h>18e4)&&(d=u-s+o),n.next=20,M.put(t,{type:"duration-update",sourceFile:a,duration:d/9e4,start:s});case 20:s=c.dts,n.next=24;break;case 23:o=c.dts-u;case 24:if(u=c.dts,a=c.sourceFile,!(r.sps&&r.pps&&i.length>0&&c.flags.hasKeyframe)){n.next=30;break}return n.delegateYield(l(t,r,i),"t2",28);case 28:i=[],p(r);case 30:f(r,c),i.push(c),n.next=5;break;case 34:if(!i.length||r.sps&&r.pps||console.warn("TS File missing Keyframe info"),!i.length){n.next=38;break}return n.next=38,M.put(t,{type:"duration-update",sourceFile:a,duration:(u-s+o)/9e4,start:s});case 38:return n.delegateYield(l(t,r,i),"t3",39);case 39:t.close();case 40:case"end":return n.stop()}},n,this)})}function s(e){return 31&e.payload[0]}function u(e){return 9===s(e)}function o(e){return 5===s(e)}function c(e,t){L.isNumber(t.pts)&&(e.minSegmentPts=Math.min(t.pts,e.minSegmentPts),e.maxSegmentPts=Math.max(t.pts,e.maxSegmentPts)),L.isNumber(t.dts)&&(e.minSegmentDts=Math.min(t.dts,e.minSegmentDts),e.maxSegmentDts=Math.max(t.dts,e.maxSegmentDts))}function f(e,t){var n=t.nalus,r=n.length;e.naluCount+=r;for(var i=0;r>i;++i){var a=n[i],u=a.payload,o=s(a);switch(e.nalUnitsByteLength+=u.byteLength,o){case 7:e.sps=u,e.spsInfoRBSP=S["default"].discardEmulationPreventionBytes(u.subarray(1)),e.spsInfo=S["default"].parseSPS(e.spsInfoRBSP);break;case 8:e.pps=u}}}function l(e,t,n){var r,i,a,s,u,o,f,l,d;return _["default"].wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(t.naluCount<=0)){h.next=2;break}return h.abrupt("return");case 2:r=t.nalUnitsByteLength+4*t.naluCount,i=new Uint8Array(r),a=0,s=[],u=0,o=0;case 8:if(!(o<n.length)){h.next=21;break}if(f=n[o],c(t,f),1!==n.length){h.next=16;break}return h.abrupt("continue",18);case 16:l=o===n.length-1?f.dts-n[o-1].dts:n[o+1].dts-f.dts;case 17:a=v(t,f,s,l,i,a,u);case 18:o++,h.next=8;break;case 21:if(t.sample&&(s.push(t.sample),t.sample=null),!(s.length>0)){h.next=26;break}return d=f.sourceFile,h.delegateYield(m(d,t,s,i,e,l),"t0",25);case 25:p(t);case 26:t.naluCount=0,t.nalUnitsByteLength=0;case 28:case"end":return h.stop()}},I[0],this)}function d(e){return{type:"video",codec:"avc",pps:[e.pps],sps:[e.sps],height:e.spsInfo.height,width:e.spsInfo.width,profileIdc:e.spsInfo.profileIdc,levelIdc:e.spsInfo.levelIdc,profileCompatibility:e.spsInfo.profileCompatibility}}function h(e,t,n){t.baseMediaDecodeTime=e.baseMediaDecodeTime,t.minSegmentPts=e.minSegmentPts,t.maxSegmentPts=e.maxSegmentPts,t.minSegmentDts=e.minSegmentDts,t.maxSegmentDts=e.maxSegmentDts,t.samples=n}function p(e){e.minSegmentPts=Number.MAX_VALUE,e.maxSegmentPts=0,e.minSegmentDts=Number.MAX_VALUE,e.maxSegmentDts=0}function v(e,t,n,r,i,a,s){for(var c=t.nalus,f=e.sample,l=0;l<c.length;++l){var d=c[l];u(d)&&(f&&n.push(f),f={size:0,duration:r,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0},dataOffset:a+s,compositionTimeOffset:d.pts-d.dts}),f&&(o(d)&&(f.flags.dependsOn=2),f.size+=d.payload.byteLength+4,T.writeUint32(i,a,d.payload.byteLength),a+=4,i.set(d.payload,a),a+=d.payload.byteLength)}return e.sample=f,a}function m(e,t,n,r,i,a){var s,u,o,c,f,l,p,v,m;return _["default"].wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return s=d(t),h(t,s,n),u=L.pick(s,["id","duration","samplerate","type","width","height","profileIdc","profileCompatability","levelIdc","sps","pps"]),o=x["default"].initSegment([u]),c={type:"init",start:t.minSegmentPts,length:0,payload:o,sourceFile:e},y.next=8,M.put(i,c);case 8:return f=t.maxSegmentDts-t.minSegmentDts+a,l=x["default"].moof(t.sequenceNumber,[s]),p=x["default"].mdat(r),v=T.concatUint8Array(l,p),m={type:"mediaSegment",start:t.minSegmentPts,end:t.maxSegmentPts,length:f/9e4,payload:v,sourceFile:e},y.next=15,M.put(i,m);case 15:t.baseMediaDecodeTime+=f,t.sequenceNumber++;case 17:case"end":return y.stop()}},I[1],this)}Object.defineProperty(t,"__esModule",{value:!0});var y=n(9),_=i(y),g=n(5),b=i(g);t["default"]=a;var k=n(163),x=i(k),E=n(24),T=r(E),w=n(167),S=i(w),A=n(8),M=r(A),I=[l,m].map(_["default"].mark),L=n(1),C=function P(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];(0,b["default"])(this,P),this.nalUnitsByteLength=0,this.naluCount=0,this.sequenceNumber=1,this.minSegmentPts=Number.MAX_VALUE,this.maxSegmentPts=0,this.minSegmentDts=Number.MAX_VALUE,this.maxSegmentDts=0,this.baseMediaDecodeTime=e}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r,i,a,s){var u,c,l,h;return o["default"].wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=d.combineUint8Arrays(n,r),0===u.length){o.next=10;break}return c=(0,_["default"])(u),l=c.position,h=u.subarray(l),!e.type&&p["default"].probeMP3(h)?(e.type=m["default"].ISO_IEC_11172_3_AUDIO,i([{type:"audio",codec:"mp3"}])):!e.type&&p["default"].probeAAC(h)?(e.type=m["default"].ISO_IEC_13818_1_RESERVED,i([{type:"audio",codec:"aac"}])):e.type||(f.put(a,{type:"error",message:"ID3 Data found, but audio type could not be determined"}),a.close(),s.close()),o.next=8,f.put(s,{sourceFile:t,cues:c.cues});case 8:return o.next=10,f.put(a,{sourceFile:t,type:e.type,payload:h});case 10:case"end":return o.stop()}},g[0],this)}function s(e,t,n,r){return o["default"].mark(function i(){var s,u,c,l,d;return o["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:s=[],u=0,c=void 0,l=null,d={};case 5:return i.t0=f.CLOSED,i.next=8,f.take(t);case 8:if(i.t1=c=i.sent,i.t0===i.t1){i.next=25;break}if(!l||l===c.sourceFile){i.next=16;break}return i.delegateYield(a(d,l,s,u,e,n,r),"t2",12);case 12:u=0,s=[],i.next=20;break;case 16:if(!(u>2e4)){i.next=20;break}return i.delegateYield(a(d,l,s,u,e,n,r),"t3",18);case 18:u=0,s=[];case 20:l=c.sourceFile,s.push(c.payload),u+=c.payload.length,i.next=5;break;case 25:return i.delegateYield(a(d,l,s,u,e,n,r),"t4",26);case 26:n.close(),r.close();case 28:case"end":return i.stop()}},i,this)})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(9),o=i(u);t["default"]=s;var c=n(8),f=r(c),l=n(24),d=r(l),h=n(98),p=i(h),v=n(35),m=i(v),y=n(95),_=i(y),g=[a].map(o["default"].mark)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return u["default"].mark(function r(){var i,a,s,o,f,h;return u["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=void 0,a=d.operations.merge([e,t]);case 2:return r.t0=d.CLOSED,r.next=5,d.take(a);case 5:if(r.t1=i=r.sent,r.t0===r.t1){r.next=19;break}if("error"!==i.type){r.next=11;break}return r.next=10,d.put(n,i);case 10:return r.abrupt("continue",2);case 11:if(s=void 0,o=void 0,i.payload?(f=i,h=new Uint8Array(f.payload),s=(0,l["default"])(h).cues,o=f.dts):s=i.cues,0===c.size(s)){r.next=17;break}return r.next=17,d.put(n,{type:"metadata",pts:o,sourceFile:i.sourceFile,payload:s});case 17:r.next=2;break;case 19:n.close();case 20:case"end":return r.stop()}},r,this)})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),u=i(s);t["default"]=a;var o=n(310),c=r(o),f=n(95),l=i(f),d=n(8)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r,i){function a(e,t,n){var r,i,a,s,o,c;return u["default"].wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=Math.floor(t.length/d["default"].TS_PACKET_SIZE),i=0;case 2:if(!(r>i)){u.next=22;break}if(a=i*d["default"].TS_PACKET_SIZE,s=(i+1)*d["default"].TS_PACKET_SIZE,o=t.subarray(a,s),o[0]!==d["default"].TS_SYNCBYTE){u.next=18;break}return u.prev=7,c=(0,h.TsPacket)(o),c.sourceFile=e,u.next=12,y.put(n,c);case 12:u.next=16;break;case 14:u.prev=14,u.t0=u["catch"](7);case 16:u.next=19;break;case 18:console.warn("TS Packet missing SYNC_BYTE");case 19:i++,u.next=2;break;case 22:case"end":return u.stop()}},p[0],this,[[7,14]])}function s(e,t,n){return u["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.put(n,{sourceFile:e,payload:t});case 2:case"end":return r.stop()}},p[1],this)}function c(e,t,n){return u["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.put(n,{sourceFile:e,type:f["default"].ISO_IEC_11172_3_AUDIO,payload:t});case 2:case"end":return r.stop()}},p[2],this)}function l(e,t,n){return u["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.put(n,{sourceFile:e,type:f["default"].ISO_IEC_13818_1_RESERVED,payload:t});case 2:case"end":return r.stop()}},p[3],this)}var p=[a,s,c,l].map(u["default"].mark),m=[];return u["default"].mark(function _(){var f,h,p,g;return u["default"].wrap(function(u){for(;;)switch(u.prev=u.next){case 0:h=0;case 1:return u.t0=y.CLOSED,u.next=4,y.take(t);case 4:if(u.t1=f=u.sent,u.t0===u.t1){u.next=42;break}if("endOfFile"!==f.type){u.next=8;break}return u.abrupt("continue",1);case 8:if("error"!==f.payload.type){u.next=12;break}return u.next=11,y.put(r,f.payload);case 11:return u.abrupt("continue",1);case 12:if(h+=f.payload.length||f.payload.byteLength,m.push(new Uint8Array(f.payload)),g=v.combineUint8Arrays(m,h),p!==o.MPEGTS&&!d["default"].probeMPEGTS(g)){u.next=21;break}return p=o.MPEGTS,u.delegateYield(a(f.sourceFile,g,n),"t2",18);case 18:h=g.length%d["default"].TS_PACKET_SIZE,u.next=39;break;case 21:if(p!==o.ID3&&!d["default"].probeID3(g)){u.next=27;break}return p=o.ID3,u.delegateYield(s(f.sourceFile,g,i),"t3",24);case 24:h=0,u.next=39;break;case 27:if(p!==o.MP3&&!d["default"].probeMP3(g)){u.next=34;break}return e([{type:"audio",codec:"mp3"}]),p=o.MP3,u.delegateYield(c(f.sourceFile,g,r),"t4",31);case 31:h=0,u.next=39;break;case 34:if(p!==o.AAC&&!d["default"].probeAAC(g)){u.next=39;break}return e([{type:"audio",codec:"aac"}]),p=o.AAC,u.delegateYield(l(f.sourceFile,g,r),"t5",38);case 38:h=0;case 39:m=[g.subarray(g.length-h)],u.next=1;break;case 42:i.close(),n.close();case 45:case"end":return u.stop()}},_,this)})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),u=i(s);t["default"]=a;var o,c=n(35),f=i(c),l=n(98),d=i(l),h=n(176),p=n(24),v=r(p),m=n(8),y=r(m);!function(e){e[e.MPEGTS=0]="MPEGTS",e[e.AAC=1]="AAC",e[e.MP3=2]="MP3",e[e.ID3=3]="ID3"}(o||(o={}))},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r){return l=r,f["default"].mark(function i(){var r,a,s,c,l,d,p,m,_,g;return f["default"].wrap(function(i){for(;;)switch(i.prev=i.next){case 0:r={state:"zeroes-0",startCodePrefix:-1,maybeEndOfNalu:-1,naluBuffer:[],chunkFile:"",flags:{},currentPes:null,queueToSend:[],seiQueueToSend:[]},c=!0,l=0;case 3:return i.t0=v.CLOSED,i.next=6,v.take(e);case 6:if(i.t1=a=i.sent,i.t0===i.t1){i.next=44;break}if(r.currentPes=a,!c){i.next=15;break}c=!1,r.chunkFile=a.sourceFile,s=a.payload,i.next=27;break;case 15:if(1!==a.data_alignment_indicator){i.next=26;break}if(!(r.startCodePrefix>-1)){i.next=19;break}return o(r,s.subarray(r.startCodePrefix)),i.delegateYield(u(t,r),"t2",19);case 19:l=0,s=a.payload,r.state="zeroes-0",r.startCodePrefix=-1,r.chunkFile=a.sourceFile,i.next=27;break;case 26:s=h.concatUint8Array(s,a.payload);case 27:for(;l<s.byteLength;l++)d=s[l],p=y[r.state][d]||y[r.state]["default"]||{},p.newstate&&(r.state=p.newstate),p.method&&p.method.call(r,l,s);m=r.startCodePrefix-(s.byteLength-a.payload.byteLength),m>0&&(s=a.payload,l=s.byteLength,r.maybeEndOfNalu-=r.startCodePrefix-m,r.startCodePrefix=m);case 30:if(!r.queueToSend.length){i.next=36;break}return _=r.queueToSend.shift(),i.next=34,v.put(t,_);case 34:i.next=30;break;case 36:if(!r.seiQueueToSend.length){i.next=42;break}return g=r.seiQueueToSend.shift(),i.next=40,v.put(n,g);case 40:i.next=36;break;case 42:i.next=3;break;case 44:if(n.close(),c){i.next=48;break}return o(r,s.subarray(r.startCodePrefix)),i.delegateYield(u(t,r),"t3",48);case 48:t.close();case 49:case"end":return i.stop()}},i,this)})}function s(e){var t={sourceFile:e.chunkFile,pts:e.naluBuffer[0].pts,dts:e.naluBuffer[0].dts,flags:e.flags,nalus:e.naluBuffer};return e.flags={},e.naluBuffer=[],e.chunkFile=e.currentPes.sourceFile,t}function u(e,t){var n;return f["default"].wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=s(t),r.next=3,v.put(e,n);case 3:case"end":return r.stop()}},m[0],this)}function o(e,t){if(t.length){var n=128&t[0];if(!n){
var r=31&t[0],i={pts:e.currentPes.pts,dts:e.currentPes.dts,payload:t};switch(r){case 5:e.flags.hasKeyframe=!0;break;case 6:e.seiQueueToSend.push(i);break;case 7:e.flags.hasSPS=!0;break;case 8:e.flags.hasPPS=!0}var a=9===r;if(a&&e.naluBuffer.length){var u=s(e);e.queueToSend.push(u)}e.naluBuffer.push(i)}}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(9),f=i(c);t["default"]=a;var l,d=n(24),h=r(d),p=n(8),v=r(p),m=[u].map(f["default"].mark),y={"zeroes-0":{0:{newstate:"zeroes-1"}},"zeroes-1":{0:{newstate:"zeroes-2"},"default":{newstate:"zeroes-0"}},"zeroes-2":{0:{newstate:"zeroes-3plus",method:function(e){this.maybeEndOfNalu=e}},1:{newstate:"sync",method:function(e,t){if(this.startCodePrefix>=0){var n=t.subarray(this.startCodePrefix,e-2);o(this,n)}}},"default":{newstate:"zeroes-0"}},"zeroes-3plus":{0:{newstate:"zeroes-3plus"},1:{newstate:"sync",method:function(e,t){if(this.startCodePrefix>=0){var n=t.subarray(this.startCodePrefix,this.maybeEndOfNalu-2);o(this,n)}}},"default":{newstate:"zeroes-0"}},sync:{0:{newstate:"zeroes-1",method:function(e){this.startCodePrefix=e}},"default":{newstate:"zeroes-0",method:function(e){this.startCodePrefix=e}}}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){var r={},i=[],a=-1,o=void 0;return d["default"].mark(function l(){var h,v,m,y,g,k=this;return d["default"].wrap(function(l){for(;;)switch(l.prev=l.next){case 0:h=void 0;case 1:return l.next=3,p.take(t);case 3:if(l.t0=h=l.sent,l.t1=p.CLOSED,l.t0===l.t1){l.next=22;break}if(v=h.header.pid,0!==v){l.next=11;break}a=s(h),l.next=20;break;case 11:if(v!==a){l.next=15;break}return l.delegateYield(d["default"].mark(function x(){var t;return d["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o=u(h),t=[],b.each(o,function(e){e===_["default"].ISO_IEC_13818_1_RESERVED?t.push({type:"audio",codec:"aac"}):e===_["default"].ISO_IEC_11172_3_AUDIO||e===_["default"].ISO_IEC_13818_3_AUDIO?t.push({type:"audio",codec:"mp3"}):e===_["default"].ITU_T_H264&&t.push({type:"video",codec:"default"})}),e(t);case 4:if(!i.length){a.next=9;break}return h=i.shift(),a.delegateYield(c(n,o,r,h),"t0",7);case 7:a.next=4;break;case 9:case"end":return a.stop()}},x,k)})(),"t2",13);case 13:l.next=20;break;case 15:if(!o){l.next=19;break}return l.delegateYield(c(n,o,r,h),"t3",17);case 17:l.next=20;break;case 19:i.push(h);case 20:l.next=1;break;case 22:m=b.keys(o),y=0;case 24:if(!(y<m.length)){l.next=30;break}return g=parseInt(m[y]),l.delegateYield(f(n,o,r,g),"t4",27);case 27:y++,l.next=24;break;case 30:n.close();case 31:case"end":return l.stop()}},l,this)})}function s(e){o(e);var t=0;if(t|=(15&e.payload[1])<<4,t|=(240&e.payload[2])>>4,t>13)throw new Error("Multiple PMT/NIT entries not supported");var n=0;return n|=(31&e.payload[10])<<8|e.payload[11]}function u(e){var t={};o(e);for(var n=e.payload,r=(15&n[1])<<8|n[2],i=r+3,a=(15&n[10])<<8|n[11],s=12+a;i>s;){var u=(31&n[s+1])<<8|n[s+2];t[u]=n[s],s+=((15&n[s+3])<<8|n[s+4])+5}return t}function o(e){var t=1;t+=e.payload[0],e.payload=e.payload.subarray(t)}function c(e,t,n,r){var i;return d["default"].wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=r.header.pid,t[i]){a.next=4;break}return a.abrupt("return");case 4:if(n[i]||(n[i]=[]),!r.header.payloadStart){a.next=8;break}return a.delegateYield(f(e,t,n,i),"t0",7);case 7:n[i]=[];case 8:n[i].push(r);case 9:case"end":return a.stop()}},g[0],this)}function f(e,t,n,r){var i,a,s,u,o,c,f,l;return d["default"].wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(i=n[r],b.isArray(i)&&i.length){d.next=3;break}return d.abrupt("return");case 3:for(a=t[r],s=b.reduce(i,function(e,t){return t.header.containsPayload?e+t.payload.length:e},0),u=new Uint8Array(s),o=i[0].sourceFile,c=0;i.length;)f=i.shift(),f.header.containsPayload&&(u.set(f.payload,c),c+=f.payload.length);if(l=m["default"].parsePES(a,u)){d.next=12;break}return d.abrupt("return");case 12:return l.sourceFile=o,console.assert(e.closed===!1,"PES Packet Channel should not be closed"),d.next=16,p.put(e,l);case 16:case"end":return d.stop()}},g[1],this)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(9),d=i(l);t["default"]=a;var h=n(8),p=r(h),v=n(174),m=i(v),y=n(35),_=i(y),g=[c,f].map(d["default"].mark),b=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={PRIVATE_STREAM_1:189,PADDING_STREAM:190,PRIVATE_STREAM_2:191},i={readTS:function(e){var t=(14&e[0])*(1<<29),n=(255&e[1])<<22|(254&e[2])<<14|(255&e[3])<<7|(255&e[4])>>>1;return t+n},parsePES:function(e,t){var n=t[0]<<16|t[1]<<8|t[2];if(1===n){var i=t[3];t[4]<<8|t[5];if(i!==r.PADDING_STREAM&&i!==r.PRIVATE_STREAM_2){var a,s,u=t[7]>>>6,o=(4&t[6])>>>2,c=t[8]+9;2===u?(a=this.readTS(t.subarray(9)),s=a):3===u&&(a=this.readTS(t.subarray(9)),s=this.readTS(t.subarray(14)));var f={id:i,type:e,pts:a,dts:s,data_alignment_indicator:o,payload:t.subarray(c)};return f}}}};t["default"]=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,r,i){var a=!1,s=!1,o=[];return u["default"].mark(function f(){var d,h;return u["default"].wrap(function(u){for(;;)switch(u.prev=u.next){case 0:d=void 0;case 1:return u.t0=l.CLOSED,u.next=4,l.take(t);case 4:if(u.t1=d=u.sent,u.t0===u.t1){u.next=42;break}if(h=d.type,"error"!==h){u.next=11;break}return u.next=10,l.put(n,d);case 10:return u.abrupt("break",42);case 11:if(h!==c["default"].ISO_IEC_13818_1_RESERVED){u.next=17;break}return a||(a=!0,o.push({type:"audio",codec:"aac"})),u.next=15,l.put(n,d);case 15:u.next=39;break;case 17:if(h!==c["default"].ISO_IEC_11172_3_AUDIO&&h!==c["default"].ISO_IEC_13818_3_AUDIO){u.next=23;break}return a||(a=!0,o.push({type:"audio",codec:"mp3"})),u.next=21,l.put(n,d);case 21:u.next=39;break;case 23:if(h!==c["default"].ITU_T_H264){u.next=29;break}return s||(s=!0,o.push({type:"video",codec:"default"})),u.next=27,l.put(r,d);case 27:u.next=39;break;case 29:if(h!==c["default"].METADATA_IN_PES){u.next=34;break}return u.next=32,l.put(i,d);case 32:u.next=39;break;case 34:if("error"!==h){u.next=39;break}return u.next=37,l.put(i,d);case 37:u.next=39;break;case 39:2===o.length&&e(o),u.next=1;break;case 42:e(o),r.close(),i.close(),n.close();case 46:case"end":return u.stop()}},f,this)})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),u=i(s);t.PesPacketSplitter=a;var o=n(35),c=i(o),f=n(8),l=r(f)},function(e,t){"use strict";function n(e){var t={syncByte:e[0],payloadStart:0!==(64&e[1]),priority:0!==(32&e[1]),pid:(31&e[1])<<8|e[2],adaptationField:0!==(32&e[3]),containsPayload:0!==(16&e[3]),continuityCounter:15&e[3]},n=4;if(t.adaptationField){n+=1;var r=e[4];n+=r}var i;i=t.containsPayload?e.subarray(n):null;var a={header:t,payload:i};return a}Object.defineProperty(t,"__esModule",{value:!0}),t.TsPacket=n},function(e,t,n){e.exports={"default":n(187),__esModule:!0}},function(e,t,n){e.exports={"default":n(188),__esModule:!0}},function(e,t,n){e.exports={"default":n(189),__esModule:!0}},function(e,t,n){e.exports={"default":n(190),__esModule:!0}},function(e,t,n){e.exports={"default":n(191),__esModule:!0}},function(e,t,n){e.exports={"default":n(192),__esModule:!0}},function(e,t,n){e.exports={"default":n(193),__esModule:!0}},function(e,t,n){e.exports={"default":n(195),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(177),a=r(i);t["default"]=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a["default"])(e)}},function(e,t,n){(function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=n(15),s=i(a),u=n(183),o=i(u),c=n(181),f=i(c),l=n(103),d=i(l),h=n(101),p=i(h),v=n(100),m=i(v);!function(e){function n(e,t,n,r){var i=(0,f["default"])((t||a).prototype),s=new b(r||[]);return i._invoke=y(e,n,s),i}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function a(){}function u(){}function c(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function h(e){this.arg=e}function v(e){function t(t,n){var r=e[t](n),i=r.value;return i instanceof h?s["default"].resolve(i.arg).then(a,u):s["default"].resolve(i).then(function(e){return r.value=e,r})}function n(e,n){function r(){return t(e,n)}return i=i?i.then(r,r):new s["default"](function(e){e(r())})}"object"===("undefined"==typeof r?"undefined":(0,d["default"])(r))&&r.domain&&(t=r.domain.bind(t));var i,a=t.bind(e,"next"),u=t.bind(e,"throw");t.bind(e,"return");this._invoke=n}function y(e,t,n){var r=M;return function(a,s){if(r===L)throw new Error("Generator is already running");if(r===C){if("throw"===a)throw s;return x()}for(;;){var u=n.delegate;if(u){if("return"===a||"throw"===a&&u.iterator[a]===E){n.delegate=null;var o=u.iterator["return"];if(o){var c=i(o,u.iterator,s);if("throw"===c.type){a="throw",s=c.arg;continue}}if("return"===a)continue}var c=i(u.iterator[a],u.iterator,s);if("throw"===c.type){n.delegate=null,a="throw",s=c.arg;continue}a="next",s=E;var f=c.arg;if(!f.done)return r=I,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===a)n._sent=s,r===I?n.sent=s:n.sent=E;else if("throw"===a){if(r===M)throw r=C,s;n.dispatchException(s)&&(a="next",s=E)}else"return"===a&&n.abrupt("return",s);r=L;var c=i(e,t,n);if("normal"===c.type){r=n.done?C:I;var f={value:c.arg,done:n.done};if(c.arg!==P)return f;n.delegate&&"next"===a&&(s=E)}else"throw"===c.type&&(r=C,a="throw",s=c.arg)}}}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function g(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(T.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=E,i.done=!0,i};return r.next=r}}return{next:x}}function x(){return{value:E,done:!0}}var E,T=Object.prototype.hasOwnProperty,w="function"==typeof m["default"]&&p["default"]||"@@iterator",S="object"===(0,d["default"])(t),A=e.regeneratorRuntime;if(A)return void(S&&(t.exports=A));A=e.regeneratorRuntime=S?t.exports:{},A.wrap=n;var M="suspendedStart",I="suspendedYield",L="executing",C="completed",P={},O=c.prototype=a.prototype;u.prototype=O.constructor=c,c.constructor=u,u.displayName="GeneratorFunction",A.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===u||"GeneratorFunction"===(t.displayName||t.name):!1},A.mark=function(e){return o["default"]?(0,o["default"])(e,c):e.__proto__=c,e.prototype=(0,f["default"])(O),e},A.awrap=function(e){return new h(e)},l(v.prototype),A.async=function(e,t,r,i){var a=new v(n(e,t,r,i));return A.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},l(O),O[w]=function(){return this},O.toString=function(){return"[object Generator]"},A.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},A.values=k,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=E,this.done=!1,this.delegate=null,this.tryEntries.forEach(g),!e)for(var t in this)"t"===t.charAt(0)&&T.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=E)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return a.type="throw",a.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=T.call(i,"catchLoc"),u=T.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&T.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?this.next=i.finallyLoc:this.complete(a),P},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),g(n),P}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;g(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},P}}}("object"===("undefined"==typeof e?"undefined":(0,d["default"])(e))?e:"object"===("undefined"==typeof window?"undefined":(0,d["default"])(window))?window:"object"===("undefined"==typeof self?"undefined":(0,d["default"])(self))?self:void 0)}).call(t,function(){return this}(),n(311)(e),n(306))},function(e,t,n){n(38),n(222),e.exports=n(10).Array.from},function(e,t,n){n(54),n(38),e.exports=n(220)},function(e,t,n){n(54),n(38),e.exports=n(221)},function(e,t,n){var r=n(10),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(224);var r=n(10).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){n(225);var r=n(10).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){n(226),e.exports=n(10).Object.setPrototypeOf},function(e,t,n){n(117),n(38),n(54),n(227),e.exports=n(10).Promise},function(e,t,n){n(231),e.exports=n(10).setImmediate},function(e,t,n){n(228),n(117),n(229),n(230),e.exports=n(10).Symbol},function(e,t,n){n(38),n(54),e.exports=n(81).f("iterator")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(27),i=n(78),a=n(219);e.exports=function(e){return function(t,n,s){var u,o=r(t),c=i(o.length),f=a(s,c);if(e&&n!=n){for(;c>f;)if(u=o[f++],u!=u)return!0}else for(;c>f;f++)if((e||f in o)&&o[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(19),i=n(37);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(51),i=n(112),a=n(73);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,u=n(e),o=a.f,c=0;u.length>c;)o.call(e,s=u[c++])&&t.push(s);return t}},function(e,t,n){var r=n(28),i=n(107),a=n(106),s=n(17),u=n(78),o=n(82),c={},f={},t=e.exports=function(e,t,n,l,d){var h,p,v,m,y=d?function(){return e}:o(e),_=r(n,l,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(h=u(e.length);h>g;g++)if(m=t?_(s(p=e[g])[0],p[1]):_(e[g]),m===c||m===f)return m}else for(v=y.call(e);!(p=v.next()).done;)if(m=i(v,_,p.value,t),m===c||m===f)return m};t.BREAK=c,t.RETURN=f},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(36);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(36);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(72),i=n(37),a=n(52),s={};n(26)(s,n(11)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(51),i=n(27);e.exports=function(e,t){for(var n,a=i(e),s=r(a),u=s.length,o=0;u>o;)if(a[n=s[o++]]===t)return n}},function(e,t,n){var r=n(53)("meta"),i=n(29),a=n(25),s=n(19).f,u=0,o=Object.isExtensible||function(){return!0},c=!n(49)(function(){return o(Object.preventExtensions({}))}),f=function(e){s(e,r,{value:{i:"O"+ ++u,w:{}}})},l=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!o(e))return"F";if(!t)return"E";f(e)}return e[r].i},d=function(e,t){if(!a(e,r)){if(!o(e))return!0;if(!t)return!1;f(e)}return e[r].w},h=function(e){return c&&p.NEED&&o(e)&&!a(e,r)&&f(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:l,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(13),i=n(76).set,a=r.MutationObserver||r.WebKitMutationObserver,s=r.process,u=r.Promise,o="process"==n(36)(s);e.exports=function(){var e,t,n,c=function(){var r,i;for(o&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(a){throw e?n():t=void 0,a}}t=void 0,r&&r.enter()};if(o)n=function(){s.nextTick(c)};else if(a){var f=!0,l=document.createTextNode("");new a(c).observe(l,{characterData:!0}),n=function(){l.data=f=!f}}else if(u&&u.resolve){var d=u.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(19),i=n(17),a=n(51);e.exports=n(21)?Object.defineProperties:function(e,t){i(e);for(var n,s=a(t),u=s.length,o=0;u>o;)r.f(e,n=s[o++],t[n]);return e}},function(e,t,n){var r=n(27),i=n(111).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?u(e):i(r(e))}},function(e,t,n){var r=n(25),i=n(116),a=n(74)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(26);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(10),a=n(19),s=n(21),u=n(11)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[u]&&a.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(17),i=n(67),a=n(11)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||void 0==(n=r(s)[a])?t:i(n)}},function(e,t,n){var r=n(77),i=n(69);e.exports=function(e){return function(t,n){var a,s,u=String(i(t)),o=r(n),c=u.length;return 0>o||o>=c?e?"":void 0:(a=u.charCodeAt(o),55296>a||a>56319||o+1===c||(s=u.charCodeAt(o+1))<56320||s>57343?e?u.charAt(o):a:e?u.slice(o,o+2):(a-55296<<10)+(s-56320)+65536)}}},function(e,t,n){var r=n(77),i=Math.max,a=Math.min;e.exports=function(e,t){return e=r(e),0>e?i(e+t,0):a(e,t)}},function(e,t,n){var r=n(17),i=n(82);e.exports=n(10).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var r=n(68),i=n(11)("iterator"),a=n(30);e.exports=n(10).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(r(t))}},function(e,t,n){"use strict";var r=n(28),i=n(22),a=n(116),s=n(107),u=n(106),o=n(78),c=n(201),f=n(82);i(i.S+i.F*!n(109)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,l,d=a(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,y=0,_=f(d);if(m&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==_||h==Array&&u(_))for(t=o(d.length),n=new h(t);t>y;y++)c(n,y,m?v(d[y],y):d[y]);else for(l=_.call(d),n=new h;!(i=l.next()).done;y++)c(n,y,m?s(l,v,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){"use strict";var r=n(198),i=n(208),a=n(30),s=n(27);e.exports=n(108)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(22);r(r.S,"Object",{create:n(72)})},function(e,t,n){var r=n(22);r(r.S+r.F*!n(21),"Object",{defineProperty:n(19).f})},function(e,t,n){var r=n(22);r(r.S,"Object",{setPrototypeOf:n(115).set})},function(e,t,n){"use strict";var r,i,a,s=n(50),u=n(13),o=n(28),c=n(68),f=n(22),l=n(29),d=(n(17),n(67)),h=n(199),p=n(203),v=(n(115).set,n(217)),m=n(76).set,y=n(211)(),_="Promise",g=u.TypeError,b=u.process,k=u[_],b=u.process,x="process"==c(b),E=function(){},T=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[n(11)("species")]=function(e){e(E,E)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(r){}}(),w=function(e,t){return e===t||e===k&&t===a},S=function(e){var t;return l(e)&&"function"==typeof(t=e.then)?t:!1},A=function(e){return w(k,e)?new M(e):new i(e)},M=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw g("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},I=function(e){try{e()}catch(t){return{error:t}}},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,a=0,s=function(t){var n,a,s=i?t.ok:t.fail,u=t.resolve,o=t.reject,c=t.domain;try{s?(i||(2==e._h&&O(e),e._h=1),s===!0?n=r:(c&&c.enter(),n=s(r),c&&c.exit()),n===t.promise?o(g("Promise-chain cycle")):(a=S(n))?a.call(n,u,o):u(n)):o(r)}catch(f){o(f)}};n.length>a;)s(n[a++]);e._c=[],e._n=!1,t&&!e._h&&C(e)})}},C=function(e){m.call(u,function(){var t,n,r,i=e._v;if(P(e)&&(t=I(function(){x?b.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=x||P(e)?2:1),e._a=void 0,t)throw t.error})},P=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!P(t.promise))return!1;return!0},O=function(e){m.call(u,function(){var t;x?b.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},R=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},D=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw g("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,o(D,r,1),o(R,r,1))}catch(i){R.call(r,i)}}):(n._v=e,n._s=1,L(n,!1))}catch(r){R.call({_w:n,_d:!1},r)}}};T||(k=function(e){h(this,k,_,"_h"),d(e),r.call(this);try{e(o(D,this,1),o(R,this,1))}catch(t){R.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(215)(k.prototype,{then:function(e,t){var n=A(v(this,k));return n.ok="function"==typeof e?e:!0,n.fail="function"==typeof t&&t,n.domain=x?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),M=function(){var e=new r;this.promise=e,this.resolve=o(D,e,1),this.reject=o(R,e,1)}),f(f.G+f.W+f.F*!T,{Promise:k}),n(52)(k,_),n(216)(_),a=n(10)[_],f(f.S+f.F*!T,_,{reject:function(e){var t=A(this),n=t.reject;return n(e),t.promise}}),f(f.S+f.F*(s||!T),_,{resolve:function(e){if(e instanceof k&&w(e.constructor,this))return e;var t=A(this),n=t.resolve;return n(e),t.promise}}),f(f.S+f.F*!(T&&n(109)(function(e){k.all(e)["catch"](E)})),_,{all:function(e){var t=this,n=A(t),r=n.resolve,i=n.reject,a=I(function(){var n=[],a=0,s=1;p(e,!1,function(e){var u=a++,o=!1;n.push(void 0),s++,t.resolve(e).then(function(e){o||(o=!0,n[u]=e,--s||r(n))},i)}),--s||r(n)});return a&&i(a.error),n.promise},race:function(e){var t=this,n=A(t),r=n.reject,i=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t,n){"use strict";var r=n(13),i=n(25),a=n(21),s=n(22),u=n(114),o=n(210).KEY,c=n(49),f=n(75),l=n(52),d=n(53),h=n(11),p=n(81),v=n(80),m=n(209),y=n(202),_=n(206),g=n(17),b=n(27),k=n(79),x=n(37),E=n(72),T=n(213),w=n(110),S=n(19),A=n(51),M=w.f,I=S.f,L=T.f,C=r.Symbol,P=r.JSON,O=P&&P.stringify,R="prototype",D=h("_hidden"),U=h("toPrimitive"),B={}.propertyIsEnumerable,N=f("symbol-registry"),F=f("symbols"),j=f("op-symbols"),q=Object[R],Y="function"==typeof C,V=r.QObject,X=!V||!V[R]||!V[R].findChild,Q=a&&c(function(){return 7!=E(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=M(q,t);r&&delete q[t],I(e,t,n),r&&e!==q&&I(q,t,r)}:I,G=function(e){var t=F[e]=E(C[R]);return t._k=e,t},K=Y&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},W=function(e,t,n){return e===q&&W(j,t,n),g(e),t=k(t,!0),g(n),i(F,t)?(n.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),n=E(n,{enumerable:x(0,!1)})):(i(e,D)||I(e,D,x(1,{})),e[D][t]=!0),Q(e,t,n)):I(e,t,n)},z=function(e,t){g(e);for(var n,r=y(t=b(t)),i=0,a=r.length;a>i;)W(e,n=r[i++],t[n]);return e},H=function(e,t){return void 0===t?E(e):z(E(e),t)},J=function(e){var t=B.call(this,e=k(e,!0));return this===q&&i(F,e)&&!i(j,e)?!1:t||!i(this,e)||!i(F,e)||i(this,D)&&this[D][e]?t:!0},$=function(e,t){if(e=b(e),t=k(t,!0),e!==q||!i(F,t)||i(j,t)){var n=M(e,t);return!n||!i(F,t)||i(e,D)&&e[D][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=L(b(e)),r=[],a=0;n.length>a;)i(F,t=n[a++])||t==D||t==o||r.push(t);return r},ee=function(e){for(var t,n=e===q,r=L(n?j:b(e)),a=[],s=0;r.length>s;)i(F,t=r[s++])&&(n?i(q,t):!0)&&a.push(F[t]);return a};Y||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(j,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),Q(this,e,x(1,n))};return a&&X&&Q(q,e,{configurable:!0,set:t}),G(e)},u(C[R],"toString",function(){return this._k}),w.f=$,S.f=W,n(111).f=T.f=Z,n(73).f=J,n(112).f=ee,a&&!n(50)&&u(q,"propertyIsEnumerable",J,!0),p.f=function(e){return G(h(e))}),s(s.G+s.W+s.F*!Y,{Symbol:C});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var te=A(h.store),ne=0;te.length>ne;)v(te[ne++]);s(s.S+s.F*!Y,"Symbol",{"for":function(e){return i(N,e+="")?N[e]:N[e]=C(e)},keyFor:function(e){if(K(e))return m(N,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){X=!0},useSimple:function(){X=!1}}),s(s.S+s.F*!Y,"Object",{create:H,defineProperty:W,defineProperties:z,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),P&&s(s.S+s.F*(!Y||c(function(){var e=C();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!K(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&_(t)||(t=function(e,t){return n&&(t=n.call(this,e,t)),K(t)?void 0:t}),r[1]=t,O.apply(P,r)}}}),C[R][U]||n(26)(C[R],U,C[R].valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(e,t,n){n(80)("asyncIterator")},function(e,t,n){n(80)("observable")},function(e,t,n){var r=n(22),i=n(76);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function n(){c&&s&&(c=!1,s.length?o=s.concat(o):f=-1,o.length&&r())}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=o.length;t;){for(s=o,o=[];++f<t;)s&&s[f].run();f=-1,t=o.length}s=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function a(){}var s,u=e.exports={},o=[],c=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new i(e,t)),1!==o.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},,,,function(e,t,n){var r,i;(function(){function n(e){function t(t,n,r,i,a,s){for(;a>=0&&s>a;a+=e){var u=i?i[a]:a;r=n(r,t[u],u,t)}return r}return function(n,r,i,a){r=E(r,a,4);var s=!L(n)&&x.keys(n),u=(s||n).length,o=e>0?0:u-1;return arguments.length<3&&(i=n[s?s[o]:o],o+=e),t(n,r,i,s,o,u)}}function a(e){return function(t,n,r){n=T(n,r);for(var i=I(t),a=e>0?0:i-1;a>=0&&i>a;a+=e)if(n(t[a],a,t))return a;return-1}}function s(e,t,n){return function(r,i,a){var s=0,u=I(r);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+u,s):u=a>=0?Math.min(a+1,u):a+u+1;else if(n&&a&&u)return a=n(r,i),r[a]===i?a:-1;if(i!==i)return a=t(p.call(r,s,u),x.isNaN),a>=0?a+s:-1;for(a=e>0?s:u-1;a>=0&&u>a;a+=e)if(r[a]===i)return a;return-1}}function u(e,t){var n=D.length,r=e.constructor,i=x.isFunction(r)&&r.prototype||l,a="constructor";for(x.has(e,a)&&!x.contains(t,a)&&t.push(a);n--;)a=D[n],a in e&&e[a]!==i[a]&&!x.contains(t,a)&&t.push(a)}var o=this,c=o._,f=Array.prototype,l=Object.prototype,d=Function.prototype,h=f.push,p=f.slice,v=l.toString,m=l.hasOwnProperty,y=Array.isArray,_=Object.keys,g=d.bind,b=Object.create,k=function(){},x=function(e){return e instanceof x?e:this instanceof x?void(this._wrapped=e):new x(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=x),t._=x,x.VERSION="1.8.3";var E=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}},T=function(e,t,n){return null==e?x.identity:x.isFunction(e)?E(e,t,n):x.isObject(e)?x.matcher(e):x.property(e)};x.iteratee=function(e,t){return T(e,t,1/0)};var w=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var a=arguments[i],s=e(a),u=s.length,o=0;u>o;o++){var c=s[o];t&&void 0!==n[c]||(n[c]=a[c])}return n}},S=function(e){if(!x.isObject(e))return{};if(b)return b(e);k.prototype=e;var t=new k;return k.prototype=null,t},A=function(e){return function(t){return null==t?void 0:t[e]}},M=Math.pow(2,53)-1,I=A("length"),L=function(e){var t=I(e);return"number"==typeof t&&t>=0&&M>=t};x.each=x.forEach=function(e,t,n){t=E(t,n);var r,i;if(L(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var a=x.keys(e);for(r=0,i=a.length;i>r;r++)t(e[a[r]],a[r],e)}return e},x.map=x.collect=function(e,t,n){t=T(t,n);for(var r=!L(e)&&x.keys(e),i=(r||e).length,a=Array(i),s=0;i>s;s++){var u=r?r[s]:s;a[s]=t(e[u],u,e)}return a},x.reduce=x.foldl=x.inject=n(1),x.reduceRight=x.foldr=n(-1),x.find=x.detect=function(e,t,n){var r;return r=L(e)?x.findIndex(e,t,n):x.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},x.filter=x.select=function(e,t,n){var r=[];return t=T(t,n),x.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},x.reject=function(e,t,n){return x.filter(e,x.negate(T(t)),n)},x.every=x.all=function(e,t,n){t=T(t,n);for(var r=!L(e)&&x.keys(e),i=(r||e).length,a=0;i>a;a++){var s=r?r[a]:a;if(!t(e[s],s,e))return!1}return!0},x.some=x.any=function(e,t,n){t=T(t,n);for(var r=!L(e)&&x.keys(e),i=(r||e).length,a=0;i>a;a++){var s=r?r[a]:a;if(t(e[s],s,e))return!0}return!1},x.contains=x.includes=x.include=function(e,t,n,r){return L(e)||(e=x.values(e)),("number"!=typeof n||r)&&(n=0),x.indexOf(e,t,n)>=0;
},x.invoke=function(e,t){var n=p.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matcher(t))},x.findWhere=function(e,t){return x.find(e,x.matcher(t))},x.max=function(e,t,n){var r,i,a=-(1/0),s=-(1/0);if(null==t&&null!=e){e=L(e)?e:x.values(e);for(var u=0,o=e.length;o>u;u++)r=e[u],r>a&&(a=r)}else t=T(t,n),x.each(e,function(e,n,r){i=t(e,n,r),(i>s||i===-(1/0)&&a===-(1/0))&&(a=e,s=i)});return a},x.min=function(e,t,n){var r,i,a=1/0,s=1/0;if(null==t&&null!=e){e=L(e)?e:x.values(e);for(var u=0,o=e.length;o>u;u++)r=e[u],a>r&&(a=r)}else t=T(t,n),x.each(e,function(e,n,r){i=t(e,n,r),(s>i||i===1/0&&a===1/0)&&(a=e,s=i)});return a},x.shuffle=function(e){for(var t,n=L(e)?e:x.values(e),r=n.length,i=Array(r),a=0;r>a;a++)t=x.random(0,a),t!==a&&(i[a]=i[t]),i[t]=n[a];return i},x.sample=function(e,t,n){return null==t||n?(L(e)||(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))},x.sortBy=function(e,t,n){return t=T(t,n),x.pluck(x.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,n,r){var i={};return n=T(n,r),x.each(t,function(r,a){var s=n(r,a,t);e(i,r,s)}),i}};x.groupBy=C(function(e,t,n){x.has(e,n)?e[n].push(t):e[n]=[t]}),x.indexBy=C(function(e,t,n){e[n]=t}),x.countBy=C(function(e,t,n){x.has(e,n)?e[n]++:e[n]=1}),x.toArray=function(e){return e?x.isArray(e)?p.call(e):L(e)?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:L(e)?e.length:x.keys(e).length},x.partition=function(e,t,n){t=T(t,n);var r=[],i=[];return x.each(e,function(e,n,a){(t(e,n,a)?r:i).push(e)}),[r,i]},x.first=x.head=x.take=function(e,t,n){return null!=e?null==t||n?e[0]:x.initial(e,e.length-t):void 0},x.initial=function(e,t,n){return p.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},x.last=function(e,t,n){return null!=e?null==t||n?e[e.length-1]:x.rest(e,Math.max(0,e.length-t)):void 0},x.rest=x.tail=x.drop=function(e,t,n){return p.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var P=function(e,t,n,r){for(var i=[],a=0,s=r||0,u=I(e);u>s;s++){var o=e[s];if(L(o)&&(x.isArray(o)||x.isArguments(o))){t||(o=P(o,t,n));var c=0,f=o.length;for(i.length+=f;f>c;)i[a++]=o[c++]}else n||(i[a++]=o)}return i};x.flatten=function(e,t){return P(e,t,!1)},x.without=function(e){return x.difference(e,p.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=T(n,r));for(var i=[],a=[],s=0,u=I(e);u>s;s++){var o=e[s],c=n?n(o,s,e):o;t?(s&&a===c||i.push(o),a=c):n?x.contains(a,c)||(a.push(c),i.push(o)):x.contains(i,o)||i.push(o)}return i},x.union=function(){return x.uniq(P(arguments,!0,!0))},x.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=I(e);i>r;r++){var a=e[r];if(!x.contains(t,a)){for(var s=1;n>s&&x.contains(arguments[s],a);s++);s===n&&t.push(a)}}return t},x.difference=function(e){var t=P(arguments,!0,!0,1);return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(e){for(var t=e&&x.max(e,I).length||0,n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,r);return n},x.object=function(e,t){for(var n={},r=0,i=I(e);i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.findIndex=a(1),x.findLastIndex=a(-1),x.sortedIndex=function(e,t,n,r){n=T(n,r,1);for(var i=n(t),a=0,s=I(e);s>a;){var u=Math.floor((a+s)/2);n(e[u])<i?a=u+1:s=u}return a},x.indexOf=s(1,x.findIndex,x.sortedIndex),x.lastIndexOf=s(-1,x.findLastIndex),x.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;r>a;a++,e+=n)i[a]=e;return i};var O=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=S(e.prototype),s=e.apply(a,i);return x.isObject(s)?s:a};x.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,p.call(arguments,1));if(!x.isFunction(e))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function(){return O(e,r,t,this,n.concat(p.call(arguments)))};return r},x.partial=function(e){var t=p.call(arguments,1),n=function(){for(var r=0,i=t.length,a=Array(i),s=0;i>s;s++)a[s]=t[s]===x?arguments[r++]:t[s];for(;r<arguments.length;)a.push(arguments[r++]);return O(e,n,this,this,a)};return n},x.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=x.bind(e[n],e);return e},x.memoize=function(e,t){var n=function(r){var i=n.cache,a=""+(t?t.apply(this,arguments):r);return x.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n},x.delay=function(e,t){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(e,t,n){var r,i,a,s=null,u=0;n||(n={});var o=function(){u=n.leading===!1?0:x.now(),s=null,a=e.apply(r,i),s||(r=i=null)};return function(){var c=x.now();u||n.leading!==!1||(u=c);var f=t-(c-u);return r=this,i=arguments,0>=f||f>t?(s&&(clearTimeout(s),s=null),u=c,a=e.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(o,f)),a}},x.debounce=function(e,t,n){var r,i,a,s,u,o=function(){var c=x.now()-s;t>c&&c>=0?r=setTimeout(o,t-c):(r=null,n||(u=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,s=x.now();var c=n&&!r;return r||(r=setTimeout(o,t)),c&&(u=e.apply(a,i),a=i=null),u}},x.wrap=function(e,t){return x.partial(t,e)},x.negate=function(e){return function(){return!e.apply(this,arguments)}},x.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},x.once=x.partial(x.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(e){if(!x.isObject(e))return[];if(_)return _(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return R&&u(e,t),t},x.allKeys=function(e){if(!x.isObject(e))return[];var t=[];for(var n in e)t.push(n);return R&&u(e,t),t},x.values=function(e){for(var t=x.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},x.mapObject=function(e,t,n){t=T(t,n);for(var r,i=x.keys(e),a=i.length,s={},u=0;a>u;u++)r=i[u],s[r]=t(e[r],r,e);return s},x.pairs=function(e){for(var t=x.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){for(var t={},n=x.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=w(x.allKeys),x.extendOwn=x.assign=w(x.keys),x.findKey=function(e,t,n){t=T(t,n);for(var r,i=x.keys(e),a=0,s=i.length;s>a;a++)if(r=i[a],t(e[r],r,e))return r},x.pick=function(e,t,n){var r,i,a={},s=e;if(null==s)return a;x.isFunction(t)?(i=x.allKeys(s),r=E(t,n)):(i=P(arguments,!1,!1,1),r=function(e,t,n){return t in n},s=Object(s));for(var u=0,o=i.length;o>u;u++){var c=i[u],f=s[c];r(f,c,s)&&(a[c]=f)}return a},x.omit=function(e,t,n){if(x.isFunction(t))t=x.negate(t);else{var r=x.map(P(arguments,!1,!1,1),String);t=function(e,t){return!x.contains(r,t)}}return x.pick(e,t,n)},x.defaults=w(x.allKeys,!0),x.create=function(e,t){var n=S(e);return t&&x.extendOwn(n,t),n},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e},x.isMatch=function(e,t){var n=x.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),a=0;r>a;a++){var s=n[a];if(t[s]!==i[s]||!(s in i))return!1}return!0};var U=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=v.call(e);if(i!==v.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,u=t.constructor;if(s!==u&&!(x.isFunction(s)&&s instanceof s&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var o=n.length;o--;)if(n[o]===e)return r[o]===t;if(n.push(e),r.push(t),a){if(o=e.length,o!==t.length)return!1;for(;o--;)if(!U(e[o],t[o],n,r))return!1}else{var c,f=x.keys(e);if(o=f.length,x.keys(t).length!==o)return!1;for(;o--;)if(c=f[o],!x.has(t,c)||!U(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};x.isEqual=function(e,t){return U(e,t)},x.isEmpty=function(e){return null==e?!0:L(e)&&(x.isArray(e)||x.isString(e)||x.isArguments(e))?0===e.length:0===x.keys(e).length},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=y||function(e){return"[object Array]"===v.call(e)},x.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){x["is"+e]=function(t){return v.call(t)==="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return x.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(e){return"function"==typeof e||!1}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!==+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===v.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return null!=e&&m.call(e,t)},x.noConflict=function(){return o._=c,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.noop=function(){},x.property=A,x.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},x.matcher=x.matches=function(e){return e=x.extendOwn({},e),function(t){return x.isMatch(t,e)}},x.times=function(e,t,n){var r=Array(Math.max(0,e));t=E(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=x.invert(B),F=function(e){var t=function(t){return e[t]},n="(?:"+x.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};x.escape=F(B),x.unescape=F(N),x.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),x.isFunction(r)?r.call(e):r};var j=0;x.uniqueId=function(e){var t=++j+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,Y={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,X=function(e){return"\\"+Y[e]};x.template=function(e,t,n){!t&&n&&(t=n),t=x.defaults({},t,x.templateSettings);var r=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(t,n,r,s,u){return a+=e.slice(i,u).replace(V,X),i=u+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(a+="';\n"+s+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=new Function(t.variable||"obj","_",a)}catch(u){throw u.source=a,u}var o=function(e){return s.call(this,e,x)},c=t.variable||"obj";return o.source="function("+c+"){\n"+a+"}",o},x.chain=function(e){var t=x(e);return t._chain=!0,t};var Q=function(e,t){return e._chain?x(t).chain():t};x.mixin=function(e){x.each(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return h.apply(e,arguments),Q(this,n.apply(x,e))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=f[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Q(this,n)}}),x.each(["concat","join","slice"],function(e){var t=f[e];x.prototype[e]=function(){return Q(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return x}.apply(t,r),!(void 0!==i&&(e.exports=i))}).call(this)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},,,,,function(e,t,n){var r,i;r=[],i=function(){var e=!0,t={media:{TextSourceBuffer:{isTypeSupported:function(){return!1}}},asserts:{assert:function(){}},util:{EventManager:function(){this.destroy=function(){},this.listen=function(e,t,n){e.addEventListener(t,n,!1)}},PublicPromise:function(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}}};return t.media.MediaSourceEngine=function(e,n){t.asserts.assert("open"==e.readyState,"The MediaSource should be in the 'open' state."),this.mediaSource_=e,this.textTrack_=n,this.sourceBuffers_={},this.queues_={},this.eventManager_=new t.util.EventManager,this.destroyed_=!1},t.media.MediaSourceEngine.Operation,t.media.MediaSourceEngine.isTypeSupported=function(e){return t.media.TextSourceBuffer.isTypeSupported(e)||MediaSource.isTypeSupported(e)},t.media.MediaSourceEngine.support=function(){var e={basic:!!window.MediaSource};if(e.basic){var n=['video/mp4; codecs="avc1.42E01E"','audio/mp4; codecs="mp4a.40.2"','video/webm; codecs="vp8"','video/webm; codecs="vp9"','audio/webm; codecs="vorbis"','audio/webm; codecs="opus"','video/mp2t; codecs="avc1.42E01E"','video/mp2t; codecs="mp4a.40.2"',"text/vtt",'application/mp4; codecs="wvtt"',"application/ttml+xml",'application/mp4; codecs="stpp"'];n.forEach(function(n){e[n]=t.media.MediaSourceEngine.isTypeSupported(n);var r=n.split(";")[0];e[r]=e[r]||e[n]})}return e},t.media.MediaSourceEngine.prototype.destroy=function(){this.destroyed_=!0;var n=[];for(var r in this.queues_){var i=this.queues_[r],a=i[0];this.queues_[r]=i.slice(0,1),a&&n.push(a.p["catch"](function(){}));for(var s=1;s<i.length;++s)i[s].p["catch"](function(){}),i[s].p.reject()}return Promise.all(n).then(function(){if(this.eventManager_.destroy(),this.eventManager_=null,this.mediaSource_=null,this.textTrack_=null,this.sourceBuffers_={},!e)for(var n in this.queues_)t.asserts.assert(0==this.queues_[n].length,n+" queue should be empty after destroy!");this.queues_={}}.bind(this))},t.media.MediaSourceEngine.prototype.init=function(e){for(var n in e){var r=e[n];t.asserts.assert(t.media.MediaSourceEngine.isTypeSupported(r),"Type negotation should happen before MediaSourceEngine.init!");var i;if("text"==n){var a=new t.media.TextSourceBuffer(this.textTrack_,r);i=a}else i=this.mediaSource_.addSourceBuffer(r);this.eventManager_.listen(i,"error",this.onError_.bind(this,n)),this.eventManager_.listen(i,"updateend",this.onUpdateEnd_.bind(this,n)),this.sourceBuffers_[n]=i,this.queues_[n]=[]}},t.media.MediaSourceEngine.prototype.bufferedAheadOf=function(e,t){for(var n=this.sourceBuffers_[e].buffered,r=1e-6,i=0;i<n.length;++i)if(t+r>=n.start(i)&&t<n.end(i))return n.end(i)-t;return 0},t.media.MediaSourceEngine.prototype.appendBuffer=function(e,t){return this.enqueueOperation_(e,this.append_.bind(this,e,t))},t.media.MediaSourceEngine.prototype.remove=function(e,t,n){return this.enqueueOperation_(e,this.remove_.bind(this,e,t,n))},t.media.MediaSourceEngine.prototype.endOfStream=function(e){return this.enqueueBlockingOperation_(function(){e?this.mediaSource_.endOfStream(e):this.mediaSource_.endOfStream()}.bind(this))},t.media.MediaSourceEngine.prototype.setDuration=function(e){return isNaN(this.mediaSource_.duration)||t.asserts.assert(this.mediaSource_.duration<=e,"duration cannot decrease: "+this.mediaSource_.duration+" -> "+e),this.enqueueBlockingOperation_(function(){this.mediaSource_.duration=e}.bind(this))},t.media.MediaSourceEngine.prototype.append_=function(e,t){this.sourceBuffers_[e].appendBuffer(t)},t.media.MediaSourceEngine.prototype.remove_=function(e,t,n){this.sourceBuffers_[e].remove(t,n)},t.media.MediaSourceEngine.prototype.onError_=function(e,n){var r=this.queues_[e][0];t.asserts.assert(r,"Spurious error event!"),t.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on error!"),r.p.reject(n)},t.media.MediaSourceEngine.prototype.onUpdateEnd_=function(e,n){var r=this.queues_[e][0];t.asserts.assert(r,"Spurious updateend event!"),t.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on updateend!"),r.p.resolve(),this.popFromQueue_(e)},t.media.MediaSourceEngine.prototype.enqueueOperation_=function(e,n){if(this.destroyed_)return Promise.reject();var r={start:n,p:new t.util.PublicPromise};if(this.queues_[e].push(r),1==this.queues_[e].length)try{r.start()}catch(i){r.p.reject(i),this.popFromQueue_(e)}return r.p},t.media.MediaSourceEngine.prototype.enqueueBlockingOperation_=function(n){if(this.destroyed_)return Promise.reject();var r=[];for(var i in this.sourceBuffers_){var a=new t.util.PublicPromise,s={start:function(e){e.resolve()}.bind(null,a),p:a};this.queues_[i].push(s),r.push(a),1==this.queues_[i].length&&s.start()}return Promise.all(r).then(function(){if(!e)for(var r in this.sourceBuffers_)t.asserts.assert(0==this.sourceBuffers_[r].updating,"SourceBuffers should not be updating after a blocking op!");var i;try{n()}catch(a){i=Promise.reject(a)}for(var r in this.sourceBuffers_)this.popFromQueue_(r);return i}.bind(this),function(){if(t.asserts.assert(this.destroyed_,"Should be destroyed by now"),!e)for(var n in this.sourceBuffers_)this.queues_[n].length&&(t.asserts.assert(1==this.queues_[n].length,"Should be at most one item in queue!"),t.asserts.assert(-1!=r.indexOf(this.queues_[n][0].p),"The item in queue should be one of our waiters!"),this.queues_[n].shift());return Promise.reject()}.bind(this))},t.media.MediaSourceEngine.prototype.popFromQueue_=function(e){this.queues_[e].shift();var t=this.queues_[e][0];if(t)try{t.start()}catch(n){t.p.reject(n),this.popFromQueue_(e)}},t.media.MediaSourceEngine.prototype.setTimestampOffset=function(e,t){return this.enqueueBlockingOperation_(function(){this.sourceBuffers_[e].timestampOffset=t}.bind(this))},t.media.MediaSourceEngine}.apply(t,r),!(void 0!==i&&(e.exports=i))}]);